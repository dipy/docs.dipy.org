
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DIPY &#8212; dipy 1.10.0.dev0+git20241209.a05f48e documentation</title>
  
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/dipy.css?v=cedb193d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

  
<link rel="stylesheet" href="../../../_static/styles/grg-sphinx-theme.css"/>

    <script src="../../../_static/documentation_options.js?v=0a189127"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-D610GKJZRC"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-D610GKJZRC');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-D610GKJZRC');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/dipy/data/fetcher';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://docs.dipy.org/dev/_static/version_switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'development';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = true;
        </script>
    <link rel="icon" href="../../../_static/dipy-favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="keywords" content="DIPY, dMRI, DTI, DSI, diffusion MRI, Tensor,
  neuroimaging, python, neuroscience, Eleftherios, Garyfallidis, tractography,
  streamlines, fiber tracking">

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
<nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
     
  

<a class="navbar-brand logo" href="https://dipy.org">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/dipy-logo.png" class="logo__image only-light" alt="DIPY"/>
    <script>document.write(`<img src="../../../_static/dipy-logo.png" class="logo__image only-dark" alt="DIPY"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  
  <ul class="bd-navbar-elements navbar-nav">
    
          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Docs
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
      <li class="nav-item">
        <a class="nav-link" href="../../../index.html">
          Overview
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../examples_built/index.html">
          Tutorials
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../recipes.html">
          Recipes
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../interfaces/index.html">
          CLI / Workflows
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../reference/index.html">
          API
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../reference_cmd/index.html">
          CLI API
        </a>
      </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Workshops
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Latest
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2024" target="_blank">
            DIPY Workshop 2024 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Past
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2023" target="_blank">
            DIPY Workshop 2023 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2022" target="_blank">
            DIPY Workshop 2022 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2021" target="_blank">
            DIPY Workshop 2021 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2020" target="_blank">
            DIPY Workshop 2020 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2019" target="_blank">
            DIPY Workshop 2019 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Community
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
    <li class="nav-item">
      <p class="nav-section-title nav-link">
        News
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/calendar">
            Calendar
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://mail.python.org/mailman3/lists/dipy.python.org/" target="_blank">
            Newsletters <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/blog">
            Blog
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://www.youtube.com/c/diffusionimaginginpython" target="_blank">
            Youtube <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Help
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://app.gitter.im/#/room/%23dipy_dipy:gitter.im" target="_blank">
            Live Chat (Gitter) <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://github.com/dipy/dipy/discussions" target="_blank">
            Github Discussions <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    About
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/team">
            Team
          </a>
        </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../faq.html">
          FAQ
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../user_guide/mission.html">
          Mission Statement
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../stateoftheart.html">
          Releases
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../cite.html">
          Cite
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../glossary.html">
          Glossary
        </a>
      </li>
                </ul>
            </li>
          
  </ul>
  
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/dipy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/dipymri" title="Twitter/X" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter/X</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/c/diffusionimaginginpython" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.linkedin.com/company/dipy/" title="LinkedIn" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-linkedin fa-lg" aria-hidden="true"></i>
            <span class="sr-only">LinkedIn</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  

  
</div>

</nav>

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  
  <ul class="bd-navbar-elements navbar-nav">
    
          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Docs
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
      <li class="nav-item">
        <a class="nav-link" href="../../../index.html">
          Overview
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../examples_built/index.html">
          Tutorials
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../recipes.html">
          Recipes
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../interfaces/index.html">
          CLI / Workflows
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../reference/index.html">
          API
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../reference_cmd/index.html">
          CLI API
        </a>
      </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Workshops
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Latest
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2024" target="_blank">
            DIPY Workshop 2024 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Past
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2023" target="_blank">
            DIPY Workshop 2023 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2022" target="_blank">
            DIPY Workshop 2022 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2021" target="_blank">
            DIPY Workshop 2021 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2020" target="_blank">
            DIPY Workshop 2020 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2019" target="_blank">
            DIPY Workshop 2019 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Community
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
    <li class="nav-item">
      <p class="nav-section-title nav-link">
        News
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/calendar">
            Calendar
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://mail.python.org/mailman3/lists/dipy.python.org/" target="_blank">
            Newsletters <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/blog">
            Blog
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://www.youtube.com/c/diffusionimaginginpython" target="_blank">
            Youtube <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Help
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://app.gitter.im/#/room/%23dipy_dipy:gitter.im" target="_blank">
            Live Chat (Gitter) <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://github.com/dipy/dipy/discussions" target="_blank">
            Github Discussions <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    About
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/team">
            Team
          </a>
        </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../faq.html">
          FAQ
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../user_guide/mission.html">
          Mission Statement
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../stateoftheart.html">
          Releases
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../cite.html">
          Cite
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../../glossary.html">
          Glossary
        </a>
      </li>
                </ul>
            </li>
          
  </ul>
  
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/dipy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/dipymri" title="Twitter/X" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter/X</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/c/diffusionimaginginpython" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.linkedin.com/company/dipy/" title="LinkedIn" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-linkedin fa-lg" aria-hidden="true"></i>
            <span class="sr-only">LinkedIn</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">





<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">Module code</a></li>
    
    
    <li class="breadcrumb-item"><i class="fa-solid fa-ellipsis"></i></li>
    
    
    <li class="breadcrumb-item"><a href="../data.html" class="nav-link">dipy.data</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">DIPY</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <h1>Source code for dipy.data.fetcher</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">contextlib</span>
<span class="kn">from</span> <span class="nn">hashlib</span> <span class="kn">import</span> <span class="n">md5</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">os.path</span> <span class="k">as</span> <span class="nn">op</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span> <span class="k">as</span> <span class="n">pjoin</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">shutil</span> <span class="kn">import</span> <span class="n">copyfileobj</span>
<span class="kn">import</span> <span class="nn">tarfile</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>
<span class="kn">import</span> <span class="nn">zipfile</span>

<span class="kn">import</span> <span class="nn">nibabel</span> <span class="k">as</span> <span class="nn">nib</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">tqdm.auto</span> <span class="kn">import</span> <span class="n">tqdm</span>

<span class="kn">from</span> <span class="nn">dipy.core.gradients</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">gradient_table</span><span class="p">,</span>
    <span class="n">gradient_table_from_gradient_strength_bvecs</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">dipy.io.gradients</span> <span class="kn">import</span> <span class="n">read_bvals_bvecs</span>
<span class="kn">from</span> <span class="nn">dipy.io.image</span> <span class="kn">import</span> <span class="n">load_nifti</span><span class="p">,</span> <span class="n">load_nifti_data</span><span class="p">,</span> <span class="n">save_nifti</span>
<span class="kn">from</span> <span class="nn">dipy.io.streamline</span> <span class="kn">import</span> <span class="n">load_trk</span>
<span class="kn">from</span> <span class="nn">dipy.testing.decorators</span> <span class="kn">import</span> <span class="n">warning_for_keywords</span>
<span class="kn">from</span> <span class="nn">dipy.utils.optpkg</span> <span class="kn">import</span> <span class="n">TripWire</span><span class="p">,</span> <span class="n">optional_package</span>

<span class="c1"># Set a user-writeable file-system location to put files:</span>
<span class="k">if</span> <span class="s2">&quot;DIPY_HOME&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
    <span class="n">dipy_home</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;DIPY_HOME&quot;</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">dipy_home</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span> <span class="s2">&quot;.dipy&quot;</span><span class="p">)</span>

<span class="c1"># The URL to the University of Washington Researchworks repository:</span>
<span class="n">UW_RW_URL</span> <span class="o">=</span> <span class="s2">&quot;https://digital.lib.washington.edu/researchworks/bitstream/handle/&quot;</span>


<span class="n">boto3</span><span class="p">,</span> <span class="n">has_boto3</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">optional_package</span><span class="p">(</span><span class="s2">&quot;boto3&quot;</span><span class="p">)</span>

<span class="n">HEADER_LIST</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="s2">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64)&quot;</span><span class="p">},</span>
    <span class="c1"># Firefox 77 Mac</span>
    <span class="p">{</span>
        <span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="s2">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:77.0) Gecko/20100101 Firefox/77.0&quot;</span><span class="p">,</span>  <span class="c1"># noqa</span>
        <span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&quot;</span><span class="p">,</span>  <span class="c1"># noqa</span>
        <span class="s2">&quot;Accept-Language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US,en;q=0.5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Referer&quot;</span><span class="p">:</span> <span class="s2">&quot;https://www.google.com/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DNT&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Connection&quot;</span><span class="p">:</span> <span class="s2">&quot;keep-alive&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Upgrade-Insecure-Requests&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="c1"># Firefox 77 Windows</span>
    <span class="p">{</span>
        <span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="s2">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:77.0) Gecko/20100101 Firefox/77.0&quot;</span><span class="p">,</span>  <span class="c1"># noqa</span>
        <span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&quot;</span><span class="p">,</span>  <span class="c1"># noqa</span>
        <span class="s2">&quot;Accept-Language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US,en;q=0.5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Accept-Encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;gzip, deflate, br&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Referer&quot;</span><span class="p">:</span> <span class="s2">&quot;https://www.google.com/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DNT&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Connection&quot;</span><span class="p">:</span> <span class="s2">&quot;keep-alive&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Upgrade-Insecure-Requests&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="c1"># Chrome 83 Mac</span>
    <span class="p">{</span>
        <span class="s2">&quot;Connection&quot;</span><span class="p">:</span> <span class="s2">&quot;keep-alive&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DNT&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Upgrade-Insecure-Requests&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="s2">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.97 Safari/537.36&quot;</span><span class="p">,</span>  <span class="c1"># noqa</span>
        <span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;</span><span class="p">,</span>  <span class="c1"># noqa</span>
        <span class="s2">&quot;Sec-Fetch-Site&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Sec-Fetch-Mode&quot;</span><span class="p">:</span> <span class="s2">&quot;navigate&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Sec-Fetch-Dest&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Referer&quot;</span><span class="p">:</span> <span class="s2">&quot;https://www.google.com/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Accept-Encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;gzip, deflate, br&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Accept-Language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-GB,en-US;q=0.9,en;q=0.8&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="c1"># Chrome 83 Windows</span>
    <span class="p">{</span>
        <span class="s2">&quot;Connection&quot;</span><span class="p">:</span> <span class="s2">&quot;keep-alive&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Upgrade-Insecure-Requests&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="s2">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.97 Safari/537.36&quot;</span><span class="p">,</span>  <span class="c1"># noqa</span>
        <span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;</span><span class="p">,</span>  <span class="c1"># noqa</span>
        <span class="s2">&quot;Sec-Fetch-Site&quot;</span><span class="p">:</span> <span class="s2">&quot;same-origin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Sec-Fetch-Mode&quot;</span><span class="p">:</span> <span class="s2">&quot;navigate&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Sec-Fetch-User&quot;</span><span class="p">:</span> <span class="s2">&quot;?1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Sec-Fetch-Dest&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Referer&quot;</span><span class="p">:</span> <span class="s2">&quot;https://www.google.com/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Accept-Encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;gzip, deflate, br&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Accept-Language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US,en;q=0.9&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">]</span>


<span class="k">class</span> <span class="nc">FetcherError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">_log</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Helper function used as short hand for logging.&quot;&quot;&quot;</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>


<div class="viewcode-block" id="copyfileobj_withprogress">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.copyfileobj_withprogress">[docs]</a>
<span class="nd">@warning_for_keywords</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">copyfileobj_withprogress</span><span class="p">(</span><span class="n">fsrc</span><span class="p">,</span> <span class="n">fdst</span><span class="p">,</span> <span class="n">total_length</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">16</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">total_length</span><span class="p">),</span> <span class="n">length</span><span class="p">),</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot; MB&quot;</span><span class="p">):</span>
        <span class="n">buf</span> <span class="o">=</span> <span class="n">fsrc</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">buf</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">fdst</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span></div>



<span class="k">def</span> <span class="nf">_already_there_msg</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Prints a message indicating that a certain data-set is already in place</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Dataset is already in place. If you want to fetch it again &quot;</span>
    <span class="n">msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;please first remove the folder </span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2"> &quot;</span>
    <span class="n">_log</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_get_file_md5</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute the md5 checksum of a file&quot;&quot;&quot;</span>
    <span class="n">md5_data</span> <span class="o">=</span> <span class="n">md5</span><span class="p">()</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">128</span> <span class="o">*</span> <span class="n">md5_data</span><span class="o">.</span><span class="n">block_size</span><span class="p">),</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="n">md5_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">md5_data</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>


<div class="viewcode-block" id="check_md5">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.check_md5">[docs]</a>
<span class="nd">@warning_for_keywords</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">check_md5</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">stored_md5</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes the md5 of filename and check if it matches with the supplied</span>
<span class="sd">    string md5</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : string</span>
<span class="sd">        Path to a file.</span>
<span class="sd">    md5 : string</span>
<span class="sd">        Known md5 of filename to check against. If None (default), checking is</span>
<span class="sd">        skipped</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">stored_md5</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">computed_md5</span> <span class="o">=</span> <span class="n">_get_file_md5</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">stored_md5</span> <span class="o">!=</span> <span class="n">computed_md5</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;The downloaded file, </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">, does not have the expected md5</span>
<span class="s2">   checksum of &quot;</span><span class="si">{</span><span class="n">stored_md5</span><span class="si">}</span><span class="s2">&quot;. Instead, the md5 checksum was: &quot;</span><span class="si">{</span><span class="n">computed_md5</span><span class="si">}</span><span class="s2">&quot;. This</span>
<span class="s2">   could mean that something is wrong with the file or that the upstream file has been</span>
<span class="s2">   updated. You can try downloading the file again or updating to the newest version of</span>
<span class="s2">   dipy.&quot;&quot;&quot;</span>
            <span class="k">raise</span> <span class="n">FetcherError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>



<span class="k">def</span> <span class="nf">_get_file_data</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">use_headers</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get data from url and write it to file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fname : str</span>
<span class="sd">        The filename to write the data to.</span>
<span class="sd">    url : str</span>
<span class="sd">        The URL to get the data from.</span>
<span class="sd">    use_headers : bool, optional</span>
<span class="sd">        Whether to use headers when downloading files.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">req</span> <span class="o">=</span> <span class="n">url</span>
    <span class="k">if</span> <span class="n">use_headers</span><span class="p">:</span>
        <span class="n">hdr</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">HEADER_LIST</span><span class="p">)</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">hdr</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">closing</span><span class="p">(</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">))</span> <span class="k">as</span> <span class="n">opener</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response_size</span> <span class="o">=</span> <span class="n">opener</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;content-length&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">response_size</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">response_size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">copyfileobj</span><span class="p">(</span><span class="n">opener</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">copyfileobj_withprogress</span><span class="p">(</span><span class="n">opener</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_size</span><span class="p">)</span>


<div class="viewcode-block" id="fetch_data">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.fetch_data">[docs]</a>
<span class="nd">@warning_for_keywords</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">fetch_data</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">data_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_headers</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Downloads files to folder and checks their md5 checksums</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    files : dictionary</span>
<span class="sd">        For each file in `files` the value should be (url, md5). The file will</span>
<span class="sd">        be downloaded from url if the file does not already exist or if the</span>
<span class="sd">        file exists but the md5 checksum does not match.</span>
<span class="sd">    folder : str</span>
<span class="sd">        The directory where to save the file, the directory will be created if</span>
<span class="sd">        it does not already exist.</span>
<span class="sd">    data_size : str, optional</span>
<span class="sd">        A string describing the size of the data (e.g. &quot;91 MB&quot;) to be logged to</span>
<span class="sd">        the screen. Default does not produce any information about data size.</span>
<span class="sd">    use_headers : bool, optional</span>
<span class="sd">        Whether to use headers when downloading files.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    FetcherError</span>
<span class="sd">        Raises if the md5 checksum of the file does not match the expected</span>
<span class="sd">        value. The downloaded file is not deleted when this error is raised.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">op</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="n">_log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating new folder </span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">data_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data size is approximately </span><span class="si">{</span><span class="n">data_size</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">all_skip</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">md5</span> <span class="o">=</span> <span class="n">files</span><span class="p">[</span><span class="n">f</span><span class="p">]</span>
        <span class="n">fullpath</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">op</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">fullpath</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">_get_file_md5</span><span class="p">(</span><span class="n">fullpath</span><span class="p">)</span> <span class="o">==</span> <span class="n">md5</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">all_skip</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">_log</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Downloading &quot;</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s1">&quot; to </span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">_log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;From: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">_get_file_data</span><span class="p">(</span><span class="n">fullpath</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">use_headers</span><span class="o">=</span><span class="n">use_headers</span><span class="p">)</span>
        <span class="n">check_md5</span><span class="p">(</span><span class="n">fullpath</span><span class="p">,</span> <span class="n">stored_md5</span><span class="o">=</span><span class="n">md5</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">all_skip</span><span class="p">:</span>
        <span class="n">_already_there_msg</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Files successfully downloaded to </span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>



<span class="nd">@warning_for_keywords</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">_make_fetcher</span><span class="p">(</span>
    <span class="n">name</span><span class="p">,</span>
    <span class="n">folder</span><span class="p">,</span>
    <span class="n">baseurl</span><span class="p">,</span>
    <span class="n">remote_fnames</span><span class="p">,</span>
    <span class="n">local_fnames</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">msg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">unzip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">use_headers</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new fetcher</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name : str</span>
<span class="sd">        The name of the fetcher function.</span>
<span class="sd">    folder : str</span>
<span class="sd">        The full path to the folder in which the files would be placed locally.</span>
<span class="sd">        Typically, this is something like &#39;pjoin(dipy_home, &#39;foo&#39;)&#39;</span>
<span class="sd">    baseurl : str</span>
<span class="sd">        The URL from which this fetcher reads files</span>
<span class="sd">    remote_fnames : list of strings</span>
<span class="sd">        The names of the files in the baseurl location</span>
<span class="sd">    local_fnames : list of strings</span>
<span class="sd">        The names of the files to be saved on the local filesystem</span>
<span class="sd">    md5_list : list of strings, optional</span>
<span class="sd">        The md5 checksums of the files. Used to verify the content of the</span>
<span class="sd">        files. Default: None, skipping checking md5.</span>
<span class="sd">    doc : str, optional.</span>
<span class="sd">        Documentation of the fetcher.</span>
<span class="sd">    data_size : str, optional.</span>
<span class="sd">        If provided, is sent as a message to the user before downloading</span>
<span class="sd">        starts.</span>
<span class="sd">    msg : str, optional.</span>
<span class="sd">        A message to print to screen when fetching takes place. Default (None)</span>
<span class="sd">        is to print nothing</span>
<span class="sd">    unzip : bool, optional</span>
<span class="sd">        Whether to unzip the file(s) after downloading them. Supports zip, gz,</span>
<span class="sd">        and tar.gz files.</span>
<span class="sd">    use_headers : bool, optional</span>
<span class="sd">        Whether to use headers when downloading files.</span>

<span class="sd">    returns</span>
<span class="sd">    -------</span>
<span class="sd">    fetcher : function</span>
<span class="sd">        A function that, when called, fetches data according to the designated</span>
<span class="sd">        inputs</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">fetcher</span><span class="p">():</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="p">(</span>
            <span class="n">i</span><span class="p">,</span>
            <span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">n</span><span class="p">),</span>
        <span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">remote_fnames</span><span class="p">,</span> <span class="n">local_fnames</span><span class="p">)):</span>
            <span class="n">files</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">baseurl</span> <span class="o">+</span> <span class="n">f</span><span class="p">,</span> <span class="n">md5_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">md5_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">fetch_data</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="n">data_size</span><span class="o">=</span><span class="n">data_size</span><span class="p">,</span> <span class="n">use_headers</span><span class="o">=</span><span class="n">use_headers</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_log</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">unzip</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">local_fnames</span><span class="p">:</span>
                <span class="n">split_ext</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">split_ext</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;.bz2&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">op</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">split_ext</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;.tar&quot;</span><span class="p">:</span>
                        <span class="n">ar</span> <span class="o">=</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">f</span><span class="p">))</span>
                        <span class="n">ar</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">folder</span><span class="p">)</span>
                        <span class="n">ar</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;File extension is not recognized&quot;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">split_ext</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;.zip&quot;</span><span class="p">:</span>
                    <span class="n">z</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
                    <span class="n">files</span><span class="p">[</span><span class="n">f</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">namelist</span><span class="p">()),)</span>
                    <span class="n">z</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
                    <span class="n">z</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;File extension is not recognized&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">files</span><span class="p">,</span> <span class="n">folder</span>

    <span class="n">fetcher</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">name</span>
    <span class="n">fetcher</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">doc</span>
    <span class="k">return</span> <span class="n">fetcher</span>


<span class="n">fetch_isbi2013_2shell</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_isbi2013_2shell&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;isbi2013&quot;</span><span class="p">),</span>
    <span class="n">UW_RW_URL</span> <span class="o">+</span> <span class="s2">&quot;1773/38465/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;phantom64.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;phantom64.bval&quot;</span><span class="p">,</span> <span class="s2">&quot;phantom64.bvec&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;phantom64.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;phantom64.bval&quot;</span><span class="p">,</span> <span class="s2">&quot;phantom64.bvec&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;42911a70f232321cf246315192d69c42&quot;</span><span class="p">,</span>
        <span class="s2">&quot;90e8cf66e0f4d9737a3b3c0da24df5ea&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4b7aa2757a1ccab140667b76e8075cb1&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download a 2-shell software phantom dataset&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_stanford_labels</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_stanford_labels&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;stanford_hardi&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://stacks.stanford.edu/file/druid:yx282xq2090/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;aparc-reduced.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;label_info.txt&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;aparc-reduced.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;label_info.txt&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;742de90090d06e687ce486f680f6d71a&quot;</span><span class="p">,</span> <span class="s2">&quot;39db9f0f5e173d7a2c2e51b07d5d711b&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download reduced freesurfer aparc image from stanford web site&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_sherbrooke_3shell</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_sherbrooke_3shell&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;sherbrooke_3shell&quot;</span><span class="p">),</span>
    <span class="n">UW_RW_URL</span> <span class="o">+</span> <span class="s2">&quot;1773/38475/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;HARDI193.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;HARDI193.bval&quot;</span><span class="p">,</span> <span class="s2">&quot;HARDI193.bvec&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;HARDI193.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;HARDI193.bval&quot;</span><span class="p">,</span> <span class="s2">&quot;HARDI193.bvec&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;0b735e8f16695a37bfbd66aab136eb66&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e9b9bb56252503ea49d31fb30a0ac637&quot;</span><span class="p">,</span>
        <span class="s2">&quot;0c83f7e8b917cd677ad58a078658ebb7&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download a 3shell HARDI dataset with 192 gradient direction&quot;</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">fetch_stanford_hardi</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_stanford_hardi&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;stanford_hardi&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://stacks.stanford.edu/file/druid:yx282xq2090/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;dwi.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;dwi.bvals&quot;</span><span class="p">,</span> <span class="s2">&quot;dwi.bvecs&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;HARDI150.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;HARDI150.bval&quot;</span><span class="p">,</span> <span class="s2">&quot;HARDI150.bvec&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;0b18513b46132b4d1051ed3364f2acbc&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4e08ee9e2b1d2ec3fddb68c70ae23c36&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4c63a586f29afc6a48a5809524a76cb4&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download a HARDI dataset with 160 gradient directions&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_resdnn_tf_weights</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_resdnn_tf_weights&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;histo_resdnn_weights&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;22736240&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;resdnn_weights_mri_2018.h5&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;f0e118d72ab804a464494bd9015227f4&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download ResDNN Tensorflow model weights for Nath et. al 2018&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_resdnn_torch_weights</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_resdnn_torch_weights&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;histo_resdnn_weights&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;50019429&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;histo_weights.pth&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ca13692bbbaea725ff8b5df2d3a2779a&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download ResDNN Pytorch model weights for Nath et. al 2018&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_synb0_weights</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_synb0_weights&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;synb0&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;36379914&quot;</span><span class="p">,</span> <span class="s2">&quot;36379917&quot;</span><span class="p">,</span> <span class="s2">&quot;36379920&quot;</span><span class="p">,</span> <span class="s2">&quot;36379923&quot;</span><span class="p">,</span> <span class="s2">&quot;36379926&quot;</span><span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;synb0_default_weights1.h5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;synb0_default_weights2.h5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;synb0_default_weights3.h5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;synb0_default_weights4.h5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;synb0_default_weights5.h5&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;a9362c75bc28616167a11a42fe5d004e&quot;</span><span class="p">,</span>
        <span class="s2">&quot;9dc9353d6ff741d8e22b8569f157c56e&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e548f341e4f12d63dfbed306233fddce&quot;</span><span class="p">,</span>
        <span class="s2">&quot;8cb7a3492d08e4c9b8938277d6fd9b75&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5e796f892605b3bdb9cb9678f1c6ac11&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download Synb0 model weights for Schilling et. al 2019&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_synb0_test</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_synb0_test&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;synb0&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;36379911&quot;</span><span class="p">,</span> <span class="s2">&quot;36671850&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;test_input_synb0.npz&quot;</span><span class="p">,</span> <span class="s2">&quot;test_output_synb0.npz&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;987203aa73de2dac8770f39ed506dc0c&quot;</span><span class="p">,</span> <span class="s2">&quot;515544fbcafd9769785502821b47b661&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download Synb0 test data for Schilling et. al 2019&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_deepn4_weights</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_deepn4_weights&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;deepn4&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;44673313&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;model_weights.h5&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ef264edd554177a180cf99162dbd2745&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download DeepN4 model weights for Kanakaraj et. al 2024&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_deepn4_test</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_deepn4_test&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;deepn4&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;48842938&quot;</span><span class="p">,</span> <span class="s2">&quot;48842941&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;test_input_deepn4.npz&quot;</span><span class="p">,</span> <span class="s2">&quot;test_output_deepn4.npz&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;07aa7cc7c7f839683a0aad5bb853605b&quot;</span><span class="p">,</span> <span class="s2">&quot;8f52bdfceef93a5acae7c32a2c63a7c6&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download DeepN4 test data for Kanakaraj et. al 2024&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_evac_tf_weights</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_evac_tf_weights&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;evac&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;43037191&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;evac_default_weights.h5&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;491cfa4f9a2860fad6c19f2b71b918e1&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download EVAC+ model weights for Park et. al 2022&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_evac_torch_weights</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_evac_torch_weights&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;evac&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;50019432&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;evac_weights.pth&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;b2bab512a0f899f089d9dd9ffc44f65b&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download EVAC+ model weights for Park et. al 2022&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_evac_test</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_evac_test&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;evac&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;48891958&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;evac_test_data.npz&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;072a0dd6d2cddf8a3697b6a772e06e29&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download EVAC+ test data for Park et. al 2022&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_stanford_t1</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_stanford_t1&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;stanford_hardi&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://stacks.stanford.edu/file/druid:yx282xq2090/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;t1.nii.gz&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;t1.nii.gz&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a6a140da6a947d4131b2368752951b0a&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">fetch_stanford_pve_maps</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_stanford_pve_maps&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;stanford_hardi&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://stacks.stanford.edu/file/druid:yx282xq2090/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;pve_csf.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;pve_gm.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;pve_wm.nii.gz&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;pve_csf.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;pve_gm.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;pve_wm.nii.gz&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;2c498e4fed32bca7f726e28aa86e9c18&quot;</span><span class="p">,</span>
        <span class="s2">&quot;1654b20aeb35fc2734a0d7928b713874&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2e244983cf92aaf9f9d37bc7716b37d5&quot;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">)</span>

<span class="n">fetch_stanford_tracks</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_stanford_tracks&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;stanford_hardi&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://raw.githubusercontent.com/dipy/dipy_datatest/main/&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;hardi-lr-superiorfrontal.trk&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;hardi-lr-superiorfrontal.trk&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;2d49aaf6ad6c10d8d069bfb319bf3541&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download stanford track for examples&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;1.4MB&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_taiwan_ntu_dsi</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_taiwan_ntu_dsi&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;taiwan_ntu_dsi&quot;</span><span class="p">),</span>
    <span class="n">UW_RW_URL</span> <span class="o">+</span> <span class="s2">&quot;1773/38480/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;DSI203.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;DSI203.bval&quot;</span><span class="p">,</span> <span class="s2">&quot;DSI203.bvec&quot;</span><span class="p">,</span> <span class="s2">&quot;DSI203_license.txt&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;DSI203.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;DSI203.bval&quot;</span><span class="p">,</span> <span class="s2">&quot;DSI203.bvec&quot;</span><span class="p">,</span> <span class="s2">&quot;DSI203_license.txt&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;950408c0980a7154cb188666a885a91f&quot;</span><span class="p">,</span>
        <span class="s2">&quot;602e5cb5fad2e7163e8025011d8a6755&quot;</span><span class="p">,</span>
        <span class="s2">&quot;a95eb1be44748c20214dc7aa654f9e6b&quot;</span><span class="p">,</span>
        <span class="s2">&quot;7fa1d5e272533e832cc7453eeba23f44&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download a DSI dataset with 203 gradient directions&quot;</span><span class="p">,</span>
    <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;See DSI203_license.txt for LICENSE. For the complete datasets&quot;</span>
    <span class="o">+</span> <span class="s2">&quot; please visit https://dsi-studio.labsolver.org&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;91MB&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_syn_data</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_syn_data&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;syn_test&quot;</span><span class="p">),</span>
    <span class="n">UW_RW_URL</span> <span class="o">+</span> <span class="s2">&quot;1773/38476/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;t1.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;b0.nii.gz&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;t1.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;b0.nii.gz&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;701bda02bb769655c7d4a9b1df2b73a6&quot;</span><span class="p">,</span> <span class="s2">&quot;e4b741f0c77b6039e67abb2885c97a78&quot;</span><span class="p">],</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;12MB&quot;</span><span class="p">,</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download t1 and b0 volumes from the same session&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_mni_template</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_mni_template&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;mni_template&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;5572676?private_link=4b8666116a0128560fb5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5572673?private_link=93216e750d5a7e568bda&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5572670?private_link=33c92d54d1afb9aa7ed2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5572661?private_link=584319b23e7343fed707&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;mni_icbm152_t2_tal_nlin_asym_09a.nii&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mni_icbm152_t1_tal_nlin_asym_09a.nii&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mni_icbm152_t1_tal_nlin_asym_09c_mask.nii&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mni_icbm152_t1_tal_nlin_asym_09c.nii&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;f41f2e1516d880547fbf7d6a83884f0d&quot;</span><span class="p">,</span>
        <span class="s2">&quot;1ea8f4f1e41bc17a94602e48141fdbc8&quot;</span><span class="p">,</span>
        <span class="s2">&quot;a243e249cd01a23dc30f033b9656a786&quot;</span><span class="p">,</span>
        <span class="s2">&quot;3d5dd9b0cd727a17ceec610b782f66c1&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;fetch the MNI 2009a T1 and T2, and 2009c T1 and T1 mask files&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;70MB&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_scil_b0</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_scil_b0&quot;</span><span class="p">,</span>
    <span class="n">dipy_home</span><span class="p">,</span>
    <span class="n">UW_RW_URL</span> <span class="o">+</span> <span class="s2">&quot;1773/38479/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;datasets_multi-site_all_companies.zip&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;datasets_multi-site_all_companies.zip&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;e9810fa5bf21b99da786647994d7d5b7&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download b=0 datasets from multiple MR systems (GE, Philips, &quot;</span>
    <span class="o">+</span> <span class="s2">&quot;Siemens) and different magnetic fields (1.5T and 3T)&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;9.2MB&quot;</span><span class="p">,</span>
    <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_bundles_2_subjects</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_bundles_2_subjects&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;exp_bundles_and_maps&quot;</span><span class="p">),</span>
    <span class="n">UW_RW_URL</span> <span class="o">+</span> <span class="s2">&quot;1773/38477/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;bundles_2_subjects.tar.gz&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;bundles_2_subjects.tar.gz&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;97756fbef11ce2df31f1bedf1fc7aac7&quot;</span><span class="p">],</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;234MB&quot;</span><span class="p">,</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download 2 subjects from the SNAIL dataset with their bundles&quot;</span><span class="p">,</span>
    <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_ivim</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_ivim&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;ivim&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;5305243&quot;</span><span class="p">,</span> <span class="s2">&quot;5305246&quot;</span><span class="p">,</span> <span class="s2">&quot;5305249&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;ivim.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;ivim.bval&quot;</span><span class="p">,</span> <span class="s2">&quot;ivim.bvec&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;cda596f89dc2676af7d9bf1cabccf600&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f03d89f84aa9a9397103a400e43af43a&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fb633a06b02807355e49ccd85cb92565&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download IVIM dataset&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_cfin_multib</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_cfin_multib&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;cfin_multib&quot;</span><span class="p">),</span>
    <span class="n">UW_RW_URL</span> <span class="o">+</span> <span class="s2">&quot;/1773/38488/&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;T1.nii&quot;</span><span class="p">,</span>
        <span class="s2">&quot;__DTI_AX_ep2d_2_5_iso_33d_20141015095334_4.nii&quot;</span><span class="p">,</span>
        <span class="s2">&quot;__DTI_AX_ep2d_2_5_iso_33d_20141015095334_4.bval&quot;</span><span class="p">,</span>
        <span class="s2">&quot;__DTI_AX_ep2d_2_5_iso_33d_20141015095334_4.bvec&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;T1.nii&quot;</span><span class="p">,</span>
        <span class="s2">&quot;__DTI_AX_ep2d_2_5_iso_33d_20141015095334_4.nii&quot;</span><span class="p">,</span>
        <span class="s2">&quot;__DTI_AX_ep2d_2_5_iso_33d_20141015095334_4.bval&quot;</span><span class="p">,</span>
        <span class="s2">&quot;__DTI_AX_ep2d_2_5_iso_33d_20141015095334_4.bvec&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;889883b5e7d93a6e372bc760ea887e7c&quot;</span><span class="p">,</span>
        <span class="s2">&quot;9daea1d01d68fd0055a3b34f5ffd5f6e&quot;</span><span class="p">,</span>
        <span class="s2">&quot;3ee44135fde7ea5c9b8c801414bdde2c&quot;</span><span class="p">,</span>
        <span class="s2">&quot;948373391de950e7cc1201ba9f696bf0&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download CFIN multi b-value diffusion data&quot;</span><span class="p">,</span>
    <span class="n">msg</span><span class="o">=</span><span class="p">(</span>
        <span class="s2">&quot;This data was provided by Brian Hansen and Sune Jespersen&quot;</span>
        <span class="o">+</span> <span class="s2">&quot; More details about the data are available in their paper: &quot;</span>
        <span class="o">+</span> <span class="s2">&quot; https://www.nature.com/articles/sdata201672&quot;</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="n">fetch_file_formats</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;bundle_file_formats_example&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;bundle_file_formats_example&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://zenodo.org/record/3352379/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;cc_m_sub.trk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;laf_m_sub.tck&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lpt_m_sub.fib&quot;</span><span class="p">,</span>
        <span class="s2">&quot;raf_m_sub.vtk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rpt_m_sub.dpy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;template0.nii.gz&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;cc_m_sub.trk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;laf_m_sub.tck&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lpt_m_sub.fib&quot;</span><span class="p">,</span>
        <span class="s2">&quot;raf_m_sub.vtk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rpt_m_sub.dpy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;template0.nii.gz&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;78ed7bead3e129fb4b4edd6da1d7e2d2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;20009796ccd43dc8d2d5403b25dff717&quot;</span><span class="p">,</span>
        <span class="s2">&quot;8afa8419e2efe04ede75cce1f53c77d8&quot;</span><span class="p">,</span>
        <span class="s2">&quot;9edcbea30c7a83b467c3cdae6ce963c8&quot;</span><span class="p">,</span>
        <span class="s2">&quot;42bff2538a650a7ff1e57bfd9ed90ad6&quot;</span><span class="p">,</span>
        <span class="s2">&quot;99c37a2134026d2c4bbb7add5088ddc6&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download 5 bundles in various file formats and their reference&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;25MB&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_bundle_atlas_hcp842</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_bundle_atlas_hcp842&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;bundle_atlas_hcp842&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;13638644&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;Atlas_80_Bundles.zip&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;78331d527a10ec000d4f33bac472e099&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download atlas tractogram from the hcp842 dataset with 80 bundles&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;300MB&quot;</span><span class="p">,</span>
    <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_30_bundle_atlas_hcp842</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_30_bundle_atlas_hcp842&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;bundle_atlas_hcp842&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;26842853&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;Atlas_30_Bundles.zip&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;f3922cdbea4216823798fade128d6782&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download atlas tractogram from the hcp842 dataset with 30 bundles&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;207.09MB&quot;</span><span class="p">,</span>
    <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_target_tractogram_hcp</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_target_tractogram_hcp&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;target_tractogram_hcp&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;12871127&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;hcp_tractogram.zip&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fa25ef19c9d3748929b6423397963b6a&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download tractogram of one of the hcp dataset subjects&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;541MB&quot;</span><span class="p">,</span>
    <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">fetch_bundle_fa_hcp</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_bundle_fa_hcp&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;bundle_fa_hcp&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;14035265&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;hcp_bundle_fa.nii.gz&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;2d5c0036b0575597378ddf39191028ea&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Download map of FA within two bundles in one of the hcp dataset subjects&quot;</span><span class="p">),</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;230kb&quot;</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">fetch_qtdMRI_test_retest_2subjects</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_qtdMRI_test_retest_2subjects&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;qtdMRI_test_retest_2subjects&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://zenodo.org/record/996889/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;subject1_dwis_test.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_dwis_test.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject1_dwis_retest.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_dwis_retest.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject1_ccmask_test.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_ccmask_test.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject1_ccmask_retest.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_ccmask_retest.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject1_scheme_test.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_scheme_test.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject1_scheme_retest.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_scheme_retest.txt&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;subject1_dwis_test.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_dwis_test.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject1_dwis_retest.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_dwis_retest.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject1_ccmask_test.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_ccmask_test.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject1_ccmask_retest.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_ccmask_retest.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject1_scheme_test.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_scheme_test.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject1_scheme_retest.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_scheme_retest.txt&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;ebd7441f32c40e25c28b9e069bd81981&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dd6a64dd68c8b321c75b9d5fb42c275a&quot;</span><span class="p">,</span>
        <span class="s2">&quot;830a7a028a66d1b9812f93309a3f9eae&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d7f1951e726c35842f7ea0a15d990814&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ddb8dfae908165d5e82c846bcc317cab&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5630c06c267a0f9f388b07b3e563403c&quot;</span><span class="p">,</span>
        <span class="s2">&quot;02e9f92b31e8980f658da99e532e14b5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;6e7ce416e7cfda21cecce3731f81712b&quot;</span><span class="p">,</span>
        <span class="s2">&quot;957cb969f97d89e06edd7a04ffd61db0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5540c0c9bd635c29fc88dd599cbbf5e6&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5540c0c9bd635c29fc88dd599cbbf5e6&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5540c0c9bd635c29fc88dd599cbbf5e6&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Downloads test-retest qt-dMRI acquisitions of two C57Bl6 mice.&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;298.2MB&quot;</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">fetch_gold_standard_io</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_gold_standard_io&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;gold_standard_io&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://zenodo.org/record/7767654/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;gs.trk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs.tck&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs.trx&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs.fib&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs.dpy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs.nii&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs_3mm.nii&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs_rasmm_space.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs_voxmm_space.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs_vox_space.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;points_data.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;streamlines_data.txt&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;gs.trk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs.tck&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs.trx&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs.fib&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs.dpy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs.nii&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs_3mm.nii&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs_rasmm_space.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs_voxmm_space.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gs_vox_space.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;points_data.json&quot;</span><span class="p">,</span>
        <span class="s2">&quot;streamlines_data.json&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;3acf565779f4d5107f96b2ef90578d64&quot;</span><span class="p">,</span>
        <span class="s2">&quot;151a30cf356c002060d720bf9d577245&quot;</span><span class="p">,</span>
        <span class="s2">&quot;a6587f1a3adc4df076910c4d72eb4161&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e9818e07bef5bd605dea0877df14a2b0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;248606297e400d1a9b1786845aad8de3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;a2d4d8f62d1de0ab9927782c7d51cb27&quot;</span><span class="p">,</span>
        <span class="s2">&quot;217b3ae0712a02b2463b8eedfe9a0a68&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ca193a5508d3313d542231aaf262960f&quot;</span><span class="p">,</span>
        <span class="s2">&quot;3284de59dfd9ca3130e6e01258ed9022&quot;</span><span class="p">,</span>
        <span class="s2">&quot;a2a89c387f45adab733652a92f6602d5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4bcca0c6195871fc05e93cdfabec22b4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;578f29052ac03a6d8a98580eb7c70d97&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Downloads the gold standard for streamlines io testing.&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;47.KB&quot;</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">fetch_qte_lte_pte</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_qte_lte_pte&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;qte_lte_pte&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://zenodo.org/record/4624866/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;lte-pte.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;lte-pte.bval&quot;</span><span class="p">,</span> <span class="s2">&quot;lte-pte.bvec&quot;</span><span class="p">,</span> <span class="s2">&quot;mask.nii.gz&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;lte-pte.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;lte-pte.bval&quot;</span><span class="p">,</span> <span class="s2">&quot;lte-pte.bvec&quot;</span><span class="p">,</span> <span class="s2">&quot;mask.nii.gz&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;f378b2cd9f57625512002b9e4c0f1660&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5c25d24dd3df8590582ed690507a8769&quot;</span><span class="p">,</span>
        <span class="s2">&quot;31abe55dfda7ef5fdf5015d0713be9b0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;1b7b83b8a60295f52d80c3855a12b275&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download QTE data with linear and planar tensor encoding.&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;41.5 MB&quot;</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">fetch_cti_rat1</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_cti_rat1&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;cti_rat1&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://zenodo.org/record/8276773/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;Rat1_invivo_cti_data.nii&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvals1.bval&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvec1.bvec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvals2.bval&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvec2.bvec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Rat1_mask.nii&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;Rat1_invivo_cti_data.nii&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvals1.bval&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvec1.bvec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvals2.bval&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvec2.bvec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Rat1_mask.nii&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;2f855e7826f359d80cfd6f094d3a7008&quot;</span><span class="p">,</span>
        <span class="s2">&quot;1deed2a91e20104ca42d7482cc096a9a&quot;</span><span class="p">,</span>
        <span class="s2">&quot;40a4f5131b8a64608d16b0c6c5ad0837&quot;</span><span class="p">,</span>
        <span class="s2">&quot;1979c7dc074e00f01103cbdf83ed78db&quot;</span><span class="p">,</span>
        <span class="s2">&quot;653d9344060803d5576f43c65ce45ccb&quot;</span><span class="p">,</span>
        <span class="s2">&quot;34bc3d5acea9442d05ef185717780440&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download Rat Brain DDE data for CTI reconstruction&quot;</span>
    <span class="o">+</span> <span class="s2">&quot; (Rat #1 data from Henriques et al. MRM 2021).&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;152.92 MB&quot;</span><span class="p">,</span>
    <span class="n">msg</span><span class="o">=</span><span class="p">(</span>
        <span class="s2">&quot;More details about the data are available in the paper: &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;https://onlinelibrary.wiley.com/doi/full/10.1002/mrm.28938&quot;</span>
    <span class="p">),</span>
<span class="p">)</span>


<span class="n">fetch_fury_surface</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_fury_surface&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;fury_surface&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://raw.githubusercontent.com/fury-gl/fury-data/master/surfaces/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;100307_white_lh.vtk&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;100307_white_lh.vtk&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dbec91e29af15541a5cb36d80977b26b&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Surface for testing and examples&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;11MB&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_DiB_70_lte_pte_ste</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_DiB_70_lte_pte_ste&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;DiB_70_lte_pte_ste&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://github.com/filip-szczepankiewicz/Szczepankiewicz_DIB_2019/&quot;</span>
    <span class="s2">&quot;raw/master/DATA/brain/NII_Boito_SubSamples/&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;DiB_70_lte_pte_ste/DiB_70_lte_pte_ste.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiB_70_lte_pte_ste/bval_DiB_70_lte_pte_ste.bval&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiB_70_lte_pte_ste/bvec_DiB_70_lte_pte_ste.bvec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiB_mask.nii.gz&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;DiB_70_lte_pte_ste.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bval_DiB_70_lte_pte_ste.bval&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvec_DiB_70_lte_pte_ste.bvec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiB_mask.nii.gz&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download QTE data with linear, planar, &quot;</span>
    <span class="o">+</span> <span class="s2">&quot;and spherical tensor encoding. If using this data please cite &quot;</span>
    <span class="o">+</span> <span class="s2">&quot;F Szczepankiewicz, S Hoge, C-F Westin. Linear, planar and &quot;</span>
    <span class="o">+</span> <span class="s2">&quot;spherical tensor-valued diffusion MRI data by free waveform &quot;</span>
    <span class="o">+</span> <span class="s2">&quot;encoding in healthy brain, water, oil and liquid crystals. &quot;</span>
    <span class="o">+</span> <span class="s2">&quot;Data in Brief (2019),&quot;</span>
    <span class="o">+</span> <span class="s2">&quot;DOI: https://doi.org/10.1016/j.dib.2019.104208&quot;</span><span class="p">,</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;11f2e0d53e19061654eb3cdfc8fe9827&quot;</span><span class="p">,</span>
        <span class="s2">&quot;15021885b4967437c8cf441c09045c25&quot;</span><span class="p">,</span>
        <span class="s2">&quot;1e6b867182da249f81aa9abd50e8b9f7&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2ea48d80b6ae1c3da50cb44e615b09e5&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;51.1 MB&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fetch_DiB_217_lte_pte_ste</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_DiB_217_lte_pte_ste&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;DiB_217_lte_pte_ste&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://github.com/filip-szczepankiewicz/Szczepankiewicz_DIB_2019/&quot;</span>
    <span class="s2">&quot;raw/master/DATA/brain/NII_Boito_SubSamples/&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;DiB_217_lte_pte_ste/DiB_217_lte_pte_ste_1.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiB_217_lte_pte_ste/DiB_217_lte_pte_ste_2.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiB_217_lte_pte_ste/bval_DiB_217_lte_pte_ste.bval&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiB_217_lte_pte_ste/bvec_DiB_217_lte_pte_ste.bvec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiB_mask.nii.gz&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;DiB_217_lte_pte_ste_1.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiB_217_lte_pte_ste_2.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bval_DiB_217_lte_pte_ste.bval&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvec_DiB_217_lte_pte_ste.bvec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiB_mask.nii.gz&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download QTE data with linear, planar, &quot;</span>
    <span class="o">+</span> <span class="s2">&quot;and spherical tensor encoding. If using this data please cite &quot;</span>
    <span class="o">+</span> <span class="s2">&quot;F Szczepankiewicz, S Hoge, C-F Westin. Linear, planar and &quot;</span>
    <span class="o">+</span> <span class="s2">&quot;spherical tensor-valued diffusion MRI data by free waveform &quot;</span>
    <span class="o">+</span> <span class="s2">&quot;encoding in healthy brain, water, oil and liquid crystals. &quot;</span>
    <span class="o">+</span> <span class="s2">&quot;Data in Brief (2019),&quot;</span>
    <span class="o">+</span> <span class="s2">&quot;DOI: https://doi.org/10.1016/j.dib.2019.104208&quot;</span><span class="p">,</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;424e9cf75b20bc1f7ae1acde26b26da0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;8e70d14fb8f08065a7a0c4d3033179c6&quot;</span><span class="p">,</span>
        <span class="s2">&quot;1f657215a475676ce333299038df3a39&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4220ca92f2906c97ed4c7287eb62c6f0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2ea48d80b6ae1c3da50cb44e615b09e5&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;166.3 MB&quot;</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">fetch_ptt_minimal_dataset</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_ptt_minimal_dataset&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;ptt_dataset&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://raw.githubusercontent.com/dipy/dipy_datatest/main/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;ptt_fod.nii&quot;</span><span class="p">,</span> <span class="s2">&quot;ptt_seed_coords.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;ptt_seed_image.nii&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;ptt_fod.nii&quot;</span><span class="p">,</span> <span class="s2">&quot;ptt_seed_coords.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;ptt_seed_image.nii&quot;</span><span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;6e454f8088b64e7b85218c71010d8dbe&quot;</span><span class="p">,</span>
        <span class="s2">&quot;8c2d71fb95020e2bb1743623eb11c2a6&quot;</span><span class="p">,</span>
        <span class="s2">&quot;9cb88f88d664019ba80c0b372c8bafec&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download FOD and seeds for PTT testing and examples&quot;</span><span class="p">,</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;203KB&quot;</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">fetch_bundle_warp_dataset</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_bundle_warp_dataset&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;bundle_warp&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://ndownloader.figshare.com/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;40026343&quot;</span><span class="p">,</span> <span class="s2">&quot;40026346&quot;</span><span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;m_UF_L.trk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;s_UF_L.trk&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;4db38ca1e80c16d6e3a97f88f0611187&quot;</span><span class="p">,</span> <span class="s2">&quot;c1499005baccfab865ce38368d7a4c7f&quot;</span><span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Download Bundle Warp dataset&quot;</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">fetch_disco1_dataset</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_disco1_dataset&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;disco&quot;</span><span class="p">,</span> <span class="s2">&quot;disco_1&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://data.mendeley.com/public-files/datasets/fgf86jdfg6/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;028147aa-f17f-4514-80e6-24c7419da75e/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e714ff30-be78-4284-b282-84ed011885de/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;a45ac785-4977-434b-b05e-c97ed4a1e6c7/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c3d1de3e-6dcf-4142-99bf-4dd42d445a0a/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;35f025f6-d4ab-45e6-9f58-e7685862117f/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;02ad744f-4910-40a2-870b-5507d6195926/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c030a2dc-6b80-43d7-a63c-87a28c77c73b/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c6a54096-d7ea-4d05-a921-6aeb0c1bc625/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d95bfd9a-8886-48ec-acc5-5526f3bca32c/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;8ef464f7-e648-4583-a208-3ee87a08a2a1/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cbaa3708-7f39-46ec-8cea-51285956bf5a/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;964040aa-e1f0-48f7-8eb7-87553f4190e5/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e8bea304-35ce-45de-95be-c51e2ed917f6/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ec5da4f1-53bd-4103-8722-ea3211223150/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c1ddba00-9ea1-435a-946a-bca43079eadf/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;0aa2d1a0-ae07-4eff-af6a-22183249e9fa/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;744d468f-bd0e-44a8-8395-893889c16462/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;311afc50-9bf5-469a-a298-091d252940c9/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;68f37ddf-8f06-4d3e-80c5-842b495516ba/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d272c9aa-85d9-40d1-9a87-1044d361da0c/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;0ba92dbc-4489-4626-8bfd-5d56b7557699/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;099c3f98-4574-4315-be5e-a2b183695e71/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;231bbeac-bdec-4815-9238-9a2370bdca6b/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cd073c2f-c3b0-4a46-9c3d-63a853a8af49/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;470f235c-04f5-4544-bf4b-f11ac0d8fbd2/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;276b637b-6244-4927-b1af-8c1ca12b8a0c/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;1c524b3f-ca6b-4f6f-9e6f-25431496000a/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;24f8fe7c-8ab2-40c8-baec-4d1f29eba4f2/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5cc5fb58-6058-40dd-9969-019f7814a4a1/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;aabcc286-b607-46e1-9229-80638630d518/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;87b6cee7-0645-4405-b5b3-af89c04a2ac9/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ad47bf18-8b69-4b0c-8706-ada53365fd99/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;417505fb-3a7a-4cbc-ac8a-92acc26bb958/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;7708e776-f07c-47a9-9982-b5fbd9dd4390/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;654863c6-6154-4da6-9f4c-3b0c76535dd7/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5f8d028c-82a1-4837-b34f-ad8251c0685b/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bd2fa6f3-f050-44a6-ad18-6c31bb037eb7/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;b432035b-5429-4255-8e21-88184802d005/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;1f1a4391-9740-4e17-89c3-79430aab0f91/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;6c90c685-ae16-4f21-ae13-71e89ca9eb66/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f8878550-061b-40e0-a0c7-5aac5a33e542/file_downloaded&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;DiSCo_gradients.bvals&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo_gradients_dipy.bvecs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo_gradients_fsl.bvecs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo_gradients_mrtrix.b&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo_gradients.scheme&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_DWI_RicianNoise-snr40.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_ROIs.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_mask.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_DWI_RicianNoise-snr50.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_ROIs-mask.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_DWI_Intra.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_Strand_Bundle_Count.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_Strand_Count.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_Strand_Intra_Volume_Fraction.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_DWI_RicianNoise-snr30.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_DWI_RicianNoise-snr20.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_DWI.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_Strand_ODFs.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_Strand_Average_Diameter.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo1_DWI_RicianNoise-snr10.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_Strand_ODFs.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_DWI_RicianNoise-snr50.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_DWI.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_ROIs.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_DWI_RicianNoise-snr40.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_mask.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_Strand_Bundle_Count.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_DWI_RicianNoise-snr20.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_DWI_RicianNoise-snr30.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_Strand_Average_Diameter.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_Strand_Streamline_Count.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_DWI_Intra.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_DWI_RicianNoise-snr10.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_Strand_Intra_Volume_Fraction.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo1_ROIs-mask.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo1_Connectivity_Matrix_Strands_Count.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo1_Connectivity_Matrix_Cross-Sectional_Area.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo1_Strands_ROIs_Pairs.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo1_Strands_Diameters.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo1_Strands_Trajectories.tck&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo1_Strands_Trajectories.trk&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;c03cfec8ee605a54866ef09c3c8ba31d&quot;</span><span class="p">,</span>
        <span class="s2">&quot;b8443aee0a2d2b60ee658a2342cccf0f&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4ac749bb584e6963851ee170e137e3ec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;207d57a6c16cdf230b45d4df5b4e1dee&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2346de6ad563a10e40b8ebec3ac4e0ff&quot;</span><span class="p">,</span>
        <span class="s2">&quot;1981ac168ea76ce4d70e3dcd1d749f13&quot;</span><span class="p">,</span>
        <span class="s2">&quot;9a06a057df5b2ce5cb05e8c9f59be14f&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ac9900538f4563c39032dcc289c36a51&quot;</span><span class="p">,</span>
        <span class="s2">&quot;beb0f999bc26cd32ba2079db77e7840a&quot;</span><span class="p">,</span>
        <span class="s2">&quot;8d5659e78d7d028e3da8f5af89402669&quot;</span><span class="p">,</span>
        <span class="s2">&quot;db335f7d52b85c1d0de7ca61a2fca64b&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f1c49868436e0beca3b7cc50416c664e&quot;</span><span class="p">,</span>
        <span class="s2">&quot;b967371fe44c4d736edcd65b8da12b93&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d4da2df8cd7cbf24cdd0af09247ff0a2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;80316e4e687ee3c2e2a9221929d1e826&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4c3580f512b325552302792a64da87f0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;56ee11c59348f3a61079483bd249032d&quot;</span><span class="p">,</span>
        <span class="s2">&quot;580d72144a5e19a119e6839d8f1c623d&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f7bdfea9c3163cac7d4f67f49928b682&quot;</span><span class="p">,</span>
        <span class="s2">&quot;7cf61f1088971a8799df80c29dc7a9f1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;da762d46e6b7d513be0411ac66769c5c&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5d7bac8737a4543eee60f7aa26073df9&quot;</span><span class="p">,</span>
        <span class="s2">&quot;370bdf6571aa061daaa654a107eae6fd&quot;</span><span class="p">,</span>
        <span class="s2">&quot;50fd6e201536b4a4815dd102d9c80974&quot;</span><span class="p">,</span>
        <span class="s2">&quot;8269aed23fc643bb98c36945462e866a&quot;</span><span class="p">,</span>
        <span class="s2">&quot;86becb33b54a3c4291f0cd77ec87bb3e&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d240cccd9d84e69bf146a5d06bb898bb&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e75a1838ff8e5860bdbde1162e5aa80f&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f7d9507884960f86918f6328962d98d2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;be4f8221ccdd5a139f16ac18353d12c6&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d8d33dbdc820289f5575b5c064c6dfe9&quot;</span><span class="p">,</span>
        <span class="s2">&quot;53740e3d2851d5f301d93730268928f2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ed98e0f26abc85af5735fe228cb86b4c&quot;</span><span class="p">,</span>
        <span class="s2">&quot;50a9385f567138c23df4ddf333c785c0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2d845131db87b6a2230a325e076bdd7f&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c53f6e42cfd796a561b1af434a61c91d&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f97730469c53deaa5b827effebef3e78&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d34fd49147cd061b9417328118567d1c&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f0d28f1d7eec1fad866607ee59686476&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e475641a08ebafeecb79a21e618d7081&quot;</span><span class="p">,</span>
        <span class="s2">&quot;8c2a338606c0cb7de6e34b8317f59cd6&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="p">(</span>
        <span class="s2">&quot;Download DISCO 1 dataset: The Diffusion-Simulated Connectivity &quot;</span>
        <span class="s2">&quot;Dataset. DOI: 10.17632/fgf86jdfg6.3&quot;</span>
    <span class="p">),</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;1.05 GB&quot;</span><span class="p">,</span>
    <span class="n">use_headers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">fetch_disco2_dataset</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_disco2_dataset&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;disco&quot;</span><span class="p">,</span> <span class="s2">&quot;disco_2&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://data.mendeley.com/public-files/datasets/fgf86jdfg6/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;028147aa-f17f-4514-80e6-24c7419da75e/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e714ff30-be78-4284-b282-84ed011885de/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;a45ac785-4977-434b-b05e-c97ed4a1e6c7/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c3d1de3e-6dcf-4142-99bf-4dd42d445a0a/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;35f025f6-d4ab-45e6-9f58-e7685862117f/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e7a50803-a58d-47dc-b026-6a6e20602546/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;12158d68-0050-4528-88db-5fb606b2151d/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;361df9ec-0542-4e05-8f2d-1c605a5a915a/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2bcf46ae-0b07-4dd0-baf8-654a05a4aca7/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;6a514a78-8a8a-4cdf-947a-d1b01ced4b0d/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;a387810f-54fe-4493-8842-f3fbeea687fe/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2401238c-ae37-4a99-81a8-50ba90110650/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;980a6702-c192-4a4e-b706-f3ec2fb5e800/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c5691dae-5b10-4c67-8a58-2df8314c85ec/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d4eabb32-8b28-461c-8248-a0bacf4e44f2/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dd98fb48-c48f-4d72-85a9-38a2d8b2bb3f/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fed31d0d-7c75-4073-82e5-2c9ba30daa5a/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;012853cb-0d7f-4135-8407-a99c4e022024/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;46d0466f-75bd-4646-af10-5215477339d8/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d1adcbdd-1d11-43cd-a72a-6830e91b7c33/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f3e9d4a5-dc9d-4112-8a67-b63b40c87e5c/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;825d2154-e892-474d-ae31-e490467dfa3c/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bf62b3fd-fff7-4658-b143-9ec948fc256f/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;173dacc8-683c-42c0-b270-67f59c77d49d/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f981cbad-84c9-42bb-bf19-978f12e6c972/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d122bf02-98f7-46b2-9286-98473216d64e/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;50b68dd1-1037-4cb4-8d1a-025cff38da55/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5f3e04b6-9bd5-4010-bc2f-ea16b7ac8b1c/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f8d7ac40-7d0e-41ba-9788-4f973be5968b/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d4adf4a7-1646-4530-85cb-66c2779e1cb6/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;6b1f740e-2b20-440f-9bec-344540d80d1d/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;7ea07af5-5cb8-4857-bf30-17a0d4f39f83/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;7ad1c5ab-9606-481c-a08e-0770798b224f/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;8d8c8fe9-7747-4ba2-b759-f27cf160b88f/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;143de683-9bce-43b9-b08e-2e16fea05a53/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f3f5f798-0d01-41de-ad96-6a2e2d04eeb1/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;0dc1a52f-7770-4492-8dc7-27da1f9d2ec9/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bba6f22f-1212-49c2-b07f-3b62ae435b4d/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5928d70c-01f3-47ab-8f29-0484f9a014a2/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;6be306cb-1dfd-4fe8-912d-ec117ff0d70d/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e49d38af-e262-46ef-ad44-c51c29ee2178/file_downloaded&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;DiSCo_gradients.bvals&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo_gradients_dipy.bvecs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo_gradients_fsl.bvecs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo_gradients_mrtrix.b&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo_gradients.scheme&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_DWI_RicianNoise-snr50.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_Strand_Average_Diameter.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_DWI_RicianNoise-snr40.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_DWI.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_ROIs.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_mask.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_DWI_Intra.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_ROIs-mask.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_Strand_Count.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_DWI_RicianNoise-snr20.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_DWI_RicianNoise-snr30.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_Strand_Intra_Volume_Fraction.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_DWI_RicianNoise-snr10.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_Strand_ODFs.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo2_Strand_Bundle_Count.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_DWI_RicianNoise-snr40.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_DWI_RicianNoise-snr50.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_ROIs-mask.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_Strand_ODFs.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_Strand_Count.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_ROIs.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_mask.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_Strand_Average_Diameter.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_DWI_RicianNoise-snr30.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_DWI_Intra.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_DWI_RicianNoise-snr20.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_DWI.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_Strand_Bundle_Count.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_DWI_RicianNoise-snr10.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo2_Strand_Intra_Volume_Fraction.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo2_Strands_Diameters.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo2_Connectivity_Matrix_Strands_Count.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo2_Strands_Trajectories.trk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo2_Strands_ROIs_Pairs.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo2_Strands_Trajectories.tck&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo2_Connectivity_Matrix_Cross-Sectional_Area.txt&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;c03cfec8ee605a54866ef09c3c8ba31d&quot;</span><span class="p">,</span>
        <span class="s2">&quot;b8443aee0a2d2b60ee658a2342cccf0f&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4ac749bb584e6963851ee170e137e3ec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;207d57a6c16cdf230b45d4df5b4e1dee&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2346de6ad563a10e40b8ebec3ac4e0ff&quot;</span><span class="p">,</span>
        <span class="s2">&quot;425a97bce000265d9e4868fcb54a6bd7&quot;</span><span class="p">,</span>
        <span class="s2">&quot;7cb8fd4ae58973235903adfcf338cb87&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bb5ba3ba1163f4335dae76f905e181d0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;350fb02f7ceeaf95c5cd13a4721cef5f&quot;</span><span class="p">,</span>
        <span class="s2">&quot;a8476809cca854668ae4dd3bfd1366ec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e55bca1aef80039eafdadec4b8c3ff21&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5d9b46a5130a7734a2a0544ed1f5cc72&quot;</span><span class="p">,</span>
        <span class="s2">&quot;90869179977e2b78bd0a8c4f016ee7e3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c6207b65665f5b82a5413e65627156b3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;1f7e32d2780bbc1a2b5f7b592c9fd53b&quot;</span><span class="p">,</span>
        <span class="s2">&quot;36de56a359a67ec68c15cc484d79e1da&quot;</span><span class="p">,</span>
        <span class="s2">&quot;6ddfa6a7e5083cb71f3ae4d23711a6a8&quot;</span><span class="p">,</span>
        <span class="s2">&quot;21f0cf235c8c1705e7bd9ebd9a39479a&quot;</span><span class="p">,</span>
        <span class="s2">&quot;660f549e8180f17ea69de82661b427e9&quot;</span><span class="p">,</span>
        <span class="s2">&quot;19c037c7813c7574b809baedd9bb64fd&quot;</span><span class="p">,</span>
        <span class="s2">&quot;77a1f4111eefc01b26d7ec8b6473894d&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cde18c2581ced8755958a153332c375a&quot;</span><span class="p">,</span>
        <span class="s2">&quot;88b12d4c24bd833430b3125340c96801&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4d70e9b246101f5f2ba8a44d92beb2e8&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c01bb0a1d2bdb95565b92eb022ff2124&quot;</span><span class="p">,</span>
        <span class="s2">&quot;31f664676e94280c5ebdf04b544d200f&quot;</span><span class="p">,</span>
        <span class="s2">&quot;41a3155f6fb44da50c515bb867006ab1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;9494f6a6f5c4e44b88051f0284757517&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5d9f8bd4a540891082f2dda976f70478&quot;</span><span class="p">,</span>
        <span class="s2">&quot;8e2e5900008ae6923fe56447d7b493c7&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e961d27613acc250b6407d29d5020154&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ef330fa395d4e48d0286652927116275&quot;</span><span class="p">,</span>
        <span class="s2">&quot;00c620b144253ef114fee1fe8e95a87f&quot;</span><span class="p">,</span>
        <span class="s2">&quot;7e4cf83496996aefd9f27c6077c71d74&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e6be6c73425337e331fda4e4bdcbe749&quot;</span><span class="p">,</span>
        <span class="s2">&quot;0b6c1770d48f39f704986ba69970541e&quot;</span><span class="p">,</span>
        <span class="s2">&quot;69da5bb232b41dbeeea9d409ca94955f&quot;</span><span class="p">,</span>
        <span class="s2">&quot;0b43ffcc46217da86a472a7b1e02ac06&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4e774e280cc57b1336e4fa9e479ee4ee&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cc5442ea2ff2ddfcd1330016e2a68399&quot;</span><span class="p">,</span>
        <span class="s2">&quot;7f276c0276561df13c86008776faf6b2&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="p">(</span>
        <span class="s2">&quot;Download DISCO 2 dataset: The Diffusion-Simulated Connectivity &quot;</span>
        <span class="s2">&quot;Dataset. DOI: 10.17632/fgf86jdfg6.3&quot;</span>
    <span class="p">),</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;1.05 GB&quot;</span><span class="p">,</span>
    <span class="n">use_headers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">fetch_disco3_dataset</span> <span class="o">=</span> <span class="n">_make_fetcher</span><span class="p">(</span>
    <span class="s2">&quot;fetch_disco3_dataset&quot;</span><span class="p">,</span>
    <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;disco&quot;</span><span class="p">,</span> <span class="s2">&quot;disco_3&quot;</span><span class="p">),</span>
    <span class="s2">&quot;https://data.mendeley.com/public-files/datasets/fgf86jdfg6/files/&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;028147aa-f17f-4514-80e6-24c7419da75e/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e714ff30-be78-4284-b282-84ed011885de/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;a45ac785-4977-434b-b05e-c97ed4a1e6c7/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c3d1de3e-6dcf-4142-99bf-4dd42d445a0a/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;35f025f6-d4ab-45e6-9f58-e7685862117f/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;3cc65986-2e64-4397-a34d-386dfe286a89/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ac384df6-8e9a-4c44-89db-624f89c12015/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;7feb06e6-0bdc-4fba-b7df-c67c3cb43301/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c8bddc43-f1f2-404c-98d4-9ab34380fc8f/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;00bdcd82-dde0-499d-9bef-581755ad7e57/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;8abbc092-9368-4154-9e20-b28e3b6d03b4/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e0773f2f-7fbe-4139-8e71-2d3267360ab5/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;8670b9c4-9275-4da6-adbf-398889a606d7/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ec2306f2-7d60-452a-82d8-66962ffb903d/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;00cf30d9-14fa-484b-b6e1-3d484e43a840/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;b61b83aa-522b-4239-9a7b-74c80aea3c07/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;75176143-5ddf-4dfa-b2cd-b87da0abfc7b/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d5fe5abf-b72e-474a-9316-714e0739feec/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;45a139fc-2d99-4832-8d95-7a7df2acf711/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;68f30089-1bf9-45d9-82d8-d77855823229/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4162d753-0d7c-4492-aa4f-88554ee64fed/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;5ca6e137-2e65-41cd-bb4b-e1d21dcb5a28/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;8e88dccf-d7b3-4692-ab0f-26810ba168e0/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fd97249f-ab0b-4ffa-a3ba-c3d0b3b1c947/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;73636f0f-7fc6-48c9-a140-7a11df9847f2/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;186a2116-21a8-42fc-b6d1-f303b0ba0b69/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e087b436-d1be-4c8d-8c56-3de9ef7fb054/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;305ae78b-725c-4bb1-b435-1bca70c18b6b/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2e62eb11-660b-4f09-920d-f5ee1e25b02a/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;a35e33f5-f23a-48de-9c03-1560ce5fecbe/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f1737350-0b46-468e-b78a-af9731eac720/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;86ba2b2c-2094-43ef-be3e-e286dca5c5bd/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c5a4a685-c3d6-4ef2-9ec9-956fce821c9b/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d84ec650-8c05-41a6-a4ef-a4e3a2f66dd3/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;7648b6ce-2bc8-4753-8e8c-399978d4e187/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;1b702c78-cbae-4ceb-a5f6-89c5cb0f4f88/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;835af619-7447-4247-8e5b-2e2895480add/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;99752985-840e-4ed2-b068-68f6be7af48f/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c07c7b51-1eab-4852-8b36-bd9901f15d7a/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;af6f3bc0-a09a-461a-8e6b-6095d83110ea/file_downloaded&quot;</span><span class="p">,</span>
        <span class="s2">&quot;482bcf8f-52eb-4bf8-83b4-765ed935ad81/file_downloaded&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s2">&quot;DiSCo_gradients.bvals&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo_gradients_dipy.bvecs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo_gradients_fsl.bvecs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo_gradients_mrtrix.b&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo_gradients.scheme&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_Strand_ODFs.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_DWI_RicianNoise-snr10.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_Strand_Intra_Volume_Fraction.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_DWI_RicianNoise-snr30.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_DWI_RicianNoise-snr20.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_Strand_Average_Diameter.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_DWI_Intra.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_Strand_Count.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_DWI.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_Strand_Bundle_Count.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_ROIs-mask.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_DWI_RicianNoise-snr40.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_mask.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_DWI_RicianNoise-snr50.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lowRes_DiSCo3_ROIs.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_DWI_RicianNoise-snr10.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_Strand_Average_Diameter.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_Strand_Count.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_DWI_RicianNoise-snr20.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_DWI.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_DWI_RicianNoise-snr30.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_ROIs-mask.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_Strand_Intra_Volume_Fraction.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_Strand_Bundle_Count.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_DWI_Intra.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_DWI_RicianNoise-snr50.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_Strand_ODFs.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_mask.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_ROIs.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;highRes_DiSCo3_DWI_RicianNoise-snr40.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo3_Connectivity_Matrix_Cross-Sectional_Area.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo3_Strands_Trajectories.tck&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo3_Strands_Trajectories.trk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo3_Strands_ROIs_Pairs.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo3_Connectivity_Matrix_Strands_Count.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DiSCo3_Strands_Diameters.txt&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">md5_list</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;c03cfec8ee605a54866ef09c3c8ba31d&quot;</span><span class="p">,</span>
        <span class="s2">&quot;b8443aee0a2d2b60ee658a2342cccf0f&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4ac749bb584e6963851ee170e137e3ec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;207d57a6c16cdf230b45d4df5b4e1dee&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2346de6ad563a10e40b8ebec3ac4e0ff&quot;</span><span class="p">,</span>
        <span class="s2">&quot;acad92cebd780424280b5e38a5b41445&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c5ce15ea50d02621d2a3f27cde7cd208&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c827954b40279462b520edfb8cd2ced0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f4e8fca1a434436ffe8fc4392d2e635b&quot;</span><span class="p">,</span>
        <span class="s2">&quot;62606109e8a96f41208b45bffbe94aae&quot;</span><span class="p">,</span>
        <span class="s2">&quot;a03bc8afe4d0348841c9fed5f03695b4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;85f60f649c6f3d4e6ae6bcf88053058d&quot;</span><span class="p">,</span>
        <span class="s2">&quot;7fdec9c4f4fb740f595191a4d0202de7&quot;</span><span class="p">,</span>
        <span class="s2">&quot;df04eb8f1ce0138f3c7f20488f4dbc00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;0bde3cefd74e4c3b4d28ec0d90bcadc9&quot;</span><span class="p">,</span>
        <span class="s2">&quot;aa7bfbfc9ff454e7a466a01229b1377b&quot;</span><span class="p">,</span>
        <span class="s2">&quot;218561e3ebbee2f08d4f3040ec2f12a9&quot;</span><span class="p">,</span>
        <span class="s2">&quot;577ae9e407bb225dae48482a7f88bafb&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e85e6edf80bd07030f5a6c1769c84546&quot;</span><span class="p">,</span>
        <span class="s2">&quot;49ed07d5fc60ee17a4a4019d7bea7d97&quot;</span><span class="p">,</span>
        <span class="s2">&quot;aa86d752bec702172a54c1e8efe51d78&quot;</span><span class="p">,</span>
        <span class="s2">&quot;df0dde6428f5c5146b5ce8f353865bca&quot;</span><span class="p">,</span>
        <span class="s2">&quot;0f0b68b956415bbe06766e497ee77388&quot;</span><span class="p">,</span>
        <span class="s2">&quot;44adc18b39d03b8d83f48cc572aaab78&quot;</span><span class="p">,</span>
        <span class="s2">&quot;0460e6420739ae31b7076f5e1be5a1f1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;80c07379496d0f2aab66d8041a9c53b1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;0e3763e51612b56fa8dc933efc8d1971&quot;</span><span class="p">,</span>
        <span class="s2">&quot;676f88a792d9034015a9613001c9bf02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;6f399bee3158613c74c1330cee5d9b0d&quot;</span><span class="p">,</span>
        <span class="s2">&quot;534e64906cc2bf58ff4cf98ecd301dd5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;7d0f7513c85d766c45581f9fa8ab34a5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;01b4fe6c6e6459eac293a62428680e3b&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2bb5a0b24139f5448cdd51167ce33906&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bf6c5a26cb1061be91bec7fa73153cec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;e8911b580e7fc7e2d94d238f2c81c43b&quot;</span><span class="p">,</span>
        <span class="s2">&quot;647714842c8dea4d192bdd7c2b41fd3b&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bba1e4283ed853eb484497db4b6da460&quot;</span><span class="p">,</span>
        <span class="s2">&quot;d761384f8fed31c53197ce4916f32296&quot;</span><span class="p">,</span>
        <span class="s2">&quot;3b119c1b8487da71412f3275616003dc&quot;</span><span class="p">,</span>
        <span class="s2">&quot;47c300fcb48b882c124d69086b224956&quot;</span><span class="p">,</span>
        <span class="s2">&quot;9e47185ae517f6f35daa1aa16c51ba45&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">doc</span><span class="o">=</span><span class="p">(</span>
        <span class="s2">&quot;Download DISCO 3 dataset: The Diffusion-Simulated Connectivity &quot;</span>
        <span class="s2">&quot;Dataset. DOI: 10.17632/fgf86jdfg6.3&quot;</span>
    <span class="p">),</span>
    <span class="n">data_size</span><span class="o">=</span><span class="s2">&quot;1.05 GB&quot;</span><span class="p">,</span>
    <span class="n">use_headers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>


<div class="viewcode-block" id="fetch_disco_dataset">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.fetch_disco_dataset">[docs]</a>
<span class="k">def</span> <span class="nf">fetch_disco_dataset</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Download All DISCO datasets.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    see DOI: 10.17632/fgf86jdfg6.3</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">files_1</span><span class="p">,</span> <span class="n">folder_1</span> <span class="o">=</span> <span class="n">fetch_disco1_dataset</span><span class="p">()</span>
    <span class="n">files_2</span><span class="p">,</span> <span class="n">folder_2</span> <span class="o">=</span> <span class="n">fetch_disco2_dataset</span><span class="p">()</span>
    <span class="n">files_3</span><span class="p">,</span> <span class="n">folder_3</span> <span class="o">=</span> <span class="n">fetch_disco3_dataset</span><span class="p">()</span>

    <span class="n">all_path</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="n">folder_1</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files_1</span><span class="p">]</span>
        <span class="o">+</span> <span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="n">folder_2</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files_2</span><span class="p">]</span>
        <span class="o">+</span> <span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="n">folder_3</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files_3</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">all_path</span></div>



<div class="viewcode-block" id="get_fnames">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.get_fnames">[docs]</a>
<span class="nd">@warning_for_keywords</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">get_fnames</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;small_64D&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Provide full paths to example or test datasets.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name : str</span>
<span class="sd">        the filename/s of which dataset to return, one of:</span>

<span class="sd">        - &#39;small_64D&#39; small region of interest nifti,bvecs,bvals 64 directions</span>
<span class="sd">        - &#39;small_101D&#39; small region of interest nifti, bvecs, bvals</span>
<span class="sd">          101 directions</span>
<span class="sd">        - &#39;aniso_vox&#39; volume with anisotropic voxel size as Nifti</span>
<span class="sd">        - &#39;fornix&#39; 300 tracks in Trackvis format (from Pittsburgh</span>
<span class="sd">          Brain Competition)</span>
<span class="sd">        - &#39;gqi_vectors&#39; the scanner wave vectors needed for a GQI acquisitions</span>
<span class="sd">          of 101 directions tested on Siemens 3T Trio</span>
<span class="sd">        - &#39;small_25&#39; small ROI (10x8x2) DTI data (b value 2000, 25 directions)</span>
<span class="sd">        - &#39;test_piesno&#39; slice of N=8, K=14 diffusion data</span>
<span class="sd">        - &#39;reg_c&#39; small 2D image used for validating registration</span>
<span class="sd">        - &#39;reg_o&#39; small 2D image used for validation registration</span>
<span class="sd">        - &#39;cb_2&#39; two vectorized cingulum bundles</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    fnames : tuple</span>
<span class="sd">        filenames for dataset</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; from dipy.io.image import load_nifti</span>
<span class="sd">    &gt;&gt;&gt; from dipy.data import get_fnames</span>
<span class="sd">    &gt;&gt;&gt; fimg, fbvals, fbvecs = get_fnames(name=&#39;small_101D&#39;)</span>
<span class="sd">    &gt;&gt;&gt; bvals=np.loadtxt(fbvals)</span>
<span class="sd">    &gt;&gt;&gt; bvecs=np.loadtxt(fbvecs).T</span>
<span class="sd">    &gt;&gt;&gt; data, affine = load_nifti(fimg)</span>
<span class="sd">    &gt;&gt;&gt; data.shape == (6, 10, 10, 102)</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; bvals.shape == (102,)</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; bvecs.shape == (102, 3)</span>
<span class="sd">    True</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">DATA_DIR</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">&quot;files&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;small_64D&quot;</span><span class="p">:</span>
        <span class="n">fbvals</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;small_64D.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvecs</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;small_64D.bvec&quot;</span><span class="p">)</span>
        <span class="n">fimg</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;small_64D.nii&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fimg</span><span class="p">,</span> <span class="n">fbvals</span><span class="p">,</span> <span class="n">fbvecs</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;55dir_grad&quot;</span><span class="p">:</span>
        <span class="n">fbvals</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;55dir_grad.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvecs</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;55dir_grad.bvec&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fbvals</span><span class="p">,</span> <span class="n">fbvecs</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;small_101D&quot;</span><span class="p">:</span>
        <span class="n">fbvals</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;small_101D.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvecs</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;small_101D.bvec&quot;</span><span class="p">)</span>
        <span class="n">fimg</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;small_101D.nii.gz&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fimg</span><span class="p">,</span> <span class="n">fbvals</span><span class="p">,</span> <span class="n">fbvecs</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;aniso_vox&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;aniso_vox.nii.gz&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;ascm_test&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;ascm_out_test.nii.gz&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;fornix&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;tracks300.trk&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;gqi_vectors&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;ScannerVectors_GQI101.txt&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;dsi515btable&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;dsi515_b_table.txt&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;dsi4169btable&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;dsi4169_b_table.txt&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;grad514&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;grad_514.txt&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;small_25&quot;</span><span class="p">:</span>
        <span class="n">fbvals</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;small_25.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvecs</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;small_25.bvec&quot;</span><span class="p">)</span>
        <span class="n">fimg</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;small_25.nii.gz&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fimg</span><span class="p">,</span> <span class="n">fbvals</span><span class="p">,</span> <span class="n">fbvecs</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;small_25_streamlines&quot;</span><span class="p">:</span>
        <span class="n">fstreamlines</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;EuDX_small_25.trk&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fstreamlines</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;S0_10&quot;</span><span class="p">:</span>
        <span class="n">fimg</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;S0_10slices.nii.gz&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fimg</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;test_piesno&quot;</span><span class="p">:</span>
        <span class="n">fimg</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;test_piesno.nii.gz&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fimg</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;reg_c&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;C.npy&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;reg_o&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;circle.npy&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;cb_2&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;cb_2.npz&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;minimal_bundles&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;minimal_bundles.zip&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;t1_coronal_slice&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="s2">&quot;t1_coronal_slice.npy&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;t-design&quot;</span><span class="p">:</span>
        <span class="n">N</span> <span class="o">=</span> <span class="mi">45</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">DATA_DIR</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;tdesign</span><span class="si">{</span><span class="n">N</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;scil_b0&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_scil_b0</span><span class="p">()</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">files</span><span class="p">[</span><span class="s2">&quot;datasets_multi-site_all_companies.zip&quot;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="n">op</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">f</span><span class="p">)]</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;stanford_hardi&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_stanford_hardi</span><span class="p">()</span>
        <span class="n">fraw</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;HARDI150.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">fbval</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;HARDI150.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvec</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;HARDI150.bvec&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fraw</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;taiwan_ntu_dsi&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_taiwan_ntu_dsi</span><span class="p">()</span>
        <span class="n">fraw</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;DSI203.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">fbval</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;DSI203.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvec</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;DSI203.bvec&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fraw</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;sherbrooke_3shell&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_sherbrooke_3shell</span><span class="p">()</span>
        <span class="n">fraw</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;HARDI193.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">fbval</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;HARDI193.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvec</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;HARDI193.bvec&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fraw</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;isbi2013_2shell&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_isbi2013_2shell</span><span class="p">()</span>
        <span class="n">fraw</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;phantom64.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">fbval</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;phantom64.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvec</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;phantom64.bvec&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fraw</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;stanford_labels&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_stanford_labels</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;aparc-reduced.nii.gz&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;syn_data&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_syn_data</span><span class="p">()</span>
        <span class="n">t1_name</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;t1.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">b0_name</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;b0.nii.gz&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">t1_name</span><span class="p">,</span> <span class="n">b0_name</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;stanford_t1&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_stanford_t1</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;t1.nii.gz&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;stanford_pve_maps&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_stanford_pve_maps</span><span class="p">()</span>
        <span class="n">f_pve_csf</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;pve_csf.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">f_pve_gm</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;pve_gm.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">f_pve_wm</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;pve_wm.nii.gz&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">f_pve_csf</span><span class="p">,</span> <span class="n">f_pve_gm</span><span class="p">,</span> <span class="n">f_pve_wm</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;ivim&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_ivim</span><span class="p">()</span>
        <span class="n">fraw</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;ivim.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">fbval</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;ivim.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvec</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;ivim.bvec&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fraw</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;tissue_data&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_tissue_data</span><span class="p">()</span>
        <span class="n">t1_name</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;t1_brain.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">t1d_name</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;t1_brain_denoised.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">ap_name</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;power_map.nii.gz&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">t1_name</span><span class="p">,</span> <span class="n">t1d_name</span><span class="p">,</span> <span class="n">ap_name</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;cfin_multib&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_cfin_multib</span><span class="p">()</span>
        <span class="n">t1_name</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;T1.nii&quot;</span><span class="p">)</span>
        <span class="n">fraw</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;__DTI_AX_ep2d_2_5_iso_33d_20141015095334_4.nii&quot;</span><span class="p">)</span>
        <span class="n">fbval</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;__DTI_AX_ep2d_2_5_iso_33d_20141015095334_4.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvec</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;__DTI_AX_ep2d_2_5_iso_33d_20141015095334_4.bvec&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fraw</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">,</span> <span class="n">t1_name</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;target_tractrogram_hcp&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_target_tractogram_hcp</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">pjoin</span><span class="p">(</span>
            <span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;target_tractogram_hcp&quot;</span><span class="p">,</span> <span class="s2">&quot;hcp_tractogram&quot;</span><span class="p">,</span> <span class="s2">&quot;streamlines.trk&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;bundle_atlas_hcp842&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_bundle_atlas_hcp842</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">get_bundle_atlas_hcp842</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;30_bundle_atlas_hcp842&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_30_bundle_atlas_hcp842</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">get_bundle_atlas_hcp842</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;qte_lte_pte&quot;</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_qte_lte_pte</span><span class="p">()</span>
        <span class="n">fdata</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;lte-pte.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">fbval</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;lte-pte.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvec</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;lte-pte.bvec&quot;</span><span class="p">)</span>
        <span class="n">fmask</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;mask.nii.gz&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fdata</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">,</span> <span class="n">fmask</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;cti_rat1&quot;</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_cti_rat1</span><span class="p">()</span>
        <span class="n">fdata</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;Rat1_invivo_cti_data.nii&quot;</span><span class="p">)</span>
        <span class="n">fbval1</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvals1.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvec1</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvec1.bvec&quot;</span><span class="p">)</span>
        <span class="n">fbval2</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvals2.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvec2</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvec2.bvec&quot;</span><span class="p">)</span>
        <span class="n">fmask</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;Rat1_mask.nii&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fdata</span><span class="p">,</span> <span class="n">fbval1</span><span class="p">,</span> <span class="n">fbvec1</span><span class="p">,</span> <span class="n">fbval2</span><span class="p">,</span> <span class="n">fbvec2</span><span class="p">,</span> <span class="n">fmask</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;fury_surface&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_fury_surface</span><span class="p">()</span>
        <span class="n">surface_name</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;100307_white_lh.vtk&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">surface_name</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;histo_resdnn_tf_weights&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_resdnn_tf_weights</span><span class="p">()</span>
        <span class="n">wraw</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;resdnn_weights_mri_2018.h5&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wraw</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;histo_resdnn_torch_weights&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_resdnn_torch_weights</span><span class="p">()</span>
        <span class="n">wraw</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;histo_weights.pth&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wraw</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;synb0_default_weights&quot;</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_synb0_weights</span><span class="p">()</span>
        <span class="n">w1</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;synb0_default_weights1.h5&quot;</span><span class="p">)</span>
        <span class="n">w2</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;synb0_default_weights2.h5&quot;</span><span class="p">)</span>
        <span class="n">w3</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;synb0_default_weights3.h5&quot;</span><span class="p">)</span>
        <span class="n">w4</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;synb0_default_weights4.h5&quot;</span><span class="p">)</span>
        <span class="n">w5</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;synb0_default_weights5.h5&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">w1</span><span class="p">,</span> <span class="n">w2</span><span class="p">,</span> <span class="n">w3</span><span class="p">,</span> <span class="n">w4</span><span class="p">,</span> <span class="n">w5</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;synb0_test_data&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_synb0_test</span><span class="p">()</span>
        <span class="n">input_array</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;test_input_synb0.npz&quot;</span><span class="p">)</span>
        <span class="n">target_array</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;test_output_synb0.npz&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">input_array</span><span class="p">,</span> <span class="n">target_array</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;deepn4_default_weights&quot;</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_deepn4_weights</span><span class="p">()</span>
        <span class="n">w1</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;model_weights.h5&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">w1</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;deepn4_test_data&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_deepn4_test</span><span class="p">()</span>
        <span class="n">input_array</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;test_input_deepn4.npz&quot;</span><span class="p">)</span>
        <span class="n">target_array</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;test_output_deepn4.npz&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">input_array</span><span class="p">,</span> <span class="n">target_array</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;evac_default_tf_weights&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_evac_tf_weights</span><span class="p">()</span>
        <span class="n">weight</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;evac_default_weights.h5&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">weight</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;evac_default_torch_weights&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_evac_torch_weights</span><span class="p">()</span>
        <span class="n">weight</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;evac_weights.pth&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">weight</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;evac_test_data&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_evac_test</span><span class="p">()</span>
        <span class="n">test_data</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;evac_test_data.npz&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">test_data</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;DiB_70_lte_pte_ste&quot;</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_DiB_70_lte_pte_ste</span><span class="p">()</span>
        <span class="n">fdata</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;DiB_70_lte_pte_ste.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">fbval</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bval_DiB_70_lte_pte_ste.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvec</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvec_DiB_70_lte_pte_ste.bvec&quot;</span><span class="p">)</span>
        <span class="n">fmask</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;DiB_mask.nii.gz&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fdata</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">,</span> <span class="n">fmask</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;DiB_217_lte_pte_ste&quot;</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_DiB_217_lte_pte_ste</span><span class="p">()</span>
        <span class="n">fdata_1</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;DiB_217_lte_pte_ste_1.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">fdata_2</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;DiB_217_lte_pte_ste_2.nii.gz&quot;</span><span class="p">)</span>
        <span class="n">fbval</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bval_DiB_217_lte_pte_ste.bval&quot;</span><span class="p">)</span>
        <span class="n">fbvec</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvec_DiB_217_lte_pte_ste.bvec&quot;</span><span class="p">)</span>
        <span class="n">fmask</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;DiB_mask.nii.gz&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fdata_1</span><span class="p">,</span> <span class="n">fdata_2</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">,</span> <span class="n">fmask</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;ptt_minimal_dataset&quot;</span><span class="p">:</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_ptt_minimal_dataset</span><span class="p">()</span>
        <span class="n">fod_name</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;ptt_fod.nii&quot;</span><span class="p">)</span>
        <span class="n">seed_coords_name</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;ptt_seed_coords.txt&quot;</span><span class="p">)</span>
        <span class="n">seed_image_name</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;ptt_seed_image.nii&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fod_name</span><span class="p">,</span> <span class="n">seed_coords_name</span><span class="p">,</span> <span class="n">seed_image_name</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;gold_standard_tracks&quot;</span><span class="p">:</span>
        <span class="n">filepath_dix</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_gold_standard_io</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="n">filepath_dix</span><span class="p">[</span><span class="n">filename</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath_dix</span><span class="p">[</span><span class="s2">&quot;points_data.json&quot;</span><span class="p">])</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
            <span class="n">points_data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">))</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath_dix</span><span class="p">[</span><span class="s2">&quot;streamlines_data.json&quot;</span><span class="p">])</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
            <span class="n">streamlines_data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">filepath_dix</span><span class="p">,</span> <span class="n">points_data</span><span class="p">,</span> <span class="n">streamlines_data</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;disco&quot;</span><span class="p">,</span> <span class="s2">&quot;disco1&quot;</span><span class="p">,</span> <span class="s2">&quot;disco2&quot;</span><span class="p">,</span> <span class="s2">&quot;disco3&quot;</span><span class="p">]:</span>
        <span class="n">local_fetcher</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;fetch_</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">_dataset&quot;</span><span class="p">)</span>
        <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">local_fetcher</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">]</span></div>



<div class="viewcode-block" id="read_qtdMRI_test_retest_2subjects">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_qtdMRI_test_retest_2subjects">[docs]</a>
<span class="k">def</span> <span class="nf">read_qtdMRI_test_retest_2subjects</span><span class="p">():</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Load test-retest qt-dMRI acquisitions of two C57Bl6 mice.</span>

<span class="sd">    These datasets were used to study test-retest reproducibility of</span>
<span class="sd">    time-dependent q-space indices (q$\tau$-indices) in the corpus callosum of</span>
<span class="sd">    two mice :footcite:p:`Fick2018`. The data itself and its details are</span>
<span class="sd">    publicly available and can be cited at :footcite:p:`Wassermann2017`.</span>

<span class="sd">    The test-retest diffusion MRI spin echo sequences were acquired from two</span>
<span class="sd">    C57Bl6 wild-type mice on an 11.7 Tesla Bruker scanner. The test and retest</span>
<span class="sd">    acquisition were taken 48 hours from each other. The (processed) data</span>
<span class="sd">    consists of 80x160x5 voxels of size 110x110x500μm. Each data set consists</span>
<span class="sd">    of 515 Diffusion-Weighted Images (DWIs) spread over 35 acquisition shells.</span>
<span class="sd">    The shells are spread over 7 gradient strength shells with a maximum</span>
<span class="sd">    gradient strength of 491 mT/m, 5 pulse separation shells between</span>
<span class="sd">    [10.8 - 20.0]ms, and a pulse length of 5ms. We manually created a brain</span>
<span class="sd">    mask and corrected the data from eddy currents and motion artifacts using</span>
<span class="sd">    FSL&#39;s eddy. A region of interest was then drawn in the middle slice in the</span>
<span class="sd">    corpus callosum, where the tissue is reasonably coherent.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    data : list of length 4</span>
<span class="sd">        contains the dwi datasets ordered as</span>
<span class="sd">        (subject1_test, subject1_retest, subject2_test, subject2_retest)</span>
<span class="sd">    cc_masks : list of length 4</span>
<span class="sd">        contains the corpus callosum masks ordered in the same order as data.</span>
<span class="sd">    gtabs : list of length 4</span>
<span class="sd">        contains the qt-dMRI gradient tables of the data sets.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. footbibliography::</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">data_names</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;subject1_dwis_test.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject1_dwis_retest.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_dwis_test.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_dwis_retest.nii.gz&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">data_name</span> <span class="ow">in</span> <span class="n">data_names</span><span class="p">:</span>
        <span class="n">data_loc</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;qtdMRI_test_retest_2subjects&quot;</span><span class="p">,</span> <span class="n">data_name</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">load_nifti_data</span><span class="p">(</span><span class="n">data_loc</span><span class="p">))</span>

    <span class="n">cc_masks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">mask_names</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;subject1_ccmask_test.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject1_ccmask_retest.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_ccmask_test.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_ccmask_retest.nii.gz&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">mask_name</span> <span class="ow">in</span> <span class="n">mask_names</span><span class="p">:</span>
        <span class="n">mask_loc</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;qtdMRI_test_retest_2subjects&quot;</span><span class="p">,</span> <span class="n">mask_name</span><span class="p">)</span>
        <span class="n">cc_masks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">load_nifti_data</span><span class="p">(</span><span class="n">mask_loc</span><span class="p">))</span>

    <span class="n">gtabs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">gtab_txt_names</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;subject1_scheme_test.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject1_scheme_retest.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_scheme_test.txt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;subject2_scheme_retest.txt&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">gtab_txt_name</span> <span class="ow">in</span> <span class="n">gtab_txt_names</span><span class="p">:</span>
        <span class="n">txt_loc</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;qtdMRI_test_retest_2subjects&quot;</span><span class="p">,</span> <span class="n">gtab_txt_name</span><span class="p">)</span>
        <span class="n">qtdmri_scheme</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">txt_loc</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">bvecs</span> <span class="o">=</span> <span class="n">qtdmri_scheme</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">G</span> <span class="o">=</span> <span class="n">qtdmri_scheme</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">]</span> <span class="o">/</span> <span class="mf">1e3</span>  <span class="c1"># because dipy takes T/mm not T/m</span>
        <span class="n">small_delta</span> <span class="o">=</span> <span class="n">qtdmri_scheme</span><span class="p">[:,</span> <span class="mi">5</span><span class="p">]</span>
        <span class="n">big_delta</span> <span class="o">=</span> <span class="n">qtdmri_scheme</span><span class="p">[:,</span> <span class="mi">6</span><span class="p">]</span>
        <span class="n">gtab</span> <span class="o">=</span> <span class="n">gradient_table_from_gradient_strength_bvecs</span><span class="p">(</span>
            <span class="n">G</span><span class="p">,</span> <span class="n">bvecs</span><span class="p">,</span> <span class="n">big_delta</span><span class="p">,</span> <span class="n">small_delta</span>
        <span class="p">)</span>
        <span class="n">gtabs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gtab</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">data</span><span class="p">,</span> <span class="n">cc_masks</span><span class="p">,</span> <span class="n">gtabs</span></div>



<div class="viewcode-block" id="read_scil_b0">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_scil_b0">[docs]</a>
<span class="k">def</span> <span class="nf">read_scil_b0</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load GE 3T b0 image form the scil b0 dataset.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    img : obj,</span>
<span class="sd">        Nifti1Image</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fnames</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;scil_b0&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fnames</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></div>



<div class="viewcode-block" id="read_siemens_scil_b0">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_siemens_scil_b0">[docs]</a>
<span class="k">def</span> <span class="nf">read_siemens_scil_b0</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load Siemens 1.5T b0 image from the scil b0 dataset.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    img : obj,</span>
<span class="sd">        Nifti1Image</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fnames</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;scil_b0&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fnames</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span></div>



<div class="viewcode-block" id="read_isbi2013_2shell">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_isbi2013_2shell">[docs]</a>
<span class="k">def</span> <span class="nf">read_isbi2013_2shell</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load ISBI 2013 2-shell synthetic dataset.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    img : obj,</span>
<span class="sd">        Nifti1Image</span>
<span class="sd">    gtab : obj,</span>
<span class="sd">        GradientTable</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fraw</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;isbi2013_2shell&quot;</span><span class="p">)</span>
    <span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span> <span class="o">=</span> <span class="n">read_bvals_bvecs</span><span class="p">(</span><span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">)</span>
    <span class="n">gtab</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="o">=</span><span class="n">bvecs</span><span class="p">)</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fraw</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">img</span><span class="p">,</span> <span class="n">gtab</span></div>



<div class="viewcode-block" id="read_sherbrooke_3shell">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_sherbrooke_3shell">[docs]</a>
<span class="k">def</span> <span class="nf">read_sherbrooke_3shell</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load Sherbrooke 3-shell HARDI dataset.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    img : obj,</span>
<span class="sd">        Nifti1Image</span>
<span class="sd">    gtab : obj,</span>
<span class="sd">        GradientTable</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fraw</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sherbrooke_3shell&quot;</span><span class="p">)</span>
    <span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span> <span class="o">=</span> <span class="n">read_bvals_bvecs</span><span class="p">(</span><span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">)</span>
    <span class="n">gtab</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="o">=</span><span class="n">bvecs</span><span class="p">)</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fraw</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">img</span><span class="p">,</span> <span class="n">gtab</span></div>



<div class="viewcode-block" id="read_stanford_labels">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_stanford_labels">[docs]</a>
<span class="k">def</span> <span class="nf">read_stanford_labels</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read stanford hardi data and label map.&quot;&quot;&quot;</span>
    <span class="c1"># First get the hardi data</span>
    <span class="n">hard_img</span><span class="p">,</span> <span class="n">gtab</span> <span class="o">=</span> <span class="n">read_stanford_hardi</span><span class="p">()</span>
    <span class="c1"># Fetch and load</span>
    <span class="n">labels_file</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;stanford_labels&quot;</span><span class="p">)</span>
    <span class="n">labels_img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">labels_file</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hard_img</span><span class="p">,</span> <span class="n">gtab</span><span class="p">,</span> <span class="n">labels_img</span></div>



<div class="viewcode-block" id="read_stanford_hardi">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_stanford_hardi">[docs]</a>
<span class="k">def</span> <span class="nf">read_stanford_hardi</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load Stanford HARDI dataset.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    img : obj,</span>
<span class="sd">        Nifti1Image</span>
<span class="sd">    gtab : obj,</span>
<span class="sd">        GradientTable</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fraw</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;stanford_hardi&quot;</span><span class="p">)</span>
    <span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span> <span class="o">=</span> <span class="n">read_bvals_bvecs</span><span class="p">(</span><span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">)</span>
    <span class="n">gtab</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="o">=</span><span class="n">bvecs</span><span class="p">)</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fraw</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">img</span><span class="p">,</span> <span class="n">gtab</span></div>



<div class="viewcode-block" id="read_stanford_t1">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_stanford_t1">[docs]</a>
<span class="k">def</span> <span class="nf">read_stanford_t1</span><span class="p">():</span>
    <span class="n">f_t1</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;stanford_t1&quot;</span><span class="p">)</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f_t1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">img</span></div>



<div class="viewcode-block" id="read_stanford_pve_maps">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_stanford_pve_maps">[docs]</a>
<span class="k">def</span> <span class="nf">read_stanford_pve_maps</span><span class="p">():</span>
    <span class="n">f_pve_csf</span><span class="p">,</span> <span class="n">f_pve_gm</span><span class="p">,</span> <span class="n">f_pve_wm</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;stanford_pve_maps&quot;</span><span class="p">)</span>
    <span class="n">img_pve_csf</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f_pve_csf</span><span class="p">)</span>
    <span class="n">img_pve_gm</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f_pve_gm</span><span class="p">)</span>
    <span class="n">img_pve_wm</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f_pve_wm</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">img_pve_csf</span><span class="p">,</span> <span class="n">img_pve_gm</span><span class="p">,</span> <span class="n">img_pve_wm</span></div>



<div class="viewcode-block" id="read_taiwan_ntu_dsi">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_taiwan_ntu_dsi">[docs]</a>
<span class="k">def</span> <span class="nf">read_taiwan_ntu_dsi</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load Taiwan NTU dataset.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    img : obj,</span>
<span class="sd">        Nifti1Image</span>
<span class="sd">    gtab : obj,</span>
<span class="sd">        GradientTable</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fraw</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;taiwan_ntu_dsi&quot;</span><span class="p">)</span>
    <span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span> <span class="o">=</span> <span class="n">read_bvals_bvecs</span><span class="p">(</span><span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">)</span>
    <span class="n">bvecs</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="n">bvecs</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">bvecs</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">*</span> <span class="n">bvecs</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[:,</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">gtab</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="o">=</span><span class="n">bvecs</span><span class="p">)</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fraw</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">img</span><span class="p">,</span> <span class="n">gtab</span></div>



<div class="viewcode-block" id="read_syn_data">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_syn_data">[docs]</a>
<span class="k">def</span> <span class="nf">read_syn_data</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load t1 and b0 volumes from the same session.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    t1 : obj,</span>
<span class="sd">        Nifti1Image</span>
<span class="sd">    b0 : obj,</span>
<span class="sd">        Nifti1Image</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">t1_name</span><span class="p">,</span> <span class="n">b0_name</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;syn_data&quot;</span><span class="p">)</span>
    <span class="n">t1</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">t1_name</span><span class="p">)</span>
    <span class="n">b0</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">b0_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">t1</span><span class="p">,</span> <span class="n">b0</span></div>



<div class="viewcode-block" id="fetch_tissue_data">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.fetch_tissue_data">[docs]</a>
<span class="k">def</span> <span class="nf">fetch_tissue_data</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Download images to be used for tissue classification&quot;&quot;&quot;</span>

    <span class="n">t1</span> <span class="o">=</span> <span class="s2">&quot;https://ndownloader.figshare.com/files/6965969&quot;</span>
    <span class="n">t1d</span> <span class="o">=</span> <span class="s2">&quot;https://ndownloader.figshare.com/files/6965981&quot;</span>
    <span class="n">ap</span> <span class="o">=</span> <span class="s2">&quot;https://ndownloader.figshare.com/files/6965984&quot;</span>

    <span class="n">folder</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;tissue_data&quot;</span><span class="p">)</span>

    <span class="n">md5_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;99c4b77267a6855cbfd96716d5d65b70&quot;</span><span class="p">,</span>  <span class="c1"># t1</span>
        <span class="s2">&quot;4b87e1b02b19994fbd462490cc784fa3&quot;</span><span class="p">,</span>  <span class="c1"># t1d</span>
        <span class="s2">&quot;c0ea00ed7f2ff8b28740f18aa74bff6a&quot;</span><span class="p">,</span>
    <span class="p">]</span>  <span class="c1"># ap</span>

    <span class="n">url_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">t1</span><span class="p">,</span> <span class="n">t1d</span><span class="p">,</span> <span class="n">ap</span><span class="p">]</span>
    <span class="n">fname_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;t1_brain.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;t1_brain_denoised.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;power_map.nii.gz&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">op</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="n">_log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating new directory </span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Downloading 3 Nifti1 images (9.3MB)...&quot;</span>
        <span class="n">_log</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">md5_list</span><span class="p">)):</span>
            <span class="n">_get_file_data</span><span class="p">(</span><span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">fname_list</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">url_list</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">check_md5</span><span class="p">(</span><span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">fname_list</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">md5_list</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="n">_log</span><span class="p">(</span><span class="s2">&quot;Done.&quot;</span><span class="p">)</span>
        <span class="n">_log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Files copied in folder </span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_already_there_msg</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fname_list</span><span class="p">,</span> <span class="n">folder</span></div>



<div class="viewcode-block" id="read_tissue_data">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_tissue_data">[docs]</a>
<span class="nd">@warning_for_keywords</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">read_tissue_data</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">contrast</span><span class="o">=</span><span class="s2">&quot;T1&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load images to be used for tissue classification</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    contrast : str</span>
<span class="sd">        &#39;T1&#39;, &#39;T1 denoised&#39; or &#39;Anisotropic Power&#39;</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    image : obj,</span>
<span class="sd">        Nifti1Image</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;tissue_data&quot;</span><span class="p">)</span>
    <span class="n">t1_name</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;t1_brain.nii.gz&quot;</span><span class="p">)</span>
    <span class="n">t1d_name</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;t1_brain_denoised.nii.gz&quot;</span><span class="p">)</span>
    <span class="n">ap_name</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;power_map.nii.gz&quot;</span><span class="p">)</span>

    <span class="n">md5_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;t1&quot;</span><span class="p">:</span> <span class="s2">&quot;99c4b77267a6855cbfd96716d5d65b70&quot;</span><span class="p">,</span>
        <span class="s2">&quot;t1d&quot;</span><span class="p">:</span> <span class="s2">&quot;4b87e1b02b19994fbd462490cc784fa3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ap&quot;</span><span class="p">:</span> <span class="s2">&quot;c0ea00ed7f2ff8b28740f18aa74bff6a&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">check_md5</span><span class="p">(</span><span class="n">t1_name</span><span class="p">,</span> <span class="n">md5_dict</span><span class="p">[</span><span class="s2">&quot;t1&quot;</span><span class="p">])</span>
    <span class="n">check_md5</span><span class="p">(</span><span class="n">t1d_name</span><span class="p">,</span> <span class="n">md5_dict</span><span class="p">[</span><span class="s2">&quot;t1d&quot;</span><span class="p">])</span>
    <span class="n">check_md5</span><span class="p">(</span><span class="n">ap_name</span><span class="p">,</span> <span class="n">md5_dict</span><span class="p">[</span><span class="s2">&quot;ap&quot;</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">contrast</span> <span class="o">==</span> <span class="s2">&quot;T1 denoised&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">t1d_name</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">contrast</span> <span class="o">==</span> <span class="s2">&quot;Anisotropic Power&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">ap_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">t1_name</span><span class="p">)</span></div>



<span class="n">mni_notes</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Notes</span>
<span class="s2">    -----</span>
<span class="s2">    The templates were downloaded from the MNI (McGill University)</span>
<span class="s2">    `website &lt;https://www.bic.mni.mcgill.ca/ServicesAtlases/ICBM152NLin2009&gt;`_</span>
<span class="s2">    in July 2015.</span>

<span class="s2">    The following publications should be referenced when using these templates:</span>

<span class="s2">    - :footcite:t:`Fonov2013`</span>
<span class="s2">    - :footcite:t:`Fonov2009`</span>

<span class="s2">    **License for the MNI templates:**</span>

<span class="s2">    Copyright (C) 1993-2004, Louis Collins McConnell Brain Imaging Centre,</span>
<span class="s2">    Montreal Neurological Institute, McGill University. Permission to use,</span>
<span class="s2">    copy, modify, and distribute this software and its documentation for any</span>
<span class="s2">    purpose and without fee is hereby granted, provided that the above</span>
<span class="s2">    copyright notice appear in all copies. The authors and McGill University</span>
<span class="s2">    make no representations about the suitability of this software for any</span>
<span class="s2">    purpose. It is provided &quot;as is&quot; without express or implied warranty. The</span>
<span class="s2">    authors are not responsible for any data loss, equipment damage, property</span>
<span class="s2">    loss, or injury to subjects or patients resulting from the use or misuse</span>
<span class="s2">    of this software package.</span>

<span class="s2">    References</span>
<span class="s2">    ----------</span>
<span class="s2">    .. footbibliography::</span>
<span class="s2">&quot;&quot;&quot;</span>


<div class="viewcode-block" id="read_mni_template">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_mni_template">[docs]</a>
<span class="nd">@warning_for_keywords</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">read_mni_template</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">contrast</span><span class="o">=</span><span class="s2">&quot;T2&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read the MNI template from disk.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    version: string</span>
<span class="sd">        There are two MNI templates 2009a and 2009c, so options available are:</span>
<span class="sd">        &quot;a&quot; and &quot;c&quot;.</span>
<span class="sd">    contrast : list or string, optional</span>
<span class="sd">        Which of the contrast templates to read. For version &quot;a&quot; two contrasts</span>
<span class="sd">        are available: &quot;T1&quot; and &quot;T2&quot;. Similarly for version &quot;c&quot; there are two</span>
<span class="sd">        options, &quot;T1&quot; and &quot;mask&quot;. You can input contrast as a string or a list</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list : contains the nibabel.Nifti1Image objects requested, according to the</span>
<span class="sd">        order they were requested in the input.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; # Get only the T1 file for version c:</span>
<span class="sd">    &gt;&gt;&gt; T1 = read_mni_template(&quot;c&quot;, contrast = &quot;T1&quot;) # doctest: +SKIP</span>
<span class="sd">    &gt;&gt;&gt; # Get both files in this order for version a:</span>
<span class="sd">    &gt;&gt;&gt; T1, T2 = read_mni_template(contrast = [&quot;T1&quot;, &quot;T2&quot;]) # doctest: +SKIP</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_mni_template</span><span class="p">()</span>
    <span class="n">file_dict_a</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;T1&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;mni_icbm152_t1_tal_nlin_asym_09a.nii&quot;</span><span class="p">),</span>
        <span class="s2">&quot;T2&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;mni_icbm152_t2_tal_nlin_asym_09a.nii&quot;</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="n">file_dict_c</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;T1&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;mni_icbm152_t1_tal_nlin_asym_09c.nii&quot;</span><span class="p">),</span>
        <span class="s2">&quot;mask&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;mni_icbm152_t1_tal_nlin_asym_09c_mask.nii&quot;</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">contrast</span> <span class="o">==</span> <span class="s2">&quot;T2&quot;</span> <span class="ow">and</span> <span class="n">version</span> <span class="o">==</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No T2 image for MNI template 2009c&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">contrast</span> <span class="o">==</span> <span class="s2">&quot;mask&quot;</span> <span class="ow">and</span> <span class="n">version</span> <span class="o">==</span> <span class="s2">&quot;a&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No template mask available for MNI 2009a&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">contrast</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">version</span> <span class="o">==</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">contrast</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">&quot;T2&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No T2 image for MNI template 2009c&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">version</span> <span class="o">==</span> <span class="s2">&quot;a&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">contrast</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file_dict_a</span><span class="p">[</span><span class="n">contrast</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">contrast</span><span class="p">:</span>
                <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file_dict_a</span><span class="p">[</span><span class="n">k</span><span class="p">]))</span>
    <span class="k">elif</span> <span class="n">version</span> <span class="o">==</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">contrast</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file_dict_c</span><span class="p">[</span><span class="n">contrast</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">contrast</span><span class="p">:</span>
                <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file_dict_c</span><span class="p">[</span><span class="n">k</span><span class="p">]))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only 2009a and 2009c versions are available&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out_list</span></div>



<span class="c1"># Add the references to both MNI-related functions:</span>
<span class="n">read_mni_template</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+=</span> <span class="n">mni_notes</span>
<span class="n">fetch_mni_template</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+=</span> <span class="n">mni_notes</span>


<div class="viewcode-block" id="fetch_cenir_multib">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.fetch_cenir_multib">[docs]</a>
<span class="nd">@warning_for_keywords</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">fetch_cenir_multib</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">with_raw</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fetch &#39;HCP-like&#39; data, collected at multiple b-values.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    with_raw : bool</span>
<span class="sd">        Whether to fetch the raw data. Per default, this is False, which means</span>
<span class="sd">        that only eddy-current/motion corrected data is fetched</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;cenir_multib&quot;</span><span class="p">)</span>

    <span class="n">fname_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;4D_dwi_eddycor_B200.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dwi_bvals_B200&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dwi_bvecs_B200&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4D_dwieddycor_B400.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvals_B400&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvecs_B400&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4D_dwieddycor_B1000.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvals_B1000&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvecs_B1000&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4D_dwieddycor_B2000.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvals_B2000&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvecs_B2000&quot;</span><span class="p">,</span>
        <span class="s2">&quot;4D_dwieddycor_B3000.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvals_B3000&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bvecs_B3000&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="n">md5_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;fd704aa3deb83c1c7229202cb3db8c48&quot;</span><span class="p">,</span>
        <span class="s2">&quot;80ae5df76a575fe5bf9f1164bb0d4cfb&quot;</span><span class="p">,</span>
        <span class="s2">&quot;18e90f8a3e6a4db2457e5b1ba1cc98a9&quot;</span><span class="p">,</span>
        <span class="s2">&quot;3d0f2b8ef7b6a4a3aa5c4f7a90c9cfec&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c38056c40c9cc42372232d6e75c47f54&quot;</span><span class="p">,</span>
        <span class="s2">&quot;810d79b4c30cb7dff3b2000017d5f72a&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dde8037601a14436b2173f4345b5fd17&quot;</span><span class="p">,</span>
        <span class="s2">&quot;97de6a492ae304f39e0b418b6ebac64c&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f28a0faa701bdfc66e31bde471a5b992&quot;</span><span class="p">,</span>
        <span class="s2">&quot;c5e4b96e3afdee99c0e994eff3b2331a&quot;</span><span class="p">,</span>
        <span class="s2">&quot;9c83b8d5caf9c3def240f320f2d2f56c&quot;</span><span class="p">,</span>
        <span class="s2">&quot;05446bd261d57193d8dbc097e06db5ff&quot;</span><span class="p">,</span>
        <span class="s2">&quot;f0d70456ce424fda2cecd48e64f3a151&quot;</span><span class="p">,</span>
        <span class="s2">&quot;336accdb56acbbeff8dac1748d15ceb8&quot;</span><span class="p">,</span>
        <span class="s2">&quot;27089f3baaf881d96f6a9da202e3d69b&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="n">with_raw</span><span class="p">:</span>
        <span class="n">fname_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="s2">&quot;4D_dwi_B200.nii.gz&quot;</span><span class="p">,</span>
                <span class="s2">&quot;4D_dwi_B400.nii.gz&quot;</span><span class="p">,</span>
                <span class="s2">&quot;4D_dwi_B1000.nii.gz&quot;</span><span class="p">,</span>
                <span class="s2">&quot;4D_dwi_B2000.nii.gz&quot;</span><span class="p">,</span>
                <span class="s2">&quot;4D_dwi_B3000.nii.gz&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="n">md5_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="s2">&quot;a8c36e76101f2da2ca8119474ded21d5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;a0e7939f6d977458afbb2f4659062a79&quot;</span><span class="p">,</span>
                <span class="s2">&quot;87fc307bdc2e56e105dffc81b711a808&quot;</span><span class="p">,</span>
                <span class="s2">&quot;7c23e8a5198624aa29455f0578025d4f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;4e4324c676f5a97b3ded8bbb100bf6e5&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="n">files</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">baseurl</span> <span class="o">=</span> <span class="n">UW_RW_URL</span> <span class="o">+</span> <span class="s2">&quot;1773/33311/&quot;</span>
    <span class="k">for</span> <span class="n">f</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">fname_list</span><span class="p">,</span> <span class="n">md5_list</span><span class="p">):</span>
        <span class="n">files</span><span class="p">[</span><span class="n">f</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">baseurl</span> <span class="o">+</span> <span class="n">f</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>

    <span class="n">fetch_data</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">folder</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">files</span><span class="p">,</span> <span class="n">folder</span></div>



<div class="viewcode-block" id="read_cenir_multib">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_cenir_multib">[docs]</a>
<span class="nd">@warning_for_keywords</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">read_cenir_multib</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">bvals</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read CENIR multi b-value data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    bvals : list or int</span>
<span class="sd">        The b-values to read from file (200, 400, 1000, 2000, 3000).</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    gtab : a GradientTable class instance</span>
<span class="sd">    img : nibabel.Nifti1Image</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">files</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_cenir_multib</span><span class="p">(</span><span class="n">with_raw</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bvals</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bvals</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">3000</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">bvals</span> <span class="o">=</span> <span class="p">[</span><span class="n">bvals</span><span class="p">]</span>
    <span class="n">file_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">200</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;DWI&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;4D_dwi_eddycor_B200.nii.gz&quot;</span><span class="p">),</span>
            <span class="s2">&quot;bvals&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;dwi_bvals_B200&quot;</span><span class="p">),</span>
            <span class="s2">&quot;bvecs&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;dwi_bvecs_B200&quot;</span><span class="p">),</span>
        <span class="p">},</span>
        <span class="mi">400</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;DWI&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;4D_dwieddycor_B400.nii.gz&quot;</span><span class="p">),</span>
            <span class="s2">&quot;bvals&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvals_B400&quot;</span><span class="p">),</span>
            <span class="s2">&quot;bvecs&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvecs_B400&quot;</span><span class="p">),</span>
        <span class="p">},</span>
        <span class="mi">1000</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;DWI&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;4D_dwieddycor_B1000.nii.gz&quot;</span><span class="p">),</span>
            <span class="s2">&quot;bvals&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvals_B1000&quot;</span><span class="p">),</span>
            <span class="s2">&quot;bvecs&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvecs_B1000&quot;</span><span class="p">),</span>
        <span class="p">},</span>
        <span class="mi">2000</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;DWI&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;4D_dwieddycor_B2000.nii.gz&quot;</span><span class="p">),</span>
            <span class="s2">&quot;bvals&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvals_B2000&quot;</span><span class="p">),</span>
            <span class="s2">&quot;bvecs&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvecs_B2000&quot;</span><span class="p">),</span>
        <span class="p">},</span>
        <span class="mi">3000</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;DWI&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;4D_dwieddycor_B3000.nii.gz&quot;</span><span class="p">),</span>
            <span class="s2">&quot;bvals&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvals_B3000&quot;</span><span class="p">),</span>
            <span class="s2">&quot;bvecs&quot;</span><span class="p">:</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;bvecs_B3000&quot;</span><span class="p">),</span>
        <span class="p">},</span>
    <span class="p">}</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">bval_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">bvec_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">bval</span> <span class="ow">in</span> <span class="n">bvals</span><span class="p">:</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">load_nifti_data</span><span class="p">(</span><span class="n">file_dict</span><span class="p">[</span><span class="n">bval</span><span class="p">][</span><span class="s2">&quot;DWI&quot;</span><span class="p">]))</span>
        <span class="n">bval_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">file_dict</span><span class="p">[</span><span class="n">bval</span><span class="p">][</span><span class="s2">&quot;bvals&quot;</span><span class="p">]))</span>
        <span class="n">bvec_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">file_dict</span><span class="p">[</span><span class="n">bval</span><span class="p">][</span><span class="s2">&quot;bvecs&quot;</span><span class="p">]))</span>

    <span class="c1"># All affines are the same, so grab the last one:</span>
    <span class="n">aff</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file_dict</span><span class="p">[</span><span class="n">bval</span><span class="p">][</span><span class="s2">&quot;DWI&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">affine</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">nib</span><span class="o">.</span><span class="n">Nifti1Image</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">aff</span><span class="p">),</span>
        <span class="n">gradient_table</span><span class="p">(</span><span class="n">bval_list</span><span class="p">,</span> <span class="n">bvecs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">bvec_list</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)),</span>
    <span class="p">)</span></div>



<span class="n">CENIR_notes</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Notes</span>
<span class="s2">    -----</span>
<span class="s2">    Details of the acquisition and processing, and additional meta-data are</span>
<span class="s2">    available through UW researchworks:</span>

<span class="s2">    https://digital.lib.washington.edu/researchworks/handle/1773/33311</span>
<span class="s2">    &quot;&quot;&quot;</span>

<span class="n">fetch_cenir_multib</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+=</span> <span class="n">CENIR_notes</span>
<span class="n">read_cenir_multib</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+=</span> <span class="n">CENIR_notes</span>


<div class="viewcode-block" id="read_bundles_2_subjects">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_bundles_2_subjects">[docs]</a>
<span class="nd">@warning_for_keywords</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">read_bundles_2_subjects</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span> <span class="n">subj_id</span><span class="o">=</span><span class="s2">&quot;subj_1&quot;</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;fa&quot;</span><span class="p">,),</span> <span class="n">bundles</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;af.left&quot;</span><span class="p">,</span> <span class="s2">&quot;cst.right&quot;</span><span class="p">,</span> <span class="s2">&quot;cc_1&quot;</span><span class="p">)</span>
<span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Read images and streamlines from 2 subjects of the SNAIL dataset.</span>

<span class="sd">    See :footcite:p:`Renauld2016` and :footcite:p:`Garyfallidis2015` for further</span>
<span class="sd">    details about the dataset and processing pipeline.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    subj_id : string</span>
<span class="sd">        Either ``subj_1`` or ``subj_2``.</span>
<span class="sd">    metrics : array-like</span>
<span class="sd">        Either [&#39;fa&#39;] or [&#39;t1&#39;] or [&#39;fa&#39;, &#39;t1&#39;]</span>
<span class="sd">    bundles : array-like</span>
<span class="sd">        E.g., [&#39;af.left&#39;, &#39;cst.right&#39;, &#39;cc_1&#39;]. See all the available bundles</span>
<span class="sd">        in the ``exp_bundles_maps/bundles_2_subjects`` directory of your</span>
<span class="sd">        ``DIPY_HOME`` of ``$HOME/.dipy`` folder.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dix : dict</span>
<span class="sd">        Dictionary with data of the metrics and the bundles as keys.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    If you are using these datasets please cite the following publications.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. footbibliography::</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dname</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;exp_bundles_and_maps&quot;</span><span class="p">,</span> <span class="s2">&quot;bundles_2_subjects&quot;</span><span class="p">)</span>

    <span class="kn">from</span> <span class="nn">dipy.io.streamline</span> <span class="kn">import</span> <span class="n">load_tractogram</span>
    <span class="kn">from</span> <span class="nn">dipy.tracking.streamline</span> <span class="kn">import</span> <span class="n">Streamlines</span>

    <span class="n">res</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="s2">&quot;t1&quot;</span> <span class="ow">in</span> <span class="n">metrics</span><span class="p">:</span>
        <span class="n">data</span><span class="p">,</span> <span class="n">affine</span> <span class="o">=</span> <span class="n">load_nifti</span><span class="p">(</span><span class="n">pjoin</span><span class="p">(</span><span class="n">dname</span><span class="p">,</span> <span class="n">subj_id</span><span class="p">,</span> <span class="s2">&quot;t1_warped.nii.gz&quot;</span><span class="p">))</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;t1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">if</span> <span class="s2">&quot;fa&quot;</span> <span class="ow">in</span> <span class="n">metrics</span><span class="p">:</span>
        <span class="n">fa</span><span class="p">,</span> <span class="n">affine</span> <span class="o">=</span> <span class="n">load_nifti</span><span class="p">(</span><span class="n">pjoin</span><span class="p">(</span><span class="n">dname</span><span class="p">,</span> <span class="n">subj_id</span><span class="p">,</span> <span class="s2">&quot;fa_1x1x1.nii.gz&quot;</span><span class="p">))</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;fa&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fa</span>

    <span class="n">res</span><span class="p">[</span><span class="s2">&quot;affine&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">affine</span>

    <span class="k">for</span> <span class="n">bun</span> <span class="ow">in</span> <span class="n">bundles</span><span class="p">:</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="n">load_tractogram</span><span class="p">(</span>
            <span class="n">pjoin</span><span class="p">(</span><span class="n">dname</span><span class="p">,</span> <span class="n">subj_id</span><span class="p">,</span> <span class="s2">&quot;bundles&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;bundles_</span><span class="si">{</span><span class="n">bun</span><span class="si">}</span><span class="s2">.trk&quot;</span><span class="p">),</span>
            <span class="s2">&quot;same&quot;</span><span class="p">,</span>
            <span class="n">bbox_valid_check</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">streamlines</span>

        <span class="n">streamlines</span> <span class="o">=</span> <span class="n">Streamlines</span><span class="p">(</span><span class="n">streams</span><span class="p">)</span>
        <span class="n">res</span><span class="p">[</span><span class="n">bun</span><span class="p">]</span> <span class="o">=</span> <span class="n">streamlines</span>

    <span class="k">return</span> <span class="n">res</span></div>



<div class="viewcode-block" id="read_ivim">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_ivim">[docs]</a>
<span class="k">def</span> <span class="nf">read_ivim</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load IVIM dataset.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    img : obj,</span>
<span class="sd">        Nifti1Image</span>
<span class="sd">    gtab : obj,</span>
<span class="sd">        GradientTable</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fraw</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ivim&quot;</span><span class="p">)</span>
    <span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span> <span class="o">=</span> <span class="n">read_bvals_bvecs</span><span class="p">(</span><span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">)</span>
    <span class="n">gtab</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="o">=</span><span class="n">bvecs</span><span class="p">,</span> <span class="n">b0_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fraw</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">img</span><span class="p">,</span> <span class="n">gtab</span></div>



<div class="viewcode-block" id="read_cfin_dwi">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_cfin_dwi">[docs]</a>
<span class="k">def</span> <span class="nf">read_cfin_dwi</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load CFIN multi b-value DWI data.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    img : obj,</span>
<span class="sd">        Nifti1Image</span>
<span class="sd">    gtab : obj,</span>
<span class="sd">        GradientTable</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fraw</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;cfin_multib&quot;</span><span class="p">)</span>
    <span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span> <span class="o">=</span> <span class="n">read_bvals_bvecs</span><span class="p">(</span><span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">)</span>
    <span class="n">gtab</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="o">=</span><span class="n">bvecs</span><span class="p">)</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fraw</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">img</span><span class="p">,</span> <span class="n">gtab</span></div>



<div class="viewcode-block" id="read_cfin_t1">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_cfin_t1">[docs]</a>
<span class="k">def</span> <span class="nf">read_cfin_t1</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load CFIN T1-weighted data.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    img : obj,</span>
<span class="sd">        Nifti1Image</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">fraw</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;cfin_multib&quot;</span><span class="p">)</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fraw</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">img</span>  <span class="c1"># , gtab</span></div>



<div class="viewcode-block" id="get_file_formats">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.get_file_formats">[docs]</a>
<span class="k">def</span> <span class="nf">get_file_formats</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bundles_list : all bundles (list)</span>
<span class="sd">    ref_anat : reference</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ref_anat</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;bundle_file_formats_example&quot;</span><span class="p">,</span> <span class="s2">&quot;template0.nii.gz&quot;</span><span class="p">)</span>
    <span class="n">bundles_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="p">[</span>
        <span class="s2">&quot;cc_m_sub.trk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;laf_m_sub.tck&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lpt_m_sub.fib&quot;</span><span class="p">,</span>
        <span class="s2">&quot;raf_m_sub.vtk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rpt_m_sub.dpy&quot;</span><span class="p">,</span>
    <span class="p">]:</span>
        <span class="n">bundles_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pjoin</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;bundle_file_formats_example&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">bundles_list</span><span class="p">,</span> <span class="n">ref_anat</span></div>



<div class="viewcode-block" id="get_bundle_atlas_hcp842">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.get_bundle_atlas_hcp842">[docs]</a>
<span class="nd">@warning_for_keywords</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">get_bundle_atlas_hcp842</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">80</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    file1 : string</span>
<span class="sd">    file2 : string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">size</span> <span class="o">=</span> <span class="mi">80</span> <span class="k">if</span> <span class="n">size</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span> <span class="k">else</span> <span class="n">size</span>

    <span class="n">file1</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span>
        <span class="n">dipy_home</span><span class="p">,</span>
        <span class="s2">&quot;bundle_atlas_hcp842&quot;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s2">&quot;Atlas_</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s2">_Bundles&quot;</span><span class="p">,</span>
        <span class="s2">&quot;whole_brain&quot;</span><span class="p">,</span>
        <span class="s2">&quot;whole_brain_MNI.trk&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">file2</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span>
        <span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;bundle_atlas_hcp842&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Atlas_</span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s2">_Bundles&quot;</span><span class="p">,</span> <span class="s2">&quot;bundles&quot;</span><span class="p">,</span> <span class="s2">&quot;*.trk&quot;</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">file1</span><span class="p">,</span> <span class="n">file2</span></div>



<div class="viewcode-block" id="get_two_hcp842_bundles">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.get_two_hcp842_bundles">[docs]</a>
<span class="k">def</span> <span class="nf">get_two_hcp842_bundles</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    file1 : string</span>
<span class="sd">    file2 : string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">file1</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span>
        <span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;bundle_atlas_hcp842&quot;</span><span class="p">,</span> <span class="s2">&quot;Atlas_80_Bundles&quot;</span><span class="p">,</span> <span class="s2">&quot;bundles&quot;</span><span class="p">,</span> <span class="s2">&quot;AF_L.trk&quot;</span>
    <span class="p">)</span>

    <span class="n">file2</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span>
        <span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;bundle_atlas_hcp842&quot;</span><span class="p">,</span> <span class="s2">&quot;Atlas_80_Bundles&quot;</span><span class="p">,</span> <span class="s2">&quot;bundles&quot;</span><span class="p">,</span> <span class="s2">&quot;CST_L.trk&quot;</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">file1</span><span class="p">,</span> <span class="n">file2</span></div>



<div class="viewcode-block" id="get_target_tractogram_hcp">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.get_target_tractogram_hcp">[docs]</a>
<span class="k">def</span> <span class="nf">get_target_tractogram_hcp</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    file1 : string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">file1</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span>
        <span class="n">dipy_home</span><span class="p">,</span> <span class="s2">&quot;target_tractogram_hcp&quot;</span><span class="p">,</span> <span class="s2">&quot;hcp_tractogram&quot;</span><span class="p">,</span> <span class="s2">&quot;streamlines.trk&quot;</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">file1</span></div>



<div class="viewcode-block" id="read_qte_lte_pte">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_qte_lte_pte">[docs]</a>
<span class="k">def</span> <span class="nf">read_qte_lte_pte</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read q-space trajectory encoding data with linear and planar tensor</span>
<span class="sd">    encoding.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    data_img : nibabel.nifti1.Nifti1Image</span>
<span class="sd">        dMRI data image.</span>
<span class="sd">    mask_img : nibabel.nifti1.Nifti1Image</span>
<span class="sd">        Brain mask image.</span>
<span class="sd">    gtab : dipy.core.gradients.GradientTable</span>
<span class="sd">        Gradient table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fdata</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">,</span> <span class="n">fmask</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;qte_lte_pte&quot;</span><span class="p">)</span>
    <span class="n">data_img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fdata</span><span class="p">)</span>
    <span class="n">mask_img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fmask</span><span class="p">)</span>
    <span class="n">bvals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fbval</span><span class="p">)</span>
    <span class="n">bvecs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fbvec</span><span class="p">)</span>
    <span class="n">btens</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;LTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">61</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;PTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">61</span><span class="p">)])</span>
    <span class="n">gtab</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="o">=</span><span class="n">bvecs</span><span class="p">,</span> <span class="n">btens</span><span class="o">=</span><span class="n">btens</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data_img</span><span class="p">,</span> <span class="n">mask_img</span><span class="p">,</span> <span class="n">gtab</span></div>



<div class="viewcode-block" id="read_DiB_70_lte_pte_ste">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_DiB_70_lte_pte_ste">[docs]</a>
<span class="k">def</span> <span class="nf">read_DiB_70_lte_pte_ste</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read q-space trajectory encoding data with 70 between linear, planar,</span>
<span class="sd">    and spherical tensor encoding measurements.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    data_img : nibabel.nifti1.Nifti1Image</span>
<span class="sd">        dMRI data image.</span>
<span class="sd">    mask_img : nibabel.nifti1.Nifti1Image</span>
<span class="sd">        Brain mask image.</span>
<span class="sd">    gtab : dipy.core.gradients.GradientTable</span>
<span class="sd">        Gradient table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fdata</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">,</span> <span class="n">fmask</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;DiB_70_lte_pte_ste&quot;</span><span class="p">)</span>
    <span class="n">data_img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fdata</span><span class="p">)</span>
    <span class="n">mask_img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fmask</span><span class="p">)</span>
    <span class="n">bvals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fbval</span><span class="p">)</span>
    <span class="n">bvecs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fbvec</span><span class="p">)</span>
    <span class="n">btens</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">&quot;LTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;LTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;PTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;STE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;STE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;LTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;PTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;STE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;LTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">21</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;PTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;STE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)]</span>
    <span class="p">)</span>
    <span class="n">gtab</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="o">=</span><span class="n">bvecs</span><span class="p">,</span> <span class="n">btens</span><span class="o">=</span><span class="n">btens</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data_img</span><span class="p">,</span> <span class="n">mask_img</span><span class="p">,</span> <span class="n">gtab</span></div>



<div class="viewcode-block" id="read_DiB_217_lte_pte_ste">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_DiB_217_lte_pte_ste">[docs]</a>
<span class="k">def</span> <span class="nf">read_DiB_217_lte_pte_ste</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read q-space trajectory encoding data with 217 between linear,</span>
<span class="sd">    planar, and spherical tensor encoding.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    data_img : nibabel.nifti1.Nifti1Image</span>
<span class="sd">        dMRI data image.</span>
<span class="sd">    mask_img : nibabel.nifti1.Nifti1Image</span>
<span class="sd">        Brain mask image.</span>
<span class="sd">    gtab : dipy.core.gradients.GradientTable</span>
<span class="sd">        Gradient table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fdata_1</span><span class="p">,</span> <span class="n">fdata_2</span><span class="p">,</span> <span class="n">fbval</span><span class="p">,</span> <span class="n">fbvec</span><span class="p">,</span> <span class="n">fmask</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;DiB_217_lte_pte_ste&quot;</span><span class="p">)</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">fetch_DiB_217_lte_pte_ste</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">op</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;DiB_217_lte_pte_ste.nii.gz&quot;</span><span class="p">)):</span>
        <span class="n">data_img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;DiB_217_lte_pte_ste.nii.gz&quot;</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data_1</span><span class="p">,</span> <span class="n">affine</span> <span class="o">=</span> <span class="n">load_nifti</span><span class="p">(</span><span class="n">fdata_1</span><span class="p">)</span>
        <span class="n">data_2</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">load_nifti</span><span class="p">(</span><span class="n">fdata_2</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">data_1</span><span class="p">,</span> <span class="n">data_2</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">save_nifti</span><span class="p">(</span><span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;DiB_217_lte_pte_ste.nii.gz&quot;</span><span class="p">),</span> <span class="n">data</span><span class="p">,</span> <span class="n">affine</span><span class="p">)</span>
        <span class="n">data_img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">pjoin</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;DiB_217_lte_pte_ste.nii.gz&quot;</span><span class="p">))</span>
    <span class="n">mask_img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fmask</span><span class="p">)</span>
    <span class="n">bvals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fbval</span><span class="p">)</span>
    <span class="n">bvecs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fbvec</span><span class="p">)</span>
    <span class="n">btens</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">&quot;LTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">13</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;LTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;PTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;STE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;LTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;PTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;STE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;LTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;PTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;STE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;LTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">46</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;PTE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">46</span><span class="p">)]</span>
        <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;STE&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
    <span class="p">)</span>
    <span class="n">gtab</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="o">=</span><span class="n">bvecs</span><span class="p">,</span> <span class="n">btens</span><span class="o">=</span><span class="n">btens</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data_img</span><span class="p">,</span> <span class="n">mask_img</span><span class="p">,</span> <span class="n">gtab</span></div>



<div class="viewcode-block" id="extract_example_tracts">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.extract_example_tracts">[docs]</a>
<span class="k">def</span> <span class="nf">extract_example_tracts</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract 5 &#39;AF_L&#39;,&#39;CST_R&#39; and &#39;CC_ForcepsMajor&#39; trk files in out_dir</span>
<span class="sd">    folder.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    out_dir : str</span>
<span class="sd">        Folder in which to extract the files.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">fname</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;minimal_bundles&quot;</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_obj</span><span class="p">:</span>
        <span class="n">zip_obj</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span></div>



<div class="viewcode-block" id="read_five_af_bundles">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.read_five_af_bundles">[docs]</a>
<span class="k">def</span> <span class="nf">read_five_af_bundles</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load 5 small left arcuate fasciculus bundles.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bundles: list of ArraySequence</span>
<span class="sd">        List with loaded bundles.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">subjects</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;sub_1&quot;</span><span class="p">,</span> <span class="s2">&quot;sub_2&quot;</span><span class="p">,</span> <span class="s2">&quot;sub_3&quot;</span><span class="p">,</span> <span class="s2">&quot;sub_4&quot;</span><span class="p">,</span> <span class="s2">&quot;sub_5&quot;</span><span class="p">]</span>

    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">temp_dir</span><span class="p">:</span>
        <span class="n">extract_example_tracts</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">)</span>

        <span class="n">bundles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">subjects</span><span class="p">:</span>
            <span class="n">fname</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">,</span> <span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;AF_L.trk&quot;</span><span class="p">)</span>
            <span class="n">bundle_obj</span> <span class="o">=</span> <span class="n">load_trk</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s2">&quot;same&quot;</span><span class="p">,</span> <span class="n">bbox_valid_check</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">bundles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle_obj</span><span class="o">.</span><span class="n">streamlines</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">bundles</span></div>



<div class="viewcode-block" id="to_bids_description">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.to_bids_description">[docs]</a>
<span class="nd">@warning_for_keywords</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">to_bids_description</span><span class="p">(</span>
    <span class="n">path</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">fname</span><span class="o">=</span><span class="s2">&quot;dataset_description.json&quot;</span><span class="p">,</span> <span class="n">BIDSVersion</span><span class="o">=</span><span class="s2">&quot;1.4.0&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dumps a dict into a bids description at the given location&quot;&quot;&quot;</span>
    <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;BIDSVersion&quot;</span><span class="p">:</span> <span class="n">BIDSVersion</span><span class="p">})</span>
    <span class="n">desc_file</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">fname</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">desc_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span></div>



<div class="viewcode-block" id="fetch_hcp">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.fetch_hcp">[docs]</a>
<span class="k">def</span> <span class="nf">fetch_hcp</span><span class="p">(</span>
    <span class="n">subjects</span><span class="p">,</span>
    <span class="n">hcp_bucket</span><span class="o">=</span><span class="s2">&quot;hcp-openaccess&quot;</span><span class="p">,</span>
    <span class="n">profile_name</span><span class="o">=</span><span class="s2">&quot;hcp&quot;</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">study</span><span class="o">=</span><span class="s2">&quot;HCP_1200&quot;</span><span class="p">,</span>
    <span class="n">aws_access_key_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetch HCP diffusion data and arrange it in a manner that resembles the</span>
<span class="sd">    BIDS specification.</span>

<span class="sd">    See :footcite:p:`Gorgolewski2016` for details about the BIDS specification.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    subjects : list</span>
<span class="sd">        Each item is an integer, identifying one of the HCP subjects</span>
<span class="sd">    hcp_bucket : string, optional</span>
<span class="sd">        The name of the HCP S3 bucket.</span>
<span class="sd">    profile_name : string, optional</span>
<span class="sd">        The name of the AWS profile used for access.</span>
<span class="sd">    path : string, optional</span>
<span class="sd">        Path to save files into. Defaults to the value of the ``DIPY_HOME``</span>
<span class="sd">        environment variable is set; otherwise, defaults to ``$HOME/.dipy``.</span>
<span class="sd">    study : string, optional</span>
<span class="sd">        Which HCP study to grab.</span>
<span class="sd">    aws_access_key_id : string, optional</span>
<span class="sd">        AWS credentials to HCP AWS S3. Will only be used if `profile_name` is</span>
<span class="sd">        set to False.</span>
<span class="sd">    aws_secret_access_key : string, optional</span>
<span class="sd">        AWS credentials to HCP AWS S3. Will only be used if `profile_name` is</span>
<span class="sd">        set to False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict with remote and local names of these files,</span>
<span class="sd">    path to BIDS derivative dataset</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    To use this function with its default setting, you need to have a</span>
<span class="sd">    file &#39;~/.aws/credentials&#39;, that includes a section:</span>

<span class="sd">    [hcp]</span>
<span class="sd">    AWS_ACCESS_KEY_ID=XXXXXXXXXXXXXXXX</span>
<span class="sd">    AWS_SECRET_ACCESS_KEY=XXXXXXXXXXXXXXXX</span>

<span class="sd">    The keys are credentials that you can get from HCP</span>
<span class="sd">    (see https://wiki.humanconnectome.org/display/PublicData/How+To+Connect+to+Connectome+Data+via+AWS)</span>

<span class="sd">    Local filenames are changed to match our expected conventions.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. footbibliography::</span>
<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa: E501</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">has_boto3</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;&#39;fetch_hcp&#39; requires boto3 and it is&quot;</span>
            <span class="s2">&quot; not currently installed. Please install&quot;</span>
            <span class="s2">&quot;it using `pip install boto3`. &quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">profile_name</span><span class="p">:</span>
        <span class="n">boto3</span><span class="o">.</span><span class="n">setup_default_session</span><span class="p">(</span><span class="n">profile_name</span><span class="o">=</span><span class="n">profile_name</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">aws_access_key_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">aws_secret_access_key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">boto3</span><span class="o">.</span><span class="n">setup_default_session</span><span class="p">(</span>
            <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">aws_access_key_id</span><span class="p">,</span>
            <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">aws_secret_access_key</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Must provide either a `profile_name` or &quot;</span><span class="p">,</span>
            <span class="s2">&quot;both `aws_access_key_id` and &quot;</span><span class="p">,</span>
            <span class="s2">&quot;`aws_secret_access_key` as input to &#39;fetch_hcp&#39;&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">s3</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s2">&quot;s3&quot;</span><span class="p">)</span>
    <span class="n">bucket</span> <span class="o">=</span> <span class="n">s3</span><span class="o">.</span><span class="n">Bucket</span><span class="p">(</span><span class="n">hcp_bucket</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">op</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">)</span>
        <span class="n">my_path</span> <span class="o">=</span> <span class="n">dipy_home</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">my_path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="n">base_dir</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">my_path</span><span class="p">,</span> <span class="n">study</span><span class="p">,</span> <span class="s2">&quot;derivatives&quot;</span><span class="p">,</span> <span class="s2">&quot;hcp_pipeline&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">op</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">base_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">data_files</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># If user provided incorrect input, these are typical failures that</span>
    <span class="c1"># are easy to recover from:</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subjects</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
        <span class="n">subjects</span> <span class="o">=</span> <span class="p">[</span><span class="n">subjects</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">subject</span> <span class="ow">in</span> <span class="n">subjects</span><span class="p">:</span>
        <span class="n">sub_dir</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;sub-</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">op</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sub_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">pjoin</span><span class="p">(</span><span class="n">sub_dir</span><span class="p">,</span> <span class="s2">&quot;dwi&quot;</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">pjoin</span><span class="p">(</span><span class="n">sub_dir</span><span class="p">,</span> <span class="s2">&quot;anat&quot;</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">data_files</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="n">sub_dir</span><span class="p">,</span> <span class="s2">&quot;dwi&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;sub-</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">_dwi.bval&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">study</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">/T1w/Diffusion/bvals&quot;</span>
        <span class="p">)</span>
        <span class="n">data_files</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="n">sub_dir</span><span class="p">,</span> <span class="s2">&quot;dwi&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;sub-</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">_dwi.bvec&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">study</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">/T1w/Diffusion/bvecs&quot;</span>
        <span class="p">)</span>
        <span class="n">data_files</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="n">sub_dir</span><span class="p">,</span> <span class="s2">&quot;dwi&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;sub-</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">_dwi.nii.gz&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">study</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">/T1w/Diffusion/data.nii.gz&quot;</span>
        <span class="p">)</span>
        <span class="n">data_files</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="n">sub_dir</span><span class="p">,</span> <span class="s2">&quot;anat&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;sub-</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">_T1w.nii.gz&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">study</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">/T1w/T1w_acpc_dc.nii.gz&quot;</span>
        <span class="p">)</span>
        <span class="n">data_files</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="n">sub_dir</span><span class="p">,</span> <span class="s2">&quot;anat&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;sub-</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">_aparc+aseg_seg.nii.gz&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">study</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">/T1w/aparc+aseg.nii.gz&quot;</span>
        <span class="p">)</span>

    <span class="n">download_files</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">data_files</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">op</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
            <span class="n">download_files</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_files</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">download_files</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="k">with</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">download_files</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span> <span class="k">as</span> <span class="n">pbar</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">download_files</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">pbar</span><span class="o">.</span><span class="n">set_description_str</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading </span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">bucket</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="n">download_files</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">k</span><span class="p">)</span>
                <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="c1"># Create the BIDS dataset description file text</span>
    <span class="n">hcp_acknowledgements</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;Data were provided by the Human Connectome Project, WU-Minn Consortium&quot;</span>
        <span class="s2">&quot; (Principal Investigators: David Van Essen and Kamil Ugurbil; 1U54MH091657)&quot;</span>
        <span class="s2">&quot; funded by the 16 NIH Institutes and Centers that support the NIH Blueprint&quot;</span>
        <span class="s2">&quot; for Neuroscience Research; and by the McDonnell Center for Systems&quot;</span>
        <span class="s2">&quot; Neuroscience at Washington University.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">to_bids_description</span><span class="p">(</span>
        <span class="n">pjoin</span><span class="p">(</span><span class="n">my_path</span><span class="p">,</span> <span class="n">study</span><span class="p">),</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">study</span><span class="p">,</span>
            <span class="s2">&quot;Acknowledgements&quot;</span><span class="p">:</span> <span class="n">hcp_acknowledgements</span><span class="p">,</span>
            <span class="s2">&quot;Subjects&quot;</span><span class="p">:</span> <span class="n">subjects</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>

    <span class="c1"># Create the BIDS derivatives description file text</span>
    <span class="n">to_bids_description</span><span class="p">(</span>
        <span class="n">base_dir</span><span class="p">,</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">study</span><span class="p">,</span>
            <span class="s2">&quot;Acknowledgements&quot;</span><span class="p">:</span> <span class="n">hcp_acknowledgements</span><span class="p">,</span>
            <span class="s2">&quot;GeneratedBy&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;hcp_pipeline&quot;</span><span class="p">}],</span>
        <span class="p">},</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">data_files</span><span class="p">,</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">my_path</span><span class="p">,</span> <span class="n">study</span><span class="p">)</span></div>



<span class="k">def</span> <span class="nf">_hbn_downloader</span><span class="p">(</span><span class="n">my_path</span><span class="p">,</span> <span class="n">derivative</span><span class="p">,</span> <span class="n">subjects</span><span class="p">,</span> <span class="n">client</span><span class="p">):</span>
    <span class="n">base_dir</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">my_path</span><span class="p">,</span> <span class="s2">&quot;HBN&quot;</span><span class="p">,</span> <span class="s2">&quot;derivatives&quot;</span><span class="p">,</span> <span class="n">derivative</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">base_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">data_files</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">subject</span> <span class="ow">in</span> <span class="n">subjects</span><span class="p">:</span>
        <span class="n">initial_query</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_objects</span><span class="p">(</span>
            <span class="n">Bucket</span><span class="o">=</span><span class="s2">&quot;fcp-indi&quot;</span><span class="p">,</span> <span class="n">Prefix</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;data/Projects/HBN/BIDS_curated/sub-</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">/&quot;</span>
        <span class="p">)</span>
        <span class="n">ses</span> <span class="o">=</span> <span class="n">initial_query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Contents&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ses</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not find data for subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ses</span> <span class="o">=</span> <span class="n">ses</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;Key&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">5</span><span class="p">]</span>

        <span class="n">query</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_objects</span><span class="p">(</span>
            <span class="n">Bucket</span><span class="o">=</span><span class="s2">&quot;fcp-indi&quot;</span><span class="p">,</span>
            <span class="n">Prefix</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;data/Projects/HBN/BIDS_curated/derivatives/</span><span class="si">{</span><span class="n">derivative</span><span class="si">}</span><span class="s2">/sub-</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">/&quot;</span><span class="p">,</span>
        <span class="p">)</span>  <span class="c1"># noqa</span>
        <span class="n">query_content</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Contents&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">query_content</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not find derivatives data for subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">file_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">kk</span><span class="p">[</span><span class="s2">&quot;Key&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">kk</span> <span class="ow">in</span> <span class="n">query</span><span class="p">[</span><span class="s2">&quot;Contents&quot;</span><span class="p">]]</span>
        <span class="n">sub_dir</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;sub-</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">ses_dir</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sub_dir</span><span class="p">,</span> <span class="n">ses</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">derivative</span> <span class="o">==</span> <span class="s2">&quot;qsiprep&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sub_dir</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sub_dir</span><span class="p">,</span> <span class="s2">&quot;anat&quot;</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sub_dir</span><span class="p">,</span> <span class="s2">&quot;figures&quot;</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ses_dir</span><span class="p">,</span> <span class="s2">&quot;dwi&quot;</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ses_dir</span><span class="p">,</span> <span class="s2">&quot;anat&quot;</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">derivative</span> <span class="o">==</span> <span class="s2">&quot;afq&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sub_dir</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ses_dir</span><span class="p">,</span> <span class="s2">&quot;bundles&quot;</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ses_dir</span><span class="p">,</span> <span class="s2">&quot;clean_bundles&quot;</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ses_dir</span><span class="p">,</span> <span class="s2">&quot;ROIs&quot;</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ses_dir</span><span class="p">,</span> <span class="s2">&quot;tract_profile_plots&quot;</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ses_dir</span><span class="p">,</span> <span class="s2">&quot;viz_bundles&quot;</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">remote</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
            <span class="n">full</span> <span class="o">=</span> <span class="n">remote</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;Projects&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/BIDS_curated&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">local</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">my_path</span><span class="p">,</span> <span class="n">full</span><span class="p">)</span>
            <span class="n">data_files</span><span class="p">[</span><span class="n">local</span><span class="p">]</span> <span class="o">=</span> <span class="n">remote</span>

    <span class="n">download_files</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">data_files</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">op</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
            <span class="n">download_files</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_files</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">download_files</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="k">with</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">download_files</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span> <span class="k">as</span> <span class="n">pbar</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">download_files</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">pbar</span><span class="o">.</span><span class="n">set_description_str</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading </span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">client</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="s2">&quot;fcp-indi&quot;</span><span class="p">,</span> <span class="n">download_files</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">k</span><span class="p">)</span>
                <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="c1"># Create the BIDS dataset description file text</span>
    <span class="n">to_bids_description</span><span class="p">(</span>
        <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">my_path</span><span class="p">,</span> <span class="s2">&quot;HBN&quot;</span><span class="p">),</span> <span class="o">**</span><span class="p">{</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;HBN&quot;</span><span class="p">,</span> <span class="s2">&quot;Subjects&quot;</span><span class="p">:</span> <span class="n">subjects</span><span class="p">}</span>
    <span class="p">)</span>

    <span class="c1"># Create the BIDS derivatives description file text</span>
    <span class="n">to_bids_description</span><span class="p">(</span>
        <span class="n">base_dir</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;HBN&quot;</span><span class="p">,</span> <span class="s2">&quot;PipelineDescription&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;qsiprep&quot;</span><span class="p">}}</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">data_files</span>


<div class="viewcode-block" id="fetch_hbn">
<a class="viewcode-back" href="../../../reference/dipy.data.html#dipy.data.fetcher.fetch_hbn">[docs]</a>
<span class="k">def</span> <span class="nf">fetch_hbn</span><span class="p">(</span><span class="n">subjects</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">include_afq</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetch preprocessed data from the Healthy Brain Network POD2 study.</span>


<span class="sd">    See :footcite:p:`Alexander2017` and :footcite:p:`RichieHalford2022` for</span>
<span class="sd">    further details about the study and processing pipeline.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    subjects : list</span>
<span class="sd">        Identifiers of the subjects to download.</span>
<span class="sd">        For example: [&quot;NDARAA948VFH&quot;, &quot;NDAREK918EC2&quot;].</span>

<span class="sd">    path : string, optional</span>
<span class="sd">        Path to save files into. Defaults to the value of the ``DIPY_HOME``</span>
<span class="sd">        environment variable is set; otherwise, defaults to ``$HOME/.dipy``.</span>

<span class="sd">    include_afq : bool, optional</span>
<span class="sd">        Whether to include pyAFQ derivatives</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict with remote and local names of these files,</span>
<span class="sd">    path to BIDS derivative dataset</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. footbibliography::</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">has_boto3</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">botocore</span> <span class="kn">import</span> <span class="n">UNSIGNED</span>
        <span class="kn">from</span> <span class="nn">botocore.client</span> <span class="kn">import</span> <span class="n">Config</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">TripWire</span><span class="p">(</span>
            <span class="s2">&quot;The `fetch_hbn` function requires the boto3&quot;</span>
            <span class="o">+</span> <span class="s2">&quot; library, but that is not installed.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Anonymous access:</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;s3&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">Config</span><span class="p">(</span><span class="n">signature_version</span><span class="o">=</span><span class="n">UNSIGNED</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">op</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">dipy_home</span><span class="p">)</span>
        <span class="n">my_path</span> <span class="o">=</span> <span class="n">dipy_home</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">my_path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="c1"># If user provided incorrect input, these are typical failures that</span>
    <span class="c1"># are easy to recover from:</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subjects</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
        <span class="n">subjects</span> <span class="o">=</span> <span class="p">[</span><span class="n">subjects</span><span class="p">]</span>

    <span class="n">data_files</span> <span class="o">=</span> <span class="n">_hbn_downloader</span><span class="p">(</span><span class="n">my_path</span><span class="p">,</span> <span class="s2">&quot;qsiprep&quot;</span><span class="p">,</span> <span class="n">subjects</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">include_afq</span><span class="p">:</span>
        <span class="n">data_files</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">_hbn_downloader</span><span class="p">(</span><span class="n">my_path</span><span class="p">,</span> <span class="s2">&quot;afq&quot;</span><span class="p">,</span> <span class="n">subjects</span><span class="p">,</span> <span class="n">client</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">data_files</span><span class="p">,</span> <span class="n">pjoin</span><span class="p">(</span><span class="n">my_path</span><span class="p">,</span> <span class="s2">&quot;HBN&quot;</span><span class="p">)</span></div>

</pre></div>

                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  
<script type="module" src="../../../_static/scripts/grg-sphinx-theme.js"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><div>
  <h3 class="footer-heading">
    Never miss an update from us!
  </h3>
  <p class="footer-sub-heading">
    Don't worry! we are not going to spam you.
  </p>
  <div class="input-group mb-3 mar-t-10">
    <input type="text" class="form-control" placeholder="You email" aria-label="You email" id="grg-subscribe-email">
    <div class="input-group-append pointer" onclick="(document.getElementById('grg-subscribe-email').value)">
      <span class="input-group-text subscribe">Subscribe</span>
    </div>
  </div>  
  <ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/dipy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/dipymri" title="Twitter/X" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter/X</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/c/diffusionimaginginpython" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.linkedin.com/company/dipy/" title="LinkedIn" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-linkedin fa-lg" aria-hidden="true"></i>
            <span class="sr-only">LinkedIn</span></a>
        </li>
</ul>
</div></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="grid-3">
  
  <div>
    <h5 class="footer-heading">
      About
    </h5>
    <ul class="footer-section">
      
        
        <li class="pad-v-5">
          <a href="https://dipy.org/team">
            Developers
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="https://github.com/dipy/dipy/discussions" target="_blank" rel="noopener noreferrer">
            Support
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../../user_guide/installation.html">
            Download
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../../user_guide/getting_started.html">
            Get Started
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../../examples_built/index.html">
            Tutorials
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="https://www.youtube.com/c/diffusionimaginginpython" target="_blank" rel="noopener noreferrer">
            Videos
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
    </ul>
  </div>
  
  <div>
    <h5 class="footer-heading">
      Friends
    </h5>
    <ul class="footer-section">
      
        
        <li class="pad-v-5">
          <a href="http://nipy.org/" target="_blank" rel="noopener noreferrer">
            Nipy Projects
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="http://fury.gl/" target="_blank" rel="noopener noreferrer">
            FURY
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="http://nipy.org/nibabel" target="_blank" rel="noopener noreferrer">
            Nibabel
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="https://tortoise.nibib.nih.gov/" target="_blank" rel="noopener noreferrer">
            Tortoise
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
    </ul>
  </div>
  
  <div>
    <h5 class="footer-heading">
      Support
    </h5>
    <ul class="footer-section">
      
        
        <li class="pad-v-5">
          <a href="https://engineering.indiana.edu/" target="_blank" rel="noopener noreferrer">
            The department of Intelligent Systems Engineering of Indiana University
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="https://www.nibib.nih.gov/" target="_blank" rel="noopener noreferrer">
            The National Institute of Biomedical Imaging and Bioengineering, NIH
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="https://escience.washington.edu" target="_blank" rel="noopener noreferrer">
            The Gordon and Betty Moore Foundation and the Alfred P. Sloan Foundation, through the University of Washington eScience Institute Data Science Environment
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="https://summerofcode.withgoogle.com/" target="_blank" rel="noopener noreferrer">
            Google supported DIPY through the Google Summer of Code Program (2015-2024)
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
    </ul>
  </div>
  
</div></div>
      
    </div>
  
</div>

    <div class="copyright-text">
      <i class="fa-regular fa-copyright"></i> Copyright 2008-2024,DIPY developers. Created using Grg Sphinx Theme and PyData Sphinx Theme.
    </div>
  </footer>
  </body>
</html>