
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>DIPY &#8212; dipy 1.8.0dev0 documentation</title>
  
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/dipy.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

  
<link rel="stylesheet" href="../_static/styles/grg-sphinx-theme.css"/>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'reference/dipy.tracking';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="viz" href="dipy.viz.html" />
    <link rel="prev" title="stats" href="dipy.stats.html" />

  <meta name="keywords" content="DIPY, dMRI, DTI, DSI, diffusion MRI, Tensor,
  neuroimaging, python, neuroscience, Eleftherios, Garyfallidis, tractography,
  streamlines, fiber tracking">




  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
<nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    <p class="title logo__title">dipy 1.8.0dev0 documentation</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../documentation.html">
                        Documentation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../stateoftheart.html">
                        A quick overview of features
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

</nav>
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../documentation.html">
                        Documentation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../stateoftheart.html">
                        A quick overview of features
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">What is DIPY?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mission.html">Mission statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../data.html">Data</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../interfaces/index.html">DIPY Workflows Interfaces</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/basic_flow.html">Introduction to command line interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/data_fetch.html">Downloading DIPY datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/denoise_flow.html">Denoising</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/motion_flow.html">Between-Volumes Motion Correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/gibbs_unringing_flow.html">Gibbs Unringing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/registration_flow.html">Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/reconstruction_flow.html">Reconstruction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/tracking_flow.html">Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/buan_flow.html">BUndle ANalytics (BUAN) framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/bundle_segmentation_flow.html">White Matter Bundle Segmentation with RecoBundles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/bundlewarp_registration_flow.html">Nonrigid White Matter Bundle Registration with BundleWarp</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cite.html">Publications</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../devel/index.html">DIPY development</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../devel/intro.html">Introduction</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../devel/gitwash/index.html">Working with DIPY source code</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../devel/gitwash/git_intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../devel/gitwash/git_install.html">Install git</a></li>
<li class="toctree-l3"><a class="reference internal" href="../devel/gitwash/following_latest.html">Following the latest source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../devel/gitwash/patching.html">Making a patch</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../devel/gitwash/git_development.html">Git for development</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../devel/gitwash/forking_hell.html">Making your own copy (fork) of DIPY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../devel/gitwash/set_up_fork.html">Set up your fork</a></li>
<li class="toctree-l4"><a class="reference internal" href="../devel/gitwash/configure_git.html">Configure git</a></li>
<li class="toctree-l4"><a class="reference internal" href="../devel/gitwash/development_workflow.html">Development workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../devel/gitwash/maintainer_workflow.html">Maintainer workflow</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../devel/gitwash/git_resources.html">git resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../devel/make_release.html">A guide to making a DIPY release</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devel/commit_codes.html">Commit message codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devel/coding_style_guideline.html">DIPY Coding Style Guideline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devel/python3.html">Keeping code compatible with Pythons 2 and 3</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../theory/index.html">Theory and concepts</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../theory/spherical.html">Spherical coordinates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theory/sh_basis.html">Spherical Harmonic bases</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">API Reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dipy.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dipy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.align.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">align</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.boots.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">boots</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.core.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">core</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.data.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">data</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.denoise.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">denoise</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.direction.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">direction</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.io.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">io</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.nn.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nn</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.reconst.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">reconst</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.segment.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">segment</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.sims.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sims</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.stats.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stats</span></code></a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.viz.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">viz</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dipy.workflows.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference_cmd/index.html">Command Line Utilities Reference</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_align_affine.html">dipy_align_affine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_align_syn.html">dipy_align_syn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_apply_transform.html">dipy_apply_transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_buan_lmm.html">dipy_buan_lmm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_buan_profiles.html">dipy_buan_profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_bundlewarp.html">dipy_bundlewarp</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_correct_motion.html">dipy_correct_motion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_denoise_lpca.html">dipy_denoise_lpca</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_denoise_mppca.html">dipy_denoise_mppca</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_denoise_nlmeans.html">dipy_denoise_nlmeans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_denoise_patch2self.html">dipy_denoise_patch2self</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_evac_plus.html">dipy_evac_plus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_fetch.html">dipy_fetch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_fit_csa.html">dipy_fit_csa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_fit_csd.html">dipy_fit_csd</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_fit_dki.html">dipy_fit_dki</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_fit_dti.html">dipy_fit_dti</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_fit_ivim.html">dipy_fit_ivim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_fit_mapmri.html">dipy_fit_mapmri</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_gibbs_ringing.html">dipy_gibbs_ringing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_horizon.html">dipy_horizon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_info.html">dipy_info</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_labelsbundles.html">dipy_labelsbundles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_mask.html">dipy_mask</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_median_otsu.html">dipy_median_otsu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_recobundles.html">dipy_recobundles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_reslice.html">dipy_reslice</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_slr.html">dipy_slr</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_snr_in_cc.html">dipy_snr_in_cc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_split.html">dipy_split</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_track.html">dipy_track</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_cmd/dipy_track_pft.html">dipy_track_pft</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_changes.html">API changes</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../documentation.html" class="nav-link">Documentation</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">API Reference</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">DIPY</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
<section id="module-dipy.tracking">
<span id="tracking"></span><h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking</span></code><a class="headerlink" href="#module-dipy.tracking" title="Permalink to this heading">#</a></h1>
<p>Tracking objects</p>
<table class="autosummary longtable table autosummary">
<tbody>
</tbody>
</table>
<section id="module-dipy.tracking._utils">
<span id="module-tracking-utils"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking._utils</span></code><a class="headerlink" href="#module-dipy.tracking._utils" title="Permalink to this heading">#</a></h2>
<p>This is a helper module for dipy.tracking.utils.</p>
<table class="autosummary longtable table autosummary">
<tbody>
</tbody>
</table>
</section>
<section id="module-dipy.tracking.benchmarks">
<span id="module-tracking-benchmarks"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.benchmarks</span></code><a class="headerlink" href="#module-dipy.tracking.benchmarks" title="Permalink to this heading">#</a></h2>
<table class="autosummary longtable table autosummary">
<tbody>
</tbody>
</table>
</section>
<section id="module-dipy.tracking.benchmarks.bench_streamline">
<span id="module-tracking-benchmarks-bench-streamline"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.benchmarks.bench_streamline</span></code><a class="headerlink" href="#module-dipy.tracking.benchmarks.bench_streamline" title="Permalink to this heading">#</a></h2>
<p>Benchmarks for functions related to streamline</p>
<p>Run all benchmarks with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dipy.tracking</span> <span class="k">as</span> <span class="nn">dipytracking</span>
<span class="n">dipytracking</span><span class="o">.</span><span class="n">bench</span><span class="p">()</span>
</pre></div>
</div>
<p>With Pytest, Run this benchmark with:</p>
<blockquote>
<div><p>pytest -svv -c bench.ini /path/to/bench_streamline.py</p>
</div></blockquote>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.setup" title="dipy.tracking.benchmarks.bench_streamline.setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup</span></code></a>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.generate_streamlines" title="dipy.tracking.benchmarks.bench_streamline.generate_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">generate_streamlines</span></code></a>(nb_streamlines, ...)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.bench_set_number_of_points" title="dipy.tracking.benchmarks.bench_streamline.bench_set_number_of_points"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bench_set_number_of_points</span></code></a>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.bench_length" title="dipy.tracking.benchmarks.bench_streamline.bench_length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bench_length</span></code></a>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.bench_compress_streamlines" title="dipy.tracking.benchmarks.bench_streamline.bench_compress_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bench_compress_streamlines</span></code></a>()</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
<section id="module-dipy.tracking.learning">
<span id="module-tracking-learning"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.learning</span></code><a class="headerlink" href="#module-dipy.tracking.learning" title="Permalink to this heading">#</a></h2>
<p>Learning algorithms for tractography</p>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.learning.detect_corresponding_tracks" title="dipy.tracking.learning.detect_corresponding_tracks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">detect_corresponding_tracks</span></code></a>(indices, ...)</p></td>
<td><p>Detect corresponding tracks from list tracks1 to list tracks2 where tracks1 &amp; tracks2 are lists of tracks</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.learning.detect_corresponding_tracks_plus" title="dipy.tracking.learning.detect_corresponding_tracks_plus"><code class="xref py py-obj docutils literal notranslate"><span class="pre">detect_corresponding_tracks_plus</span></code></a>(indices, ...)</p></td>
<td><p>Detect corresponding tracks from 1 to 2 where tracks1 &amp; tracks2 are sequences of tracks</p></td>
</tr>
</tbody>
</table>
</section>
<section id="module-dipy.tracking.life">
<span id="module-tracking-life"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.life</span></code><a class="headerlink" href="#module-dipy.tracking.life" title="Permalink to this heading">#</a></h2>
<p>This is an implementation of the Linear Fascicle Evaluation (LiFE) algorithm
described in:</p>
<p>Pestilli, F., Yeatman, J, Rokem, A. Kay, K. and Wandell B.A. (2014). Validation
and statistical inference in living connectomes. Nature Methods 11:
1058-1063. doi:10.1038/nmeth.3098</p>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.life.LifeSignalMaker" title="dipy.tracking.life.LifeSignalMaker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LifeSignalMaker</span></code></a>(gtab[, evals, sphere])</p></td>
<td><p>A class for generating signals from streamlines in an efficient and speedy manner.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.life.FiberModel" title="dipy.tracking.life.FiberModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FiberModel</span></code></a>(gtab)</p></td>
<td><p>A class for representing and solving predictive models based on tractography solutions.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.life.FiberFit" title="dipy.tracking.life.FiberFit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FiberFit</span></code></a>(fiber_model, life_matrix, ...)</p></td>
<td><p>A fit of the LiFE model to diffusion data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.life.gradient" title="dipy.tracking.life.gradient"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gradient</span></code></a>(f)</p></td>
<td><p>Return the gradient of an N-dimensional array.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.life.streamline_gradients" title="dipy.tracking.life.streamline_gradients"><code class="xref py py-obj docutils literal notranslate"><span class="pre">streamline_gradients</span></code></a>(streamline)</p></td>
<td><p>Calculate the gradients of the streamline along the spatial dimension</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.life.grad_tensor" title="dipy.tracking.life.grad_tensor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grad_tensor</span></code></a>(grad, evals)</p></td>
<td><p>Calculate the 3 by 3 tensor for a given spatial gradient, given a canonical tensor shape (also as a 3 by 3), pointing at [1,0,0]</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.life.streamline_tensors" title="dipy.tracking.life.streamline_tensors"><code class="xref py py-obj docutils literal notranslate"><span class="pre">streamline_tensors</span></code></a>(streamline[, evals])</p></td>
<td><p>The tensors generated by this fiber.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.life.streamline_signal" title="dipy.tracking.life.streamline_signal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">streamline_signal</span></code></a>(streamline, gtab[, evals])</p></td>
<td><p>The signal from a single streamline estimate along each of its nodes.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.life.voxel2streamline" title="dipy.tracking.life.voxel2streamline"><code class="xref py py-obj docutils literal notranslate"><span class="pre">voxel2streamline</span></code></a>(streamline, affine[, ...])</p></td>
<td><p>Maps voxels to streamlines and streamlines to voxels, for setting up the LiFE equations matrix</p></td>
</tr>
</tbody>
</table>
</section>
<section id="module-dipy.tracking.local_tracking">
<span id="module-tracking-local-tracking"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.local_tracking</span></code><a class="headerlink" href="#module-dipy.tracking.local_tracking" title="Permalink to this heading">#</a></h2>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.local_tracking.LocalTracking" title="dipy.tracking.local_tracking.LocalTracking"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LocalTracking</span></code></a>(direction_getter, ...[, ...])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.local_tracking.ParticleFilteringTracking" title="dipy.tracking.local_tracking.ParticleFilteringTracking"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ParticleFilteringTracking</span></code></a>(direction_getter, ...)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
<section id="module-dipy.tracking.mesh">
<span id="module-tracking-mesh"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.mesh</span></code><a class="headerlink" href="#module-dipy.tracking.mesh" title="Permalink to this heading">#</a></h2>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.mesh.random_coordinates_from_surface" title="dipy.tracking.mesh.random_coordinates_from_surface"><code class="xref py py-obj docutils literal notranslate"><span class="pre">random_coordinates_from_surface</span></code></a>(...[, ...])</p></td>
<td><p>Generate random triangles_indices and trilinear_coord</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.mesh.seeds_from_surface_coordinates" title="dipy.tracking.mesh.seeds_from_surface_coordinates"><code class="xref py py-obj docutils literal notranslate"><span class="pre">seeds_from_surface_coordinates</span></code></a>(triangles, ...)</p></td>
<td><p>Compute points from triangles_indices and trilinear_coord</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.mesh.triangles_area" title="dipy.tracking.mesh.triangles_area"><code class="xref py py-obj docutils literal notranslate"><span class="pre">triangles_area</span></code></a>(triangles, vts)</p></td>
<td><p>Compute the local area of each triangle</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.mesh.vertices_to_triangles_values" title="dipy.tracking.mesh.vertices_to_triangles_values"><code class="xref py py-obj docutils literal notranslate"><span class="pre">vertices_to_triangles_values</span></code></a>(triangles, ...)</p></td>
<td><p>Change from values per vertex to values per triangle</p></td>
</tr>
</tbody>
</table>
</section>
<section id="module-dipy.tracking.metrics">
<span id="module-tracking-metrics"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.metrics</span></code><a class="headerlink" href="#module-dipy.tracking.metrics" title="Permalink to this heading">#</a></h2>
<p>Metrics for tracks, where tracks are arrays of points</p>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.winding" title="dipy.tracking.metrics.winding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">winding</span></code></a>(xyz)</p></td>
<td><p>Total turning angle projected.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.length" title="dipy.tracking.metrics.length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">length</span></code></a>(xyz[, along])</p></td>
<td><p>Euclidean length of track line</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.bytes" title="dipy.tracking.metrics.bytes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code></a>(xyz)</p></td>
<td><p>Size of track in bytes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.midpoint" title="dipy.tracking.metrics.midpoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">midpoint</span></code></a>(xyz)</p></td>
<td><p>Midpoint of track</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.downsample" title="dipy.tracking.metrics.downsample"><code class="xref py py-obj docutils literal notranslate"><span class="pre">downsample</span></code></a>(xyz[, n_pols])</p></td>
<td><p>downsample for a specific number of points along the streamline Uses the length of the curve.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.center_of_mass" title="dipy.tracking.metrics.center_of_mass"><code class="xref py py-obj docutils literal notranslate"><span class="pre">center_of_mass</span></code></a>(xyz)</p></td>
<td><p>Center of mass of streamline</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.magn" title="dipy.tracking.metrics.magn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">magn</span></code></a>(xyz[, n])</p></td>
<td><p>magnitude of vector</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.frenet_serret" title="dipy.tracking.metrics.frenet_serret"><code class="xref py py-obj docutils literal notranslate"><span class="pre">frenet_serret</span></code></a>(xyz)</p></td>
<td><p>Frenet-Serret Space Curve Invariants

Calculates the 3 vector and 2 scalar invariants of a space curve
defined by vectors r = (x,y,z).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.mean_curvature" title="dipy.tracking.metrics.mean_curvature"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mean_curvature</span></code></a>(xyz)</p></td>
<td><p>Calculates the mean curvature of a curve</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.mean_orientation" title="dipy.tracking.metrics.mean_orientation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mean_orientation</span></code></a>(xyz)</p></td>
<td><p>Calculates the mean orientation of a curve</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.generate_combinations" title="dipy.tracking.metrics.generate_combinations"><code class="xref py py-obj docutils literal notranslate"><span class="pre">generate_combinations</span></code></a>(items, n)</p></td>
<td><p>Combine sets of size n from items</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.longest_track_bundle" title="dipy.tracking.metrics.longest_track_bundle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">longest_track_bundle</span></code></a>(bundle[, sort])</p></td>
<td><p>Return longest track or length sorted track indices in <cite>bundle</cite></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.intersect_sphere" title="dipy.tracking.metrics.intersect_sphere"><code class="xref py py-obj docutils literal notranslate"><span class="pre">intersect_sphere</span></code></a>(xyz, center, radius)</p></td>
<td><p>If any segment of the track is intersecting with a sphere of specific center and radius return True otherwise False</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.inside_sphere" title="dipy.tracking.metrics.inside_sphere"><code class="xref py py-obj docutils literal notranslate"><span class="pre">inside_sphere</span></code></a>(xyz, center, radius)</p></td>
<td><p>If any point of the track is inside a sphere of a specified
center and radius return True otherwise False.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.inside_sphere_points" title="dipy.tracking.metrics.inside_sphere_points"><code class="xref py py-obj docutils literal notranslate"><span class="pre">inside_sphere_points</span></code></a>(xyz, center, radius)</p></td>
<td><p>If a track intersects with a sphere of a specified center and
radius return the points that are inside the sphere otherwise False.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.spline" title="dipy.tracking.metrics.spline"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spline</span></code></a>(xyz[, s, k, nest])</p></td>
<td><p>Generate B-splines as documented in <a class="reference external" href="http://www.scipy.org/Cookbook/Interpolation">http://www.scipy.org/Cookbook/Interpolation</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.startpoint" title="dipy.tracking.metrics.startpoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startpoint</span></code></a>(xyz)</p></td>
<td><p>First point of the track</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.endpoint" title="dipy.tracking.metrics.endpoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">endpoint</span></code></a>(xyz)</p></td>
<td><p>Parameters

xyz

array, shape(N,3)

Track.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.arbitrarypoint" title="dipy.tracking.metrics.arbitrarypoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">arbitrarypoint</span></code></a>(xyz, distance)</p></td>
<td><p>Select an arbitrary point along distance on the track (curve)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.principal_components" title="dipy.tracking.metrics.principal_components"><code class="xref py py-obj docutils literal notranslate"><span class="pre">principal_components</span></code></a>(xyz)</p></td>
<td><p>We use PCA to calculate the 3 principal directions for a track</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.midpoint2point" title="dipy.tracking.metrics.midpoint2point"><code class="xref py py-obj docutils literal notranslate"><span class="pre">midpoint2point</span></code></a>(xyz, p)</p></td>
<td><p>Calculate distance from midpoint of a curve to arbitrary point p</p></td>
</tr>
</tbody>
</table>
</section>
<section id="module-dipy.tracking.streamline">
<span id="module-tracking-streamline"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.streamline</span></code><a class="headerlink" href="#module-dipy.tracking.streamline" title="Permalink to this heading">#</a></h2>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamline.unlist_streamlines" title="dipy.tracking.streamline.unlist_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unlist_streamlines</span></code></a>(streamlines)</p></td>
<td><p>Return the streamlines not as a list but as an array and an offset</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamline.relist_streamlines" title="dipy.tracking.streamline.relist_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">relist_streamlines</span></code></a>(points, offsets)</p></td>
<td><p>Given a representation of a set of streamlines as a large array and an offsets array return the streamlines as a list of shorter arrays.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamline.center_streamlines" title="dipy.tracking.streamline.center_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">center_streamlines</span></code></a>(streamlines)</p></td>
<td><p>Move streamlines to the origin</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamline.deform_streamlines" title="dipy.tracking.streamline.deform_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">deform_streamlines</span></code></a>(streamlines, ...)</p></td>
<td><p>Apply deformation field to streamlines</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamline.transform_streamlines" title="dipy.tracking.streamline.transform_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transform_streamlines</span></code></a>(streamlines, mat[, ...])</p></td>
<td><p>Apply affine transformation to streamlines</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamline.select_random_set_of_streamlines" title="dipy.tracking.streamline.select_random_set_of_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_random_set_of_streamlines</span></code></a>(...[, rng])</p></td>
<td><p>Select a random set of streamlines</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamline.select_by_rois" title="dipy.tracking.streamline.select_by_rois"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_by_rois</span></code></a>(streamlines, affine, rois, ...)</p></td>
<td><p>Select streamlines based on logical relations with several regions of interest (ROIs).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamline.cluster_confidence" title="dipy.tracking.streamline.cluster_confidence"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cluster_confidence</span></code></a>(streamlines[, max_mdf, ...])</p></td>
<td><p>Computes the cluster confidence index (cci), which is an estimation of the support a set of streamlines gives to a particular pathway.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamline.orient_by_rois" title="dipy.tracking.streamline.orient_by_rois"><code class="xref py py-obj docutils literal notranslate"><span class="pre">orient_by_rois</span></code></a>(streamlines, affine, roi1, roi2)</p></td>
<td><p>Orient a set of streamlines according to a pair of ROIs</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamline.orient_by_streamline" title="dipy.tracking.streamline.orient_by_streamline"><code class="xref py py-obj docutils literal notranslate"><span class="pre">orient_by_streamline</span></code></a>(streamlines, standard)</p></td>
<td><p>Orient a bundle of streamlines to a standard streamline.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamline.values_from_volume" title="dipy.tracking.streamline.values_from_volume"><code class="xref py py-obj docutils literal notranslate"><span class="pre">values_from_volume</span></code></a>(data, streamlines, affine)</p></td>
<td><p>Extract values of a scalar/vector along each streamline from a volume.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamline.nbytes" title="dipy.tracking.streamline.nbytes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nbytes</span></code></a>(streamlines)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
<section id="module-dipy.tracking.utils">
<span id="id1"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.utils</span></code><a class="headerlink" href="#module-dipy.tracking.utils" title="Permalink to this heading">#</a></h2>
<p>Various tools related to creating and working with streamlines.</p>
<p>This module provides tools for targeting streamlines using ROIs, for making
connectivity matrices from whole brain fiber tracking and some other tools that
allow streamlines to interact with image data.</p>
<section id="important-notes">
<h3>Important Notes<a class="headerlink" href="#important-notes" title="Permalink to this heading">#</a></h3>
<p>Dipy uses affine matrices to represent the relationship between streamline
points, which are defined as points in a continuous 3d space, and image voxels,
which are typically arranged in a discrete 3d grid. Dipy uses a convention
similar to nifti files to interpret these affine matrices. This convention is
that the point at the center of voxel <code class="docutils literal notranslate"><span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code> is represented by the point
<code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code> where <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">1]</span> <span class="pre">=</span> <span class="pre">affine</span> <span class="pre">*</span> <span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k,</span> <span class="pre">1]</span></code>.  Also when the
phrase “voxel coordinates” is used, it is understood to be the same as <code class="docutils literal notranslate"><span class="pre">affine</span>
<span class="pre">=</span> <span class="pre">eye(4)</span></code>.</p>
<p>As an example, let’s take a 2d image where the affine is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
 <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
 <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]]</span>
</pre></div>
</div>
<p>The pixels of an image with this affine would look something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">------------</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">C</span> <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">----</span><span class="n">B</span><span class="o">--------</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">-------------</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">------------</span><span class="n">D</span>
</pre></div>
</div>
<p>And the letters A-D represent the following points in
“real world coordinates”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">]</span>
<span class="n">B</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">.5</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">]</span>
<span class="n">C</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">]</span>
<span class="n">D</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">2.5</span><span class="p">,</span>  <span class="mf">5.</span><span class="p">]</span>
</pre></div>
</div>
</section>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.density_map" title="dipy.tracking.utils.density_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">density_map</span></code></a>(streamlines, affine, vol_dims)</p></td>
<td><p>Count the number of unique streamlines that pass through each voxel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.connectivity_matrix" title="dipy.tracking.utils.connectivity_matrix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connectivity_matrix</span></code></a>(streamlines, affine, ...)</p></td>
<td><p>Count the streamlines that start and end at each label pair.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.ndbincount" title="dipy.tracking.utils.ndbincount"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndbincount</span></code></a>(x[, weights, shape])</p></td>
<td><p>Like bincount, but for nd-indices.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.reduce_labels" title="dipy.tracking.utils.reduce_labels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reduce_labels</span></code></a>(label_volume)</p></td>
<td><p>Reduce an array of labels to the integers from 0 to n with smallest possible n.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.subsegment" title="dipy.tracking.utils.subsegment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subsegment</span></code></a>(streamlines, max_segment_length)</p></td>
<td><p>Split the segments of the streamlines into small segments.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.seeds_from_mask" title="dipy.tracking.utils.seeds_from_mask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">seeds_from_mask</span></code></a>(mask, affine[, density])</p></td>
<td><p>Create seeds for fiber tracking from a binary mask.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.random_seeds_from_mask" title="dipy.tracking.utils.random_seeds_from_mask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">random_seeds_from_mask</span></code></a>(mask, affine[, ...])</p></td>
<td><p>Create randomly placed seeds for fiber tracking from a binary mask.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.target" title="dipy.tracking.utils.target"><code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code></a>(streamlines, affine, target_mask[, ...])</p></td>
<td><p>Filter streamlines based on whether or not they pass through an ROI.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.target_line_based" title="dipy.tracking.utils.target_line_based"><code class="xref py py-obj docutils literal notranslate"><span class="pre">target_line_based</span></code></a>(streamlines, affine, ...)</p></td>
<td><p>Filter streamlines based on whether or not they pass through a ROI, using a line-based algorithm.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.streamline_near_roi" title="dipy.tracking.utils.streamline_near_roi"><code class="xref py py-obj docutils literal notranslate"><span class="pre">streamline_near_roi</span></code></a>(streamline, roi_coords, tol)</p></td>
<td><p>Is a streamline near an ROI.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.near_roi" title="dipy.tracking.utils.near_roi"><code class="xref py py-obj docutils literal notranslate"><span class="pre">near_roi</span></code></a>(streamlines, affine, region_of_interest)</p></td>
<td><p>Provide filtering criteria for a set of streamlines based on whether they fall within a tolerance distance from an ROI.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.length" title="dipy.tracking.utils.length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">length</span></code></a>(streamlines)</p></td>
<td><p>Calculate the lengths of many streamlines in a bundle.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.unique_rows" title="dipy.tracking.utils.unique_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unique_rows</span></code></a>(in_array[, dtype])</p></td>
<td><p>Find the unique rows in an array.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.transform_tracking_output" title="dipy.tracking.utils.transform_tracking_output"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transform_tracking_output</span></code></a>(tracking_output, ...)</p></td>
<td><p>Apply a linear transformation, given by affine, to streamlines.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.reduce_rois" title="dipy.tracking.utils.reduce_rois"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reduce_rois</span></code></a>(rois, include)</p></td>
<td><p>Reduce multiple ROIs to one inclusion and one exclusion ROI.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.path_length" title="dipy.tracking.utils.path_length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">path_length</span></code></a>(streamlines, affine, aoi[, ...])</p></td>
<td><p>Compute the shortest path, along any streamline, between aoi and each voxel.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.max_angle_from_curvature" title="dipy.tracking.utils.max_angle_from_curvature"><code class="xref py py-obj docutils literal notranslate"><span class="pre">max_angle_from_curvature</span></code></a>(...)</p></td>
<td><p>Get the maximum deviation angle from the minimum radius curvature.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.min_radius_curvature_from_angle" title="dipy.tracking.utils.min_radius_curvature_from_angle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">min_radius_curvature_from_angle</span></code></a>(max_angle, ...)</p></td>
<td><p>Get minimum radius of curvature from a deviation angle.</p></td>
</tr>
</tbody>
</table>
<section id="setup">
<h3>setup<a class="headerlink" href="#setup" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.benchmarks.bench_streamline.setup">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.benchmarks.bench_streamline.</span></span><span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.setup" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="generate-streamlines">
<h3>generate_streamlines<a class="headerlink" href="#generate-streamlines" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.benchmarks.bench_streamline.generate_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.benchmarks.bench_streamline.</span></span><span class="sig-name descname"><span class="pre">generate_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nb_streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_nb_points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_nb_points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.generate_streamlines" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="bench-set-number-of-points">
<h3>bench_set_number_of_points<a class="headerlink" href="#bench-set-number-of-points" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.benchmarks.bench_streamline.bench_set_number_of_points">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.benchmarks.bench_streamline.</span></span><span class="sig-name descname"><span class="pre">bench_set_number_of_points</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.bench_set_number_of_points" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="bench-length">
<h3>bench_length<a class="headerlink" href="#bench-length" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.benchmarks.bench_streamline.bench_length">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.benchmarks.bench_streamline.</span></span><span class="sig-name descname"><span class="pre">bench_length</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.bench_length" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="bench-compress-streamlines">
<h3>bench_compress_streamlines<a class="headerlink" href="#bench-compress-streamlines" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.benchmarks.bench_streamline.bench_compress_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.benchmarks.bench_streamline.</span></span><span class="sig-name descname"><span class="pre">bench_compress_streamlines</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.bench_compress_streamlines" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="detect-corresponding-tracks">
<h3>detect_corresponding_tracks<a class="headerlink" href="#detect-corresponding-tracks" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.learning.detect_corresponding_tracks">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.learning.</span></span><span class="sig-name descname"><span class="pre">detect_corresponding_tracks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracks1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracks2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.learning.detect_corresponding_tracks" title="Permalink to this definition">#</a></dt>
<dd><p>Detect corresponding tracks from list tracks1 to list tracks2
where tracks1 &amp; tracks2 are lists of tracks</p>
<section id="parameters">
<h4>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>indices<span class="classifier">sequence</span></dt><dd><p>of indices of tracks1 that are to be detected in tracks2</p>
</dd>
<dt>tracks1<span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</dd>
<dt>tracks2<span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (M1,3) .. (Mm,3)</p>
</dd>
</dl>
</section>
<section id="returns">
<h4>Returns<a class="headerlink" href="#returns" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>track2track<span class="classifier">array (N,2) where N is len(indices) of int</span></dt><dd><p>it shows the correspondence in the following way:
the first column is the current index in tracks1
the second column is the corresponding index in tracks2</p>
</dd>
</dl>
</section>
<section id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dipy.tracking.learning</span> <span class="k">as</span> <span class="nn">tl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle1</span> <span class="o">=</span> <span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle2</span> <span class="o">=</span> <span class="p">[</span><span class="n">B</span><span class="p">,</span> <span class="n">A</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">tl</span><span class="o">.</span><span class="n">detect_corresponding_tracks</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">bundle1</span><span class="p">,</span> <span class="n">bundle2</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="notes">
<h4>Notes<a class="headerlink" href="#notes" title="Permalink to this heading">#</a></h4>
<p>To find the corresponding tracks we use mam_distances with ‘avg’ option.
Then we calculate the argmin of all the calculated distances and return it
for every index. (See 3rd column of arr in the example given below.)</p>
</section>
</dd></dl>

</section>
<section id="detect-corresponding-tracks-plus">
<h3>detect_corresponding_tracks_plus<a class="headerlink" href="#detect-corresponding-tracks-plus" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.learning.detect_corresponding_tracks_plus">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.learning.</span></span><span class="sig-name descname"><span class="pre">detect_corresponding_tracks_plus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracks1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracks2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.learning.detect_corresponding_tracks_plus" title="Permalink to this definition">#</a></dt>
<dd><p>Detect corresponding tracks from 1 to 2 where tracks1 &amp; tracks2 are
sequences of tracks</p>
<section id="id2">
<h4>Parameters<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>indices<span class="classifier">sequence</span></dt><dd><p>of indices of tracks1 that are to be detected in tracks2</p>
</dd>
<dt>tracks1<span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</dd>
<dt>indices2<span class="classifier">sequence</span></dt><dd><p>of indices of tracks2 in the initial brain</p>
</dd>
<dt>tracks2<span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (M1,3) .. (Mm,3)</p>
</dd>
</dl>
</section>
<section id="id3">
<h4>Returns<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>track2track<span class="classifier">array (N,2) where N is len(indices)</span></dt><dd><p>of int showing the correspondence in th following way
the first column is the current index of tracks1
the second column is the corresponding index in tracks2</p>
</dd>
</dl>
</section>
<section id="id4">
<h4>Examples<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dipy.tracking.learning</span> <span class="k">as</span> <span class="nn">tl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle1</span> <span class="o">=</span> <span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle2</span> <span class="o">=</span> <span class="p">[</span><span class="n">B</span><span class="p">,</span> <span class="n">A</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices2</span> <span class="o">=</span> <span class="n">indices</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">tl</span><span class="o">.</span><span class="n">detect_corresponding_tracks_plus</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">bundle1</span><span class="p">,</span> <span class="n">indices2</span><span class="p">,</span> <span class="n">bundle2</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id5">
<h4>Notes<a class="headerlink" href="#id5" title="Permalink to this heading">#</a></h4>
<p>To find the corresponding tracks we use mam_distances with ‘avg’ option.
Then we calculate the argmin of all the calculated distances and return it
for every index. (See 3rd column of arr in the example given below.)</p>
</section>
<section id="see-also">
<h4>See Also<a class="headerlink" href="#see-also" title="Permalink to this heading">#</a></h4>
<p>distances.mam_distances</p>
</section>
</dd></dl>

</section>
<section id="lifesignalmaker">
<h3><a class="reference internal" href="#dipy.tracking.life.LifeSignalMaker" title="dipy.tracking.life.LifeSignalMaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">LifeSignalMaker</span></code></a><a class="headerlink" href="#lifesignalmaker" title="Permalink to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.life.LifeSignalMaker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">LifeSignalMaker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gtab</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.001,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sphere</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.LifeSignalMaker" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A class for generating signals from streamlines in an efficient and speedy
manner.</p>
<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.life.LifeSignalMaker.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gtab</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.001,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sphere</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.LifeSignalMaker.__init__" title="Permalink to this definition">#</a></dt>
<dd><p>Initialize a signal maker</p>
<section id="id6">
<h4>Parameters<a class="headerlink" href="#id6" title="Permalink to this heading">#</a></h4>
<dl>
<dt>gtab<span class="classifier">GradientTable class instance</span></dt><dd><p>The gradient table on which the signal is calculated.</p>
</dd>
<dt>evals<span class="classifier">array-like of 3 items, optional</span></dt><dd><p>The eigenvalues of the canonical tensor to use in calculating the
signal.</p>
</dd>
<dt>sphere<span class="classifier"><cite>dipy.core.Sphere</cite> class instance, optional</span></dt><dd><p>The discrete sphere to use as an approximation for the continuous
sphere on which the signal is represented. If integer - we will use
an instance of one of the symmetric spheres cached in
<cite>dps.get_sphere</cite>. If a ‘dipy.core.Sphere’ class instance is
provided, we will use this object. Default: the <a class="reference internal" href="dipy.data.html#module-dipy.data" title="dipy.data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dipy.data</span></code></a>
symmetric sphere with 724 vertices</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.life.LifeSignalMaker.calc_signal">
<span class="sig-name descname"><span class="pre">calc_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.LifeSignalMaker.calc_signal" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.life.LifeSignalMaker.streamline_signal">
<span class="sig-name descname"><span class="pre">streamline_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.LifeSignalMaker.streamline_signal" title="Permalink to this definition">#</a></dt>
<dd><p>Approximate the signal for a given streamline</p>
</dd></dl>

</dd></dl>

</section>
<section id="fibermodel">
<h3><a class="reference internal" href="#dipy.tracking.life.FiberModel" title="dipy.tracking.life.FiberModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">FiberModel</span></code></a><a class="headerlink" href="#fibermodel" title="Permalink to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.life.FiberModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">FiberModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gtab</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberModel" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.html#dipy.reconst.base.ReconstModel" title="dipy.reconst.base.ReconstModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReconstModel</span></code></a></p>
<p>A class for representing and solving predictive models based on
tractography solutions.</p>
<section id="id7">
<h4>Notes<a class="headerlink" href="#id7" title="Permalink to this heading">#</a></h4>
<p>This is an implementation of the LiFE model described in <a class="footnote-reference brackets" href="#id32" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
<dl class="simple">
<dt>[1] Pestilli, F., Yeatman, J, Rokem, A. Kay, K. and Wandell</dt><dd><p>B.A. (2014). Validation and statistical inference in living
connectomes. Nature Methods.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.life.FiberModel.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gtab</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberModel.__init__" title="Permalink to this definition">#</a></dt>
<dd><section id="id9">
<h5>Parameters<a class="headerlink" href="#id9" title="Permalink to this heading">#</a></h5>
<p>gtab : a GradientTable class instance</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.life.FiberModel.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.001,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sphere</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberModel.fit" title="Permalink to this definition">#</a></dt>
<dd><p>Fit the LiFE FiberModel for data and a set of streamlines associated
with this data</p>
<section id="id10">
<h5>Parameters<a class="headerlink" href="#id10" title="Permalink to this heading">#</a></h5>
<dl class="simple">
<dt>data<span class="classifier">4D array</span></dt><dd><p>Diffusion-weighted data</p>
</dd>
<dt>streamline<span class="classifier">list</span></dt><dd><p>A bunch of streamlines</p>
</dd>
<dt>affine<span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt>evals<span class="classifier">array-like (optional)</span></dt><dd><p>The eigenvalues of the tensor response function used in
constructing the model signal. Default: [0.001, 0, 0]</p>
</dd>
<dt>sphere: <cite>dipy.core.Sphere</cite> instance or False, optional</dt><dd><p>Whether to approximate (and cache) the signal on a discrete
sphere. This may confer a significant speed-up in setting up the
problem, but is not as accurate. If <cite>False</cite>, we use the exact
gradients along the streamlines to calculate the matrix, instead of
an approximation.</p>
</dd>
</dl>
</section>
<section id="id11">
<h5>Returns<a class="headerlink" href="#id11" title="Permalink to this heading">#</a></h5>
<p>FiberFit class instance</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.life.FiberModel.setup">
<span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.001,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sphere</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberModel.setup" title="Permalink to this definition">#</a></dt>
<dd><p>Set up the necessary components for the LiFE model: the matrix of
fiber-contributions to the DWI signal, and the coordinates of voxels
for which the equations will be solved</p>
<section id="id12">
<h5>Parameters<a class="headerlink" href="#id12" title="Permalink to this heading">#</a></h5>
<dl class="simple">
<dt>streamline<span class="classifier">list</span></dt><dd><p>Streamlines, each is an array of shape (n, 3)</p>
</dd>
<dt>affine<span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt>evals<span class="classifier">array-like (3 items, optional)</span></dt><dd><p>The eigenvalues of the canonical tensor used as a response
function. Default:[0.001, 0, 0].</p>
</dd>
<dt>sphere: <cite>dipy.core.Sphere</cite> instance, optional</dt><dd><p>Whether to approximate (and cache) the signal on a discrete
sphere. This may confer a significant speed-up in setting up the
problem, but is not as accurate. If <cite>False</cite>, we use the exact
gradients along the streamlines to calculate the matrix, instead of
an approximation. Defaults to use the 724-vertex symmetric sphere
from <a class="reference internal" href="dipy.data.html#module-dipy.data" title="dipy.data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dipy.data</span></code></a></p>
</dd>
</dl>
</section>
</dd></dl>

</section>
</dd></dl>

</section>
<section id="fiberfit">
<h3><a class="reference internal" href="#dipy.tracking.life.FiberFit" title="dipy.tracking.life.FiberFit"><code class="xref py py-class docutils literal notranslate"><span class="pre">FiberFit</span></code></a><a class="headerlink" href="#fiberfit" title="Permalink to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.life.FiberFit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">FiberFit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fiber_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">life_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vox_coords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_fit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weighted_signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b0_signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean_sig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vox_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberFit" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.html#dipy.reconst.base.ReconstFit" title="dipy.reconst.base.ReconstFit"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReconstFit</span></code></a></p>
<p>A fit of the LiFE model to diffusion data</p>
<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.life.FiberFit.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fiber_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">life_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vox_coords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_fit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weighted_signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b0_signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean_sig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vox_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberFit.__init__" title="Permalink to this definition">#</a></dt>
<dd><section id="id13">
<h4>Parameters<a class="headerlink" href="#id13" title="Permalink to this heading">#</a></h4>
<p>fiber_model : A FiberModel class instance</p>
<p>params : the parameters derived from a fit of the model to the data.</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.life.FiberFit.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gtab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">S0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberFit.predict" title="Permalink to this definition">#</a></dt>
<dd><p>Predict the signal</p>
<section id="id14">
<h4>Parameters<a class="headerlink" href="#id14" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>gtab<span class="classifier">GradientTable</span></dt><dd><p>Default: use self.gtab</p>
</dd>
<dt>S0<span class="classifier">float or array</span></dt><dd><p>The non-diffusion-weighted signal in the voxels for which a
prediction is made. Default: use self.b0_signal</p>
</dd>
</dl>
</section>
<section id="id15">
<h4>Returns<a class="headerlink" href="#id15" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>prediction<span class="classifier">ndarray of shape (voxels, bvecs)</span></dt><dd><p>An array with a prediction of the signal in each voxel/direction</p>
</dd>
</dl>
</section>
</dd></dl>

</dd></dl>

</section>
<section id="gradient">
<h3>gradient<a class="headerlink" href="#gradient" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.life.gradient">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">gradient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.gradient" title="Permalink to this definition">#</a></dt>
<dd><p>Return the gradient of an N-dimensional array.</p>
<p>The gradient is computed using central differences in the interior
and first differences at the boundaries. The returned gradient hence has
the same shape as the input array.</p>
<section id="id16">
<h4>Parameters<a class="headerlink" href="#id16" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>f<span class="classifier">array_like</span></dt><dd><p>An N-dimensional array containing samples of a scalar function.</p>
</dd>
</dl>
</section>
<section id="id17">
<h4>Returns<a class="headerlink" href="#id17" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>gradient<span class="classifier">ndarray</span></dt><dd><p>N arrays of the same shape as <cite>f</cite> giving the derivative of <cite>f</cite> with
respect to each dimension.</p>
</dd>
</dl>
</section>
<section id="id18">
<h4>Examples<a class="headerlink" href="#id18" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">16</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gradient</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">array([ 1. ,  1.5,  2.5,  3.5,  4.5,  5. ])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gradient</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">))</span>
<span class="go">[array([[ 2.,  2., -1.],</span>
<span class="go">       [ 2.,  2., -1.]]), array([[ 1. ,  2.5,  4. ],</span>
<span class="go">       [ 1. ,  1. ,  1. ]])]</span>
</pre></div>
</div>
</section>
<section id="id19">
<h4>Notes<a class="headerlink" href="#id19" title="Permalink to this heading">#</a></h4>
<p>This is a simplified implementation of gradient that is part of numpy
1.8. In order to mitigate the effects of changes added to this
implementation in version 1.9 of numpy, we include this implementation
here.</p>
</section>
</dd></dl>

</section>
<section id="streamline-gradients">
<h3>streamline_gradients<a class="headerlink" href="#streamline-gradients" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.life.streamline_gradients">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">streamline_gradients</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.streamline_gradients" title="Permalink to this definition">#</a></dt>
<dd><p>Calculate the gradients of the streamline along the spatial dimension</p>
<section id="id20">
<h4>Parameters<a class="headerlink" href="#id20" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamline<span class="classifier">array-like of shape (n, 3)</span></dt><dd><p>The 3d coordinates of a single streamline</p>
</dd>
</dl>
</section>
<section id="id21">
<h4>Returns<a class="headerlink" href="#id21" title="Permalink to this heading">#</a></h4>
<p>Array of shape (3, n): Spatial gradients along the length of the
streamline.</p>
</section>
</dd></dl>

</section>
<section id="grad-tensor">
<h3>grad_tensor<a class="headerlink" href="#grad-tensor" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.life.grad_tensor">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">grad_tensor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.grad_tensor" title="Permalink to this definition">#</a></dt>
<dd><p>Calculate the 3 by 3 tensor for a given spatial gradient, given a canonical
tensor shape (also as a 3 by 3), pointing at [1,0,0]</p>
<section id="id22">
<h4>Parameters<a class="headerlink" href="#id22" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>grad<span class="classifier">1d array of shape (3,)</span></dt><dd><p>The spatial gradient (e.g between two nodes of a streamline).</p>
</dd>
<dt>evals: 1d array of shape (3,)</dt><dd><p>The eigenvalues of a canonical tensor to be used as a response
function.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="streamline-tensors">
<h3>streamline_tensors<a class="headerlink" href="#streamline-tensors" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.life.streamline_tensors">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">streamline_tensors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.001,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.streamline_tensors" title="Permalink to this definition">#</a></dt>
<dd><p>The tensors generated by this fiber.</p>
<section id="id23">
<h4>Parameters<a class="headerlink" href="#id23" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamline<span class="classifier">array-like of shape (n, 3)</span></dt><dd><p>The 3d coordinates of a single streamline</p>
</dd>
<dt>evals<span class="classifier">iterable with three entries, optional</span></dt><dd><p>The estimated eigenvalues of a single fiber tensor.</p>
</dd>
</dl>
</section>
<section id="id24">
<h4>Returns<a class="headerlink" href="#id24" title="Permalink to this heading">#</a></h4>
<p>An n_nodes by 3 by 3 array with the tensor for each node in the fiber.</p>
</section>
<section id="id25">
<h4>Notes<a class="headerlink" href="#id25" title="Permalink to this heading">#</a></h4>
<p>Estimates of the radial/axial diffusivities may rely on
empirical measurements (for example, the AD in the Corpus Callosum), or
may be based on a biophysical model of some kind.</p>
</section>
</dd></dl>

</section>
<section id="streamline-signal">
<h3>streamline_signal<a class="headerlink" href="#streamline-signal" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.life.streamline_signal">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">streamline_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gtab</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.001,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.streamline_signal" title="Permalink to this definition">#</a></dt>
<dd><p>The signal from a single streamline estimate along each of its nodes.</p>
<section id="id26">
<h4>Parameters<a class="headerlink" href="#id26" title="Permalink to this heading">#</a></h4>
<p>streamline : a single streamline</p>
<p>gtab : GradientTable class instance</p>
<dl class="simple">
<dt>evals<span class="classifier">array-like of length 3, optional</span></dt><dd><p>The eigenvalues of the canonical tensor used as an estimate of the
signal generated by each node of the streamline.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="voxel2streamline">
<h3>voxel2streamline<a class="headerlink" href="#voxel2streamline" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.life.voxel2streamline">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">voxel2streamline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.voxel2streamline" title="Permalink to this definition">#</a></dt>
<dd><p>Maps voxels to streamlines and streamlines to voxels, for setting up
the LiFE equations matrix</p>
<section id="id27">
<h4>Parameters<a class="headerlink" href="#id27" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamline<span class="classifier">list</span></dt><dd><p>A collection of streamlines, each n by 3, with n being the number of
nodes in the fiber.</p>
</dd>
<dt>affine<span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt>unique_idx<span class="classifier">array (optional).</span></dt><dd><p>The unique indices in the streamlines</p>
</dd>
</dl>
</section>
<section id="id28">
<h4>Returns<a class="headerlink" href="#id28" title="Permalink to this heading">#</a></h4>
<p>v2f, v2fn : tuple of dicts</p>
<p>The first dict in the tuple answers the question: Given a voxel (from
the unique indices in this model), which fibers pass through it?</p>
<p>The second answers the question: Given a streamline, for each voxel that
this streamline passes through, which nodes of that streamline are in that
voxel?</p>
</section>
</dd></dl>

</section>
<section id="localtracking">
<h3><a class="reference internal" href="#dipy.tracking.local_tracking.LocalTracking" title="dipy.tracking.local_tracking.LocalTracking"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalTracking</span></code></a><a class="headerlink" href="#localtracking" title="Permalink to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.local_tracking.LocalTracking">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.local_tracking.</span></span><span class="sig-name descname"><span class="pre">LocalTracking</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">direction_getter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopping_criterion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seeds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cross</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxlen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minlen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixedstep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_seeds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local_tracking.LocalTracking" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.local_tracking.LocalTracking.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">direction_getter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopping_criterion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seeds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cross</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxlen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minlen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixedstep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_seeds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local_tracking.LocalTracking.__init__" title="Permalink to this definition">#</a></dt>
<dd><p>Creates streamlines by using local fiber-tracking.</p>
<section id="id29">
<h4>Parameters<a class="headerlink" href="#id29" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>direction_getter<span class="classifier">instance of DirectionGetter</span></dt><dd><p>Used to get directions for fiber tracking.</p>
</dd>
<dt>stopping_criterion<span class="classifier">instance of StoppingCriterion</span></dt><dd><p>Identifies endpoints and invalid points to inform tracking.</p>
</dd>
<dt>seeds<span class="classifier">array (N, 3), optional</span></dt><dd><p>Points to seed the tracking. Seed points should be given in point
space of the track (see <code class="docutils literal notranslate"><span class="pre">affine</span></code>).</p>
</dd>
<dt>affine<span class="classifier">array (4, 4), optional</span></dt><dd><p>Coordinate space for the streamline point with respect to voxel
indices of input data. This affine can contain scaling, rotational,
and translational components but should not contain any shearing.
An identity matrix can be used to generate streamlines in “voxel
coordinates” as long as isotropic voxels were used to acquire the
data.</p>
</dd>
<dt>step_size<span class="classifier">float, optional</span></dt><dd><p>Step size used for tracking.</p>
</dd>
<dt>max_cross<span class="classifier">int or None, optional</span></dt><dd><p>The maximum number of direction to track from each seed in crossing
voxels. By default all initial directions are tracked.</p>
</dd>
<dt>maxlen<span class="classifier">int, optional</span></dt><dd><p>Maximum number of steps to track from seed. Used to prevent
infinite loops.</p>
</dd>
<dt>minlen<span class="classifier">int, optional</span></dt><dd><p>Minimum number of steps to track from seed. Can be useful
for filtering out useless streamlines.</p>
</dd>
<dt>fixedstep<span class="classifier">bool, optional</span></dt><dd><p>If true, a fixed stepsize is used, otherwise a variable step size
is used.</p>
</dd>
<dt>return_all<span class="classifier">bool, optional</span></dt><dd><p>If true, return all generated streamlines, otherwise only
streamlines reaching end points or exiting the image.</p>
</dd>
<dt>random_seed<span class="classifier">int, optional</span></dt><dd><p>The seed for the random seed generator (numpy.random.seed and
random.seed).</p>
</dd>
<dt>save_seeds<span class="classifier">bool, optional</span></dt><dd><p>If True, return seeds alongside streamlines</p>
</dd>
</dl>
</section>
</dd></dl>

</dd></dl>

</section>
<section id="particlefilteringtracking">
<h3><a class="reference internal" href="#dipy.tracking.local_tracking.ParticleFilteringTracking" title="dipy.tracking.local_tracking.ParticleFilteringTracking"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParticleFilteringTracking</span></code></a><a class="headerlink" href="#particlefilteringtracking" title="Permalink to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.local_tracking.ParticleFilteringTracking">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.local_tracking.</span></span><span class="sig-name descname"><span class="pre">ParticleFilteringTracking</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">direction_getter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopping_criterion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seeds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cross</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxlen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minlen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pft_back_tracking_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pft_front_tracking_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pft_max_trial</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">particle_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_seeds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_wm_pve_before_stopping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local_tracking.ParticleFilteringTracking" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.tracking.local_tracking.LocalTracking" title="dipy.tracking.local_tracking.LocalTracking"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalTracking</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.local_tracking.ParticleFilteringTracking.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">direction_getter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopping_criterion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seeds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cross</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxlen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minlen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pft_back_tracking_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pft_front_tracking_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pft_max_trial</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">particle_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_seeds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_wm_pve_before_stopping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local_tracking.ParticleFilteringTracking.__init__" title="Permalink to this definition">#</a></dt>
<dd><p>A streamline generator using the particle filtering tractography
method <a class="footnote-reference brackets" href="#id32" id="id30" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<section id="id31">
<h4>Parameters<a class="headerlink" href="#id31" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>direction_getter<span class="classifier">instance of ProbabilisticDirectionGetter</span></dt><dd><p>Used to get directions for fiber tracking.</p>
</dd>
<dt>stopping_criterion<span class="classifier">instance of AnatomicalStoppingCriterion</span></dt><dd><p>Identifies endpoints and invalid points to inform tracking.</p>
</dd>
<dt>seeds<span class="classifier">array (N, 3)</span></dt><dd><p>Points to seed the tracking. Seed points should be given in point
space of the track (see <code class="docutils literal notranslate"><span class="pre">affine</span></code>).</p>
</dd>
<dt>affine<span class="classifier">array (4, 4)</span></dt><dd><p>Coordinate space for the streamline point with respect to voxel
indices of input data. This affine can contain scaling, rotational,
and translational components but should not contain any shearing.
An identity matrix can be used to generate streamlines in “voxel
coordinates” as long as isotropic voxels were used to acquire the
data.</p>
</dd>
<dt>step_size<span class="classifier">float</span></dt><dd><p>Step size used for tracking.</p>
</dd>
<dt>max_cross<span class="classifier">int or None, optional</span></dt><dd><p>The maximum number of direction to track from each seed in crossing
voxels. By default all initial directions are tracked.</p>
</dd>
<dt>maxlen<span class="classifier">int, optional</span></dt><dd><p>Maximum number of steps to track from seed. Used to prevent
infinite loops.</p>
</dd>
<dt>minlen<span class="classifier">int, optional</span></dt><dd><p>Minimum number of steps to track from seed. Can be useful
for filtering out useless streamlines.</p>
</dd>
<dt>pft_back_tracking_dist<span class="classifier">float, optional</span></dt><dd><p>Distance in mm to back track before starting the particle filtering
tractography. The total particle filtering tractography distance is
equal to back_tracking_dist + front_tracking_dist.
By default this is set to 2 mm.</p>
</dd>
<dt>pft_front_tracking_dist<span class="classifier">float, optional</span></dt><dd><p>Distance in mm to run the particle filtering tractography after the
the back track distance. The total particle filtering tractography
distance is equal to back_tracking_dist + front_tracking_dist. By
default this is set to 1 mm.</p>
</dd>
<dt>pft_max_trial<span class="classifier">int, optional</span></dt><dd><p>Maximum number of trial for the particle filtering tractography
(Prevents infinite loops).</p>
</dd>
<dt>particle_count<span class="classifier">int, optional</span></dt><dd><p>Number of particles to use in the particle filter.</p>
</dd>
<dt>return_all<span class="classifier">bool, optional</span></dt><dd><p>If true, return all generated streamlines, otherwise only
streamlines reaching end points or exiting the image.</p>
</dd>
<dt>random_seed<span class="classifier">int, optional</span></dt><dd><p>The seed for the random seed generator (numpy.random.seed and
random.seed).</p>
</dd>
<dt>save_seeds<span class="classifier">bool, optional</span></dt><dd><p>If True, return seeds alongside streamlines</p>
</dd>
<dt>min_wm_pve_before_stopping<span class="classifier">int, optional</span></dt><dd><p>Minimum white matter pve (1 - stopping_criterion.include_map -
stopping_criterion.exclude_map) to reach before allowing the
tractography to stop.</p>
</dd>
</dl>
</section>
<section id="references">
<h4>References<a class="headerlink" href="#references" title="Permalink to this heading">#</a></h4>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id32" role="note">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id8">1</a>,<a role="doc-backlink" href="#id30">2</a>)</span>
<p>Girard, G., Whittingstall, K., Deriche, R., &amp; Descoteaux, M.
Towards quantitative connectivity analysis: reducing
tractography biases. NeuroImage, 98, 266-278, 2014.</p>
</aside>
</aside>
</section>
</dd></dl>

</dd></dl>

</section>
<section id="random-coordinates-from-surface">
<h3>random_coordinates_from_surface<a class="headerlink" href="#random-coordinates-from-surface" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.mesh.random_coordinates_from_surface">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.mesh.</span></span><span class="sig-name descname"><span class="pre">random_coordinates_from_surface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nb_triangles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nb_seed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triangles_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triangles_weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rand_gen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.mesh.random_coordinates_from_surface" title="Permalink to this definition">#</a></dt>
<dd><p>Generate random triangles_indices and trilinear_coord</p>
<dl class="simple">
<dt>Triangles_indices probability are weighted by triangles_weight,</dt><dd><p>for each triangles inside the given triangles_mask</p>
</dd>
</dl>
<section id="id33">
<h4>Parameters<a class="headerlink" href="#id33" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>nb_triangles<span class="classifier">int (n)</span></dt><dd><p>The amount of triangles in the mesh</p>
</dd>
<dt>nb_seed<span class="classifier">int</span></dt><dd><p>The number of random indices and coordinates generated.</p>
</dd>
<dt>triangles_mask<span class="classifier">[n] numpy array</span></dt><dd><p>Specifies which triangles should be chosen (or not)</p>
</dd>
<dt>triangles_weight<span class="classifier">[n] numpy array</span></dt><dd><p>Specifies the weight/probability of choosing each triangle</p>
</dd>
<dt>random_seed<span class="classifier">int</span></dt><dd><p>The seed for the random seed generator (numpy.random.seed).</p>
</dd>
</dl>
</section>
<section id="id34">
<h4>Returns<a class="headerlink" href="#id34" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>triangles_idx: [s] array</dt><dd><p>Randomly chosen triangles_indices</p>
</dd>
<dt>trilin_coord: [s,3] array</dt><dd><p>Randomly chosen trilinear_coordinates</p>
</dd>
</dl>
</section>
<section id="id35">
<h4>See Also<a class="headerlink" href="#id35" title="Permalink to this heading">#</a></h4>
<p>seeds_from_surface_coordinates, random_seeds_from_mask</p>
</section>
</dd></dl>

</section>
<section id="seeds-from-surface-coordinates">
<h3>seeds_from_surface_coordinates<a class="headerlink" href="#seeds-from-surface-coordinates" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.mesh.seeds_from_surface_coordinates">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.mesh.</span></span><span class="sig-name descname"><span class="pre">seeds_from_surface_coordinates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vts_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triangles_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trilinear_coord</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.mesh.seeds_from_surface_coordinates" title="Permalink to this definition">#</a></dt>
<dd><p>Compute points from triangles_indices and trilinear_coord</p>
<section id="id36">
<h4>Parameters<a class="headerlink" href="#id36" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>triangles<span class="classifier">[n, 3] -&gt; m array</span></dt><dd><p>A list of triangles from a mesh</p>
</dd>
<dt>vts_values<span class="classifier">[m, .] array</span></dt><dd><p>List of values to interpolates from coordinates along vertices,
(vertices, vertices_normal, vertices_colors …)</p>
</dd>
<dt>triangles_idx<span class="classifier">[s] array</span></dt><dd><p>Specifies which triangles should be chosen (or not)</p>
</dd>
<dt>trilinear_coord<span class="classifier">[s, 3] array</span></dt><dd><p>Specifies the weight/probability of choosing each triangle</p>
</dd>
</dl>
</section>
<section id="id37">
<h4>Returns<a class="headerlink" href="#id37" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>pts<span class="classifier">[s, …] array</span></dt><dd><p>Interpolated values of vertices with triangles_idx and trilinear_coord</p>
</dd>
</dl>
</section>
<section id="id38">
<h4>See Also<a class="headerlink" href="#id38" title="Permalink to this heading">#</a></h4>
<p>random_coordinates_from_surface</p>
</section>
</dd></dl>

</section>
<section id="triangles-area">
<h3>triangles_area<a class="headerlink" href="#triangles-area" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.mesh.triangles_area">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.mesh.</span></span><span class="sig-name descname"><span class="pre">triangles_area</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.mesh.triangles_area" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the local area of each triangle</p>
<section id="id39">
<h4>Parameters<a class="headerlink" href="#id39" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>triangles<span class="classifier">[n, 3] -&gt; m array</span></dt><dd><p>A list of triangles from a mesh</p>
</dd>
<dt>vts<span class="classifier">[m, .] array</span></dt><dd><p>List of vertices</p>
</dd>
</dl>
</section>
<section id="id40">
<h4>Returns<a class="headerlink" href="#id40" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>triangles_area<span class="classifier">[m] array</span></dt><dd><p>List of area for each triangle in the mesh</p>
</dd>
</dl>
</section>
<section id="id41">
<h4>See Also<a class="headerlink" href="#id41" title="Permalink to this heading">#</a></h4>
<p>random_coordinates_from_surface</p>
</section>
</dd></dl>

</section>
<section id="vertices-to-triangles-values">
<h3>vertices_to_triangles_values<a class="headerlink" href="#vertices-to-triangles-values" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.mesh.vertices_to_triangles_values">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.mesh.</span></span><span class="sig-name descname"><span class="pre">vertices_to_triangles_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vts_values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.mesh.vertices_to_triangles_values" title="Permalink to this definition">#</a></dt>
<dd><p>Change from values per vertex to values per triangle</p>
<section id="id42">
<h4>Parameters<a class="headerlink" href="#id42" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>triangles<span class="classifier">[n, 3] -&gt; m array</span></dt><dd><p>A list of triangles from a mesh</p>
</dd>
<dt>vts_values<span class="classifier">[m, .] array</span></dt><dd><p>List of values to interpolates from coordinates along vertices,
(vertices, vertices_normal, vertices_colors …)</p>
</dd>
</dl>
</section>
<section id="id43">
<h4>Returns<a class="headerlink" href="#id43" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>triangles_values<span class="classifier">[m] array</span></dt><dd><p>List of values for each triangle in the mesh</p>
</dd>
</dl>
</section>
<section id="id44">
<h4>See Also<a class="headerlink" href="#id44" title="Permalink to this heading">#</a></h4>
<p>random_coordinates_from_surface</p>
</section>
</dd></dl>

</section>
<section id="winding">
<h3>winding<a class="headerlink" href="#winding" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.winding">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">winding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.winding" title="Permalink to this definition">#</a></dt>
<dd><p>Total turning angle projected.</p>
<p>Project space curve to best fitting plane. Calculate the cumulative signed
angle between each line segment and the previous one.</p>
<section id="id45">
<h4>Parameters<a class="headerlink" href="#id45" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array-like shape (N,3)</span></dt><dd><p>Array representing x,y,z of N points in a track.</p>
</dd>
</dl>
</section>
<section id="id46">
<h4>Returns<a class="headerlink" href="#id46" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>a<span class="classifier">scalar</span></dt><dd><p>Total turning angle in degrees.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="length">
<h3>length<a class="headerlink" href="#length" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.length">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">along</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.length" title="Permalink to this definition">#</a></dt>
<dd><p>Euclidean length of track line</p>
<p>This will give length in mm if tracks are expressed in world coordinates.</p>
<section id="id47">
<h4>Parameters<a class="headerlink" href="#id47" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a track</p>
</dd>
<dt>along<span class="classifier">bool, optional</span></dt><dd><p>If True, return array giving cumulative length along track,
otherwise (default) return scalar giving total length.</p>
</dd>
</dl>
</section>
<section id="id48">
<h4>Returns<a class="headerlink" href="#id48" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>L<span class="classifier">scalar or array shape (N-1,)</span></dt><dd><p>scalar in case of <cite>along</cite> == False, giving total length, array if
<cite>along</cite> == True, giving cumulative lengths.</p>
</dd>
</dl>
</section>
<section id="id49">
<h4>Examples<a class="headerlink" href="#id49" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">length</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_lens</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">([</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">4</span><span class="o">**</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected_lens</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">len_along</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span> <span class="n">along</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">len_along</span><span class="p">,</span> <span class="n">expected_lens</span><span class="o">.</span><span class="n">cumsum</span><span class="p">())</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">([])</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">([],</span> <span class="n">along</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([0])</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="bytes">
<h3>bytes<a class="headerlink" href="#bytes" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.bytes">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.bytes" title="Permalink to this definition">#</a></dt>
<dd><p>Size of track in bytes.</p>
<section id="id50">
<h4>Parameters<a class="headerlink" href="#id50" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array-like shape (N,3)</span></dt><dd><p>Array representing x,y,z of N points in a track.</p>
</dd>
</dl>
</section>
<section id="id51">
<h4>Returns<a class="headerlink" href="#id51" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>b<span class="classifier">int</span></dt><dd><p>Number of bytes.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="midpoint">
<h3>midpoint<a class="headerlink" href="#midpoint" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.midpoint">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">midpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.midpoint" title="Permalink to this definition">#</a></dt>
<dd><p>Midpoint of track</p>
<section id="id52">
<h4>Parameters<a class="headerlink" href="#id52" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a track</p>
</dd>
</dl>
</section>
<section id="id53">
<h4>Returns<a class="headerlink" href="#id53" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>mp<span class="classifier">array shape (3,)</span></dt><dd><p>Middle point of line, such that, if L is the line length then
<cite>np</cite> is the point such that the length xyz[0] to <cite>mp</cite> and from
<cite>mp</cite> to xyz[-1] is L/2.  If the middle point is not a point in
<cite>xyz</cite>, then we take the interpolation between the two nearest
<cite>xyz</cite> points.  If <cite>xyz</cite> is empty, return a ValueError</p>
</dd>
</dl>
</section>
<section id="id54">
<h4>Examples<a class="headerlink" href="#id54" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">midpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">([])</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">   </span><span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">xyz array cannot be empty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="go">array([1, 2, 3])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.5,  2. ,  2.5])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.,  1.,  1.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.5,  0. ,  0. ])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.5,  9. ,  7. ])</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="downsample">
<h3>downsample<a class="headerlink" href="#downsample" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.downsample">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">downsample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_pols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.downsample" title="Permalink to this definition">#</a></dt>
<dd><p>downsample for a specific number of points along the streamline
Uses the length of the curve. It works in a similar fashion to
midpoint and arbitrarypoint but it also reduces the number of segments
of a streamline.</p>
<p>dipy.tracking.metrics.downsample is deprecated, Please use dipy.tracking.streamline.set_number_of_points instead</p>
<ul class="simple">
<li><p>deprecated from version: 1.2</p></li>
<li><p>Raises &lt;class ‘dipy.utils.deprecator.ExpiredDeprecationError’&gt; as of version: 1.4</p></li>
</ul>
<section id="id55">
<h4>Parameters<a class="headerlink" href="#id55" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a streamlines</p>
</dd>
<dt>n_pol<span class="classifier">int</span></dt><dd><p>integer representing number of points (poles) we need along the curve.</p>
</dd>
</dl>
</section>
<section id="id56">
<h4>Returns<a class="headerlink" href="#id56" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz2<span class="classifier">array shape (M,3)</span></dt><dd><p>array representing x,y,z of M points that where extrapolated. M
should be equal to n_pols</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="center-of-mass">
<h3>center_of_mass<a class="headerlink" href="#center-of-mass" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.center_of_mass">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">center_of_mass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.center_of_mass" title="Permalink to this definition">#</a></dt>
<dd><p>Center of mass of streamline</p>
<section id="id57">
<h4>Parameters<a class="headerlink" href="#id57" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a track</p>
</dd>
</dl>
</section>
<section id="id58">
<h4>Returns<a class="headerlink" href="#id58" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>com<span class="classifier">array shape (3,)</span></dt><dd><p>center of mass of streamline</p>
</dd>
</dl>
</section>
<section id="id59">
<h4>Examples<a class="headerlink" href="#id59" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">center_of_mass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">center_of_mass</span><span class="p">([])</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">   </span><span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">xyz array cannot be empty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">center_of_mass</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">array([ 1.,  1.,  1.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">center_of_mass</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.,  1.,  1.])</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="magn">
<h3>magn<a class="headerlink" href="#magn" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.magn">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">magn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.magn" title="Permalink to this definition">#</a></dt>
<dd><p>magnitude of vector</p>
</dd></dl>

</section>
<section id="frenet-serret">
<h3>frenet_serret<a class="headerlink" href="#frenet-serret" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.frenet_serret">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">frenet_serret</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.frenet_serret" title="Permalink to this definition">#</a></dt>
<dd><p>Frenet-Serret Space Curve Invariants

Calculates the 3 vector and 2 scalar invariants of a space curve
defined by vectors r = (x,y,z).  If z is omitted (i.e. the array xyz has
shape (N,2)), then the curve is
only 2D (planar), but the equations are still valid.

Similar to
<a class="reference external" href="http://www.mathworks.com/matlabcentral/fileexchange/11169">http://www.mathworks.com/matlabcentral/fileexchange/11169</a>

In the following equations the prime (<span class="math notranslate nohighlight">\('\)</span>) indicates differentiation
with respect to the parameter <span class="math notranslate nohighlight">\(s\)</span> of a parametrised curve <span class="math notranslate nohighlight">\(\mathbf{r}(s)\)</span>.

- <span class="math notranslate nohighlight">\(\mathbf{T}=\mathbf{r'}/|\mathbf{r'}|\qquad\)</span> (Tangent vector)}

- <span class="math notranslate nohighlight">\(\mathbf{N}=\mathbf{T'}/|\mathbf{T'}|\qquad\)</span> (Normal vector)

- <span class="math notranslate nohighlight">\(\mathbf{B}=\mathbf{T}\times\mathbf{N}\qquad\)</span> (Binormal vector)

- <span class="math notranslate nohighlight">\(\kappa=|\mathbf{T'}|\qquad\)</span> (Curvature)

- <span class="math notranslate nohighlight">\(\mathrm{\tau}=-\mathbf{B'}\cdot\mathbf{N}\)</span> (Torsion)

Parameters
———-
xyz : array-like shape (N,3)
   array representing x,y,z of N points in a track

Returns
——-
T : array shape (N,3)
    array representing the tangent of the curve xyz
N : array shape (N,3)
    array representing the normal of the curve xyz
B : array shape (N,3)
    array representing the binormal of the curve xyz
k : array shape (N,1)
    array representing the curvature of the curve xyz
t : array shape (N,1)
    array representing the torsion of the curve xyz

Examples
——–
Create a helix and calculate its tangent, normal, binormal, curvature
and torsion

&gt;&gt;&gt; from dipy.tracking import metrics as tm
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; theta = 2*np.pi*np.linspace(0,2,100)
&gt;&gt;&gt; x=np.cos(theta)
&gt;&gt;&gt; y=np.sin(theta)
&gt;&gt;&gt; z=theta/(2*np.pi)
&gt;&gt;&gt; xyz=np.vstack((x,y,z)).T
&gt;&gt;&gt; T,N,B,k,t=tm.frenet_serret(xyz)</p>
</dd></dl>

</section>
<section id="mean-curvature">
<h3>mean_curvature<a class="headerlink" href="#mean-curvature" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.mean_curvature">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">mean_curvature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.mean_curvature" title="Permalink to this definition">#</a></dt>
<dd><p>Calculates the mean curvature of a curve</p>
<section id="id60">
<h4>Parameters<a class="headerlink" href="#id60" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a curve</p>
</dd>
</dl>
</section>
<section id="id61">
<h4>Returns<a class="headerlink" href="#id61" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>m<span class="classifier">float</span></dt><dd><p>Mean curvature.</p>
</dd>
</dl>
</section>
<section id="id62">
<h4>Examples<a class="headerlink" href="#id62" title="Permalink to this heading">#</a></h4>
<p>Create a straight line and a semi-circle and print their mean curvatures</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking</span> <span class="kn">import</span> <span class="n">metrics</span> <span class="k">as</span> <span class="n">tm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">=</span><span class="n">tm</span><span class="o">.</span><span class="n">mean_curvature</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span> <span class="c1">#mean curvature straight line</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="o">=</span> <span class="n">tm</span><span class="o">.</span><span class="n">mean_curvature</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span> <span class="c1">#mean curvature for semi-circle</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="mean-orientation">
<h3>mean_orientation<a class="headerlink" href="#mean-orientation" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.mean_orientation">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">mean_orientation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.mean_orientation" title="Permalink to this definition">#</a></dt>
<dd><p>Calculates the mean orientation of a curve</p>
<section id="id63">
<h4>Parameters<a class="headerlink" href="#id63" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a curve</p>
</dd>
</dl>
</section>
<section id="id64">
<h4>Returns<a class="headerlink" href="#id64" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>m<span class="classifier">float</span></dt><dd><p>Mean orientation.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="generate-combinations">
<h3>generate_combinations<a class="headerlink" href="#generate-combinations" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.generate_combinations">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">generate_combinations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">items</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.generate_combinations" title="Permalink to this definition">#</a></dt>
<dd><p>Combine sets of size n from items</p>
<section id="id65">
<h4>Parameters<a class="headerlink" href="#id65" title="Permalink to this heading">#</a></h4>
<p>items : sequence
n : int</p>
</section>
<section id="id66">
<h4>Returns<a class="headerlink" href="#id66" title="Permalink to this heading">#</a></h4>
<p>ic : iterator</p>
</section>
<section id="id67">
<h4>Examples<a class="headerlink" href="#id67" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">generate_combinations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ic</span><span class="o">=</span><span class="n">generate_combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ic</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="go">[0, 1]</span>
<span class="go">[0, 2]</span>
<span class="go">[1, 2]</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="longest-track-bundle">
<h3>longest_track_bundle<a class="headerlink" href="#longest-track-bundle" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.longest_track_bundle">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">longest_track_bundle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bundle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.longest_track_bundle" title="Permalink to this definition">#</a></dt>
<dd><p>Return longest track or length sorted track indices in <cite>bundle</cite></p>
<p>If <cite>sort</cite> == True, return the indices of the sorted tracks in the
bundle, otherwise return the longest track.</p>
<section id="id68">
<h4>Parameters<a class="headerlink" href="#id68" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>bundle<span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (N1,3) … (Nm,3)</p>
</dd>
<dt>sort<span class="classifier">bool, optional</span></dt><dd><p>If False (default) return longest track.  If True, return length
sorted indices for tracks in bundle</p>
</dd>
</dl>
</section>
<section id="id69">
<h4>Returns<a class="headerlink" href="#id69" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>longest_or_indices<span class="classifier">array</span></dt><dd><p>longest track - shape (N,3) -  (if <cite>sort</cite> is False), or indices
of length sorted tracks (if <cite>sort</cite> is True)</p>
</dd>
</dl>
</section>
<section id="id70">
<h4>Examples<a class="headerlink" href="#id70" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">longest_track_bundle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]]),</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">longest_track_bundle</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
<span class="go">array([[0, 0, 0],</span>
<span class="go">       [4, 4, 4]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">longest_track_bundle</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> 
<span class="go">array([0, 1]...)</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="intersect-sphere">
<h3>intersect_sphere<a class="headerlink" href="#intersect-sphere" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.intersect_sphere">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">intersect_sphere</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.intersect_sphere" title="Permalink to this definition">#</a></dt>
<dd><p>If any segment of the track is intersecting with a sphere of
specific center and radius return True otherwise False</p>
<section id="id71">
<h4>Parameters<a class="headerlink" href="#id71" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array, shape (N,3)</span></dt><dd><p>representing x,y,z of the N points of the track</p>
</dd>
<dt>center<span class="classifier">array, shape (3,)</span></dt><dd><p>center of the sphere</p>
</dd>
<dt>radius<span class="classifier">float</span></dt><dd><p>radius of the sphere</p>
</dd>
</dl>
</section>
<section id="id72">
<h4>Returns<a class="headerlink" href="#id72" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>tf<span class="classifier">{True, False}</span></dt><dd><p>True if track <cite>xyz</cite> intersects sphere</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">intersect_sphere</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sph_cent</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sph_radius</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intersect_sphere</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">sph_cent</span><span class="p">,</span><span class="n">sph_radius</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
<section id="id73">
<h4>Notes<a class="headerlink" href="#id73" title="Permalink to this heading">#</a></h4>
<p>The ray to sphere intersection method used here is similar with
<a class="reference external" href="http://local.wasp.uwa.edu.au/~pbourke/geometry/sphereline/">http://local.wasp.uwa.edu.au/~pbourke/geometry/sphereline/</a>
<a class="reference external" href="http://local.wasp.uwa.edu.au/~pbourke/geometry/sphereline/source.cpp">http://local.wasp.uwa.edu.au/~pbourke/geometry/sphereline/source.cpp</a>
we just applied it for every segment neglecting the intersections where
the intersecting points are not inside the segment</p>
</section>
</dd></dl>

</section>
<section id="inside-sphere">
<h3>inside_sphere<a class="headerlink" href="#inside-sphere" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.inside_sphere">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">inside_sphere</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.inside_sphere" title="Permalink to this definition">#</a></dt>
<dd><p>If any point of the track is inside a sphere of a specified
center and radius return True otherwise False.  Mathematically this
can be simply described by <span class="math notranslate nohighlight">\(|x-c|\le r\)</span> where <span class="math notranslate nohighlight">\(x\)</span> a point <span class="math notranslate nohighlight">\(c\)</span> the
center of the sphere and <span class="math notranslate nohighlight">\(r\)</span> the radius of the sphere.

Parameters
———-
xyz : array, shape (N,3)
   representing x,y,z of the N points of the track
center : array, shape (3,)
   center of the sphere
radius : float
   radius of the sphere

Returns
——-
tf : {True,False}
    Whether point is inside sphere.

Examples
——–
&gt;&gt;&gt; from dipy.tracking.metrics import inside_sphere
&gt;&gt;&gt; line=np.array(([0,0,0],[1,1,1],[2,2,2]))
&gt;&gt;&gt; sph_cent=np.array([1,1,1])
&gt;&gt;&gt; sph_radius = 1
&gt;&gt;&gt; inside_sphere(line,sph_cent,sph_radius)
True</p>
</dd></dl>

</section>
<section id="inside-sphere-points">
<h3>inside_sphere_points<a class="headerlink" href="#inside-sphere-points" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.inside_sphere_points">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">inside_sphere_points</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.inside_sphere_points" title="Permalink to this definition">#</a></dt>
<dd><p>If a track intersects with a sphere of a specified center and
radius return the points that are inside the sphere otherwise False.
Mathematically this can be simply described by <span class="math notranslate nohighlight">\(|x-c| \le r\)</span> where <span class="math notranslate nohighlight">\(x\)</span>
a point <span class="math notranslate nohighlight">\(c\)</span> the center of the sphere and <span class="math notranslate nohighlight">\(r\)</span> the radius of the
sphere.

Parameters
———-
xyz : array, shape (N,3)
   representing x,y,z of the N points of the track
center : array, shape (3,)
   center of the sphere
radius : float
   radius of the sphere

Returns
——-
xyzn : array, shape(M,3)
   array representing x,y,z of the M points inside the sphere

Examples
——–
&gt;&gt;&gt; from dipy.tracking.metrics import inside_sphere_points
&gt;&gt;&gt; line=np.array(([0,0,0],[1,1,1],[2,2,2]))
&gt;&gt;&gt; sph_cent=np.array([1,1,1])
&gt;&gt;&gt; sph_radius = 1
&gt;&gt;&gt; inside_sphere_points(line,sph_cent,sph_radius)
array([[1, 1, 1]])</p>
</dd></dl>

</section>
<section id="spline">
<h3>spline<a class="headerlink" href="#spline" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.spline">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">spline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.spline" title="Permalink to this definition">#</a></dt>
<dd><p>Generate B-splines as documented in
<a class="reference external" href="http://www.scipy.org/Cookbook/Interpolation">http://www.scipy.org/Cookbook/Interpolation</a></p>
<p>The scipy.interpolate packages wraps the netlib FITPACK routines
(Dierckx) for calculating smoothing splines for various kinds of
data and geometries. Although the data is evenly spaced in this
example, it need not be so to use this routine.</p>
<section id="id74">
<h4>Parameters<a class="headerlink" href="#id74" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array, shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in 3d space</p>
</dd>
<dt>s<span class="classifier">float, optional</span></dt><dd><p>A smoothing condition.  The amount of smoothness is determined by
satisfying the conditions: sum((w * (y - g))**2,axis=0) &lt;= s
where g(x) is the smoothed interpolation of (x,y).  The user can
use s to control the tradeoff between closeness and smoothness of
fit.  Larger satisfying the conditions: sum((w * (y -
g))**2,axis=0) &lt;= s where g(x) is the smoothed interpolation of
(x,y).  The user can use s to control the tradeoff between
closeness and smoothness of fit.  Larger s means more smoothing
while smaller values of s indicate less smoothing. Recommended
values of s depend on the weights, w.  If the weights represent
the inverse of the standard-deviation of y, then a: good s value
should be found in the range (m-sqrt(2*m),m+sqrt(2*m)) where m is
the number of datapoints in x, y, and w.</p>
</dd>
<dt>k<span class="classifier">int, optional</span></dt><dd><p>Degree of the spline.  Cubic splines are recommended.  Even
values of k should be avoided especially with a small s-value.
for the same set of data.  If task=-1 find the weighted least
square spline for a given set of knots, t.</p>
</dd>
<dt>nest<span class="classifier">None or int, optional</span></dt><dd><p>An over-estimate of the total number of knots of the spline to
help in determining the storage space.  None results in value
m+2*k. -1 results in m+k+1. Always large enough is nest=m+k+1.
Default is -1.</p>
</dd>
</dl>
</section>
<section id="id75">
<h4>Returns<a class="headerlink" href="#id75" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyzn<span class="classifier">array, shape (M,3)</span></dt><dd><p>array representing x,y,z of the M points inside the sphere</p>
</dd>
</dl>
</section>
<section id="id76">
<h4>Examples<a class="headerlink" href="#id76" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.75</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="c1"># make ascending spiral in 3-space</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">t</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="c1"># add noise</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">z</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyzn</span><span class="o">=</span><span class="n">spline</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">xyzn</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
<section id="id77">
<h4>See Also<a class="headerlink" href="#id77" title="Permalink to this heading">#</a></h4>
<p>scipy.interpolate.splprep
scipy.interpolate.splev</p>
</section>
</dd></dl>

</section>
<section id="startpoint">
<h3>startpoint<a class="headerlink" href="#startpoint" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.startpoint">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">startpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.startpoint" title="Permalink to this definition">#</a></dt>
<dd><p>First point of the track</p>
<section id="id78">
<h4>Parameters<a class="headerlink" href="#id78" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array, shape(N,3)</span></dt><dd><p>Track.</p>
</dd>
</dl>
</section>
<section id="id79">
<h4>Returns<a class="headerlink" href="#id79" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>sp<span class="classifier">array, shape(3,)</span></dt><dd><p>First track point.</p>
</dd>
</dl>
</section>
<section id="id80">
<h4>Examples<a class="headerlink" href="#id80" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">startpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sp</span><span class="o">=</span><span class="n">startpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sp</span><span class="o">.</span><span class="n">any</span><span class="p">()</span><span class="o">==</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="endpoint">
<h3>endpoint<a class="headerlink" href="#endpoint" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.endpoint">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">endpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.endpoint" title="Permalink to this definition">#</a></dt>
<dd><section id="id81">
<h4>Parameters<a class="headerlink" href="#id81" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array, shape(N,3)</span></dt><dd><p>Track.</p>
</dd>
</dl>
</section>
<section id="id82">
<h4>Returns<a class="headerlink" href="#id82" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>ep<span class="classifier">array, shape(3,)</span></dt><dd><p>First track point.</p>
</dd>
</dl>
</section>
<section id="id83">
<h4>Examples<a class="headerlink" href="#id83" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">endpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ep</span><span class="o">=</span><span class="n">endpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ep</span><span class="o">.</span><span class="n">any</span><span class="p">()</span><span class="o">==</span><span class="n">xyz</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="arbitrarypoint">
<h3>arbitrarypoint<a class="headerlink" href="#arbitrarypoint" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.arbitrarypoint">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">arbitrarypoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.arbitrarypoint" title="Permalink to this definition">#</a></dt>
<dd><p>Select an arbitrary point along distance on the track (curve)</p>
<section id="id84">
<h4>Parameters<a class="headerlink" href="#id84" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a track</p>
</dd>
<dt>distance<span class="classifier">float</span></dt><dd><p>float representing distance travelled from the xyz[0] point of
the curve along the curve.</p>
</dd>
</dl>
</section>
<section id="id85">
<h4>Returns<a class="headerlink" href="#id85" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>ap<span class="classifier">array shape (3,)</span></dt><dd><p>Arbitrary point of line, such that, if the arbitrary point is not
a point in <cite>xyz</cite>, then we take the interpolation between the two
nearest <cite>xyz</cite> points.  If <cite>xyz</cite> is empty, return a ValueError</p>
</dd>
</dl>
</section>
<section id="id86">
<h4>Examples<a class="headerlink" href="#id86" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">arbitrarypoint</span><span class="p">,</span> <span class="n">length</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ap</span><span class="o">=</span><span class="n">arbitrarypoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span><span class="n">length</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="principal-components">
<h3>principal_components<a class="headerlink" href="#principal-components" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.principal_components">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">principal_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.principal_components" title="Permalink to this definition">#</a></dt>
<dd><p>We use PCA to calculate the 3 principal directions for a track</p>
<section id="id87">
<h4>Parameters<a class="headerlink" href="#id87" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a track</p>
</dd>
</dl>
</section>
<section id="id88">
<h4>Returns<a class="headerlink" href="#id88" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>va<span class="classifier">array_like</span></dt><dd><p>eigenvalues</p>
</dd>
<dt>ve<span class="classifier">array_like</span></dt><dd><p>eigenvectors</p>
</dd>
</dl>
</section>
<section id="id89">
<h4>Examples<a class="headerlink" href="#id89" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">principal_components</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">va</span><span class="p">,</span> <span class="n">ve</span> <span class="o">=</span> <span class="n">principal_components</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">va</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.51010101</span><span class="p">,</span> <span class="mf">0.09883545</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="midpoint2point">
<h3>midpoint2point<a class="headerlink" href="#midpoint2point" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.midpoint2point">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">midpoint2point</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.midpoint2point" title="Permalink to this definition">#</a></dt>
<dd><p>Calculate distance from midpoint of a curve to arbitrary point p</p>
<section id="id90">
<h4>Parameters<a class="headerlink" href="#id90" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>xyz<span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a track</p>
</dd>
<dt>p<span class="classifier">array shape (3,)</span></dt><dd><p>array representing an arbitrary point with x,y,z coordinates in
space.</p>
</dd>
</dl>
</section>
<section id="id91">
<h4>Returns<a class="headerlink" href="#id91" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>d<span class="classifier">float</span></dt><dd><p>a float number representing Euclidean distance</p>
</dd>
</dl>
</section>
<section id="id92">
<h4>Examples<a class="headerlink" href="#id92" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">midpoint2point</span><span class="p">,</span> <span class="n">midpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dist</span><span class="o">=</span><span class="n">midpoint2point</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="unlist-streamlines">
<h3>unlist_streamlines<a class="headerlink" href="#unlist-streamlines" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.unlist_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">unlist_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.unlist_streamlines" title="Permalink to this definition">#</a></dt>
<dd><p>Return the streamlines not as a list but as an array and an offset</p>
<section id="id93">
<h4>Parameters<a class="headerlink" href="#id93" title="Permalink to this heading">#</a></h4>
<p>streamlines: sequence</p>
</section>
<section id="id94">
<h4>Returns<a class="headerlink" href="#id94" title="Permalink to this heading">#</a></h4>
<p>points : array
offsets : array</p>
</section>
</dd></dl>

</section>
<section id="relist-streamlines">
<h3>relist_streamlines<a class="headerlink" href="#relist-streamlines" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.relist_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">relist_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offsets</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.relist_streamlines" title="Permalink to this definition">#</a></dt>
<dd><p>Given a representation of a set of streamlines as a large array and
an offsets array return the streamlines as a list of shorter arrays.</p>
<section id="id95">
<h4>Parameters<a class="headerlink" href="#id95" title="Permalink to this heading">#</a></h4>
<p>points : array
offsets : array</p>
</section>
<section id="id96">
<h4>Returns<a class="headerlink" href="#id96" title="Permalink to this heading">#</a></h4>
<p>streamlines: sequence</p>
</section>
</dd></dl>

</section>
<section id="center-streamlines">
<h3>center_streamlines<a class="headerlink" href="#center-streamlines" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.center_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">center_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.center_streamlines" title="Permalink to this definition">#</a></dt>
<dd><p>Move streamlines to the origin</p>
<section id="id97">
<h4>Parameters<a class="headerlink" href="#id97" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">list</span></dt><dd><p>List of 2D ndarrays of shape[-1]==3</p>
</dd>
</dl>
</section>
<section id="id98">
<h4>Returns<a class="headerlink" href="#id98" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>new_streamlines<span class="classifier">list</span></dt><dd><p>List of 2D ndarrays of shape[-1]==3</p>
</dd>
<dt>inv_shift<span class="classifier">ndarray</span></dt><dd><p>Translation in x,y,z to go back in the initial position</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="deform-streamlines">
<h3>deform_streamlines<a class="headerlink" href="#deform-streamlines" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.deform_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">deform_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deform_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_to_current_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_grid_to_world</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_to_ref_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_grid_to_world</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.deform_streamlines" title="Permalink to this definition">#</a></dt>
<dd><p>Apply deformation field to streamlines</p>
<section id="id99">
<h4>Parameters<a class="headerlink" href="#id99" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">list</span></dt><dd><p>List of 2D ndarrays of shape[-1]==3</p>
</dd>
<dt>deform_field<span class="classifier">4D numpy array</span></dt><dd><p>x,y,z displacements stored in volume, shape[-1]==3</p>
</dd>
<dt>stream_to_current_grid<span class="classifier">array, (4, 4)</span></dt><dd><p>transform matrix voxmm space to original grid space</p>
</dd>
<dt>current_grid_to_world<span class="classifier">array (4, 4)</span></dt><dd><p>transform matrix original grid space to world coordinates</p>
</dd>
<dt>stream_to_ref_grid<span class="classifier">array (4, 4)</span></dt><dd><p>transform matrix voxmm space to new grid space</p>
</dd>
<dt>ref_grid_to_world<span class="classifier">array(4, 4)</span></dt><dd><p>transform matrix new grid space to world coordinates</p>
</dd>
</dl>
</section>
<section id="id100">
<h4>Returns<a class="headerlink" href="#id100" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>new_streamlines<span class="classifier">list</span></dt><dd><p>List of the transformed 2D ndarrays of shape[-1]==3</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="transform-streamlines">
<h3>transform_streamlines<a class="headerlink" href="#transform-streamlines" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.transform_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">transform_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_place</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.transform_streamlines" title="Permalink to this definition">#</a></dt>
<dd><p>Apply affine transformation to streamlines</p>
<section id="id101">
<h4>Parameters<a class="headerlink" href="#id101" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">Streamlines</span></dt><dd><p>Streamlines object</p>
</dd>
<dt>mat<span class="classifier">array, (4, 4)</span></dt><dd><p>transformation matrix</p>
</dd>
<dt>in_place<span class="classifier">bool</span></dt><dd><p>If True then change data in place.
Be careful changes input streamlines.</p>
</dd>
</dl>
</section>
<section id="id102">
<h4>Returns<a class="headerlink" href="#id102" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>new_streamlines<span class="classifier">Streamlines</span></dt><dd><p>Sequence transformed 2D ndarrays of shape[-1]==3</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="select-random-set-of-streamlines">
<h3>select_random_set_of_streamlines<a class="headerlink" href="#select-random-set-of-streamlines" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.select_random_set_of_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">select_random_set_of_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.select_random_set_of_streamlines" title="Permalink to this definition">#</a></dt>
<dd><p>Select a random set of streamlines</p>
<section id="id103">
<h4>Parameters<a class="headerlink" href="#id103" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">Streamlines</span></dt><dd><p>Object of 2D ndarrays of shape[-1]==3</p>
</dd>
<dt>select<span class="classifier">int</span></dt><dd><p>Number of streamlines to select. If there are less streamlines
than <code class="docutils literal notranslate"><span class="pre">select</span></code> then <code class="docutils literal notranslate"><span class="pre">select=len(streamlines)</span></code>.</p>
</dd>
<dt>rng<span class="classifier">RandomState</span></dt><dd><p>Default None.</p>
</dd>
</dl>
</section>
<section id="id104">
<h4>Returns<a class="headerlink" href="#id104" title="Permalink to this heading">#</a></h4>
<p>selected_streamlines : list</p>
</section>
<section id="id105">
<h4>Notes<a class="headerlink" href="#id105" title="Permalink to this heading">#</a></h4>
<p>The same streamline will not be selected twice.</p>
</section>
</dd></dl>

</section>
<section id="select-by-rois">
<h3>select_by_rois<a class="headerlink" href="#select-by-rois" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.select_by_rois">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">select_by_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rois</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.select_by_rois" title="Permalink to this definition">#</a></dt>
<dd><p>Select streamlines based on logical relations with several regions of
interest (ROIs). For example, select streamlines that pass near ROI1,
but only if they do not pass near ROI2.</p>
<section id="id106">
<h4>Parameters<a class="headerlink" href="#id106" title="Permalink to this heading">#</a></h4>
<dl>
<dt>streamlines<span class="classifier">list</span></dt><dd><p>A list of candidate streamlines for selection</p>
</dd>
<dt>affine<span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt>rois<span class="classifier">list or ndarray</span></dt><dd><p>A list of 3D arrays, each with shape (x, y, z) corresponding to the
shape of the brain volume, or a 4D array with shape (n_rois, x, y,
z). Non-zeros in each volume are considered to be within the region</p>
</dd>
<dt>include<span class="classifier">array or list</span></dt><dd><p>A list or 1D array of boolean values marking inclusion or exclusion
criteria. If a streamline is near any of the inclusion ROIs, it
should evaluate to True, unless it is also near any of the exclusion
ROIs.</p>
</dd>
<dt>mode<span class="classifier">string, optional</span></dt><dd><p>One of {“any”, “all”, “either_end”, “both_end”}, where a streamline is
associated with an ROI if:</p>
<p>“any” : any point is within tol from ROI. Default.</p>
<p>“all” : all points are within tol from ROI.</p>
<p>“either_end” : either of the end-points is within tol from ROI</p>
<p>“both_end” : both end points are within tol from ROI.</p>
</dd>
<dt>tol<span class="classifier">float</span></dt><dd><p>Distance (in the units of the streamlines, usually mm). If any
coordinate in the streamline is within this distance from the center
of any voxel in the ROI, the filtering criterion is set to True for
this streamline, otherwise False. Defaults to the distance between
the center of each voxel and the corner of the voxel.</p>
</dd>
</dl>
</section>
<section id="id107">
<h4>Notes<a class="headerlink" href="#id107" title="Permalink to this heading">#</a></h4>
<p>The only operation currently possible is “(A or B or …) and not (X or Y
or …)”, where A, B are inclusion regions and X, Y are exclusion regions.</p>
</section>
<section id="id108">
<h4>Returns<a class="headerlink" href="#id108" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>generator</dt><dd><p>Generates the streamlines to be included based on these criteria.</p>
</dd>
</dl>
</section>
<section id="id109">
<h4>See also<a class="headerlink" href="#id109" title="Permalink to this heading">#</a></h4>
<p><a class="reference internal" href="#dipy.tracking.utils.near_roi" title="dipy.tracking.utils.near_roi"><code class="xref py py-func docutils literal notranslate"><span class="pre">dipy.tracking.utils.near_roi()</span></code></a>
<a class="reference internal" href="#dipy.tracking.utils.reduce_rois" title="dipy.tracking.utils.reduce_rois"><code class="xref py py-func docutils literal notranslate"><span class="pre">dipy.tracking.utils.reduce_rois()</span></code></a></p>
</section>
<section id="id110">
<h4>Examples<a class="headerlink" href="#id110" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mf">1.9</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]]),</span>
<span class="gp">... </span>               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">]]),</span>
<span class="gp">... </span>               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">mask1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask1</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask2</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">selection</span> <span class="o">=</span> <span class="n">select_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="p">[</span><span class="n">mask1</span><span class="p">,</span> <span class="n">mask2</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">tol</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span> <span class="c1"># The result is a generator</span>
<span class="go">[array([[ 0. ,  0. ,  0.9],</span>
<span class="go">       [ 1.9,  0. ,  0. ]]), array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.],</span>
<span class="go">       [ 0.,  2.,  2.]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">selection</span> <span class="o">=</span> <span class="n">select_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="p">[</span><span class="n">mask1</span><span class="p">,</span> <span class="n">mask2</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">tol</span><span class="o">=</span><span class="mf">0.87</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>
<span class="go">[array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.],</span>
<span class="go">       [ 0.,  2.,  2.]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">selection</span> <span class="o">=</span> <span class="n">select_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="p">[</span><span class="n">mask1</span><span class="p">,</span> <span class="n">mask2</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;both_end&quot;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">tol</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>
<span class="go">[array([[ 0. ,  0. ,  0.9],</span>
<span class="go">       [ 1.9,  0. ,  0. ]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask2</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">selection</span> <span class="o">=</span> <span class="n">select_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="p">[</span><span class="n">mask1</span><span class="p">,</span> <span class="n">mask2</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;both_end&quot;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">tol</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>
<span class="go">[array([[ 0. ,  0. ,  0.9],</span>
<span class="go">       [ 1.9,  0. ,  0. ]]), array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.],</span>
<span class="go">       [ 0.,  2.,  2.]])]</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="cluster-confidence">
<h3>cluster_confidence<a class="headerlink" href="#cluster-confidence" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.cluster_confidence">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">cluster_confidence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_mdf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">power</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.cluster_confidence" title="Permalink to this definition">#</a></dt>
<dd><p>Computes the cluster confidence index (cci), which is an
estimation of the support a set of streamlines gives to
a particular pathway.</p>
<p>Ex: A single streamline with no others in the dataset
following a similar pathway has a low cci. A streamline
in a bundle of 100 streamlines that follow similar
pathways has a high cci.</p>
<p>See: Jordan et al. 2017
(Based on streamline MDF distance from Garyfallidis et al. 2012)</p>
<section id="id111">
<h4>Parameters<a class="headerlink" href="#id111" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">list of 2D (N, 3) arrays</span></dt><dd><p>A sequence of streamlines of length N (# streamlines)</p>
</dd>
<dt>max_mdf<span class="classifier">int</span></dt><dd><p>The maximum MDF distance (mm) that will be considered a
“supporting” streamline and included in cci calculation</p>
</dd>
<dt>subsample: int</dt><dd><p>The number of points that are considered for each streamline
in the calculation. To save on calculation time, each
streamline is subsampled to subsampleN points.</p>
</dd>
<dt>power: int</dt><dd><p>The power to which the MDF distance for each streamline
will be raised to determine how much it contributes to
the cci. High values of power make the contribution value
degrade much faster. E.g., a streamline with 5mm MDF
similarity contributes 1/5 to the cci if power is 1, but
only contributes 1/5^2 = 1/25 if power is 2.</p>
</dd>
<dt>override: bool, False by default</dt><dd><p>override means that the cci calculation will still occur even
though there are short streamlines in the dataset that may alter
expected behaviour.</p>
</dd>
</dl>
</section>
<section id="id112">
<h4>Returns<a class="headerlink" href="#id112" title="Permalink to this heading">#</a></h4>
<p>Returns an array of CCI scores</p>
</section>
<section id="id113">
<h4>References<a class="headerlink" href="#id113" title="Permalink to this heading">#</a></h4>
<p>[Jordan17] Jordan K. Et al., Cluster Confidence Index: A Streamline-Wise
Pathway Reproducibility Metric for Diffusion-Weighted MRI Tractography,
Journal of Neuroimaging, vol 28, no 1, 2017.</p>
<p>[Garyfallidis12] Garyfallidis E. et al., QuickBundles a method for
tractography simplification, Frontiers in Neuroscience,
vol 6, no 175, 2012.</p>
</section>
</dd></dl>

</section>
<section id="orient-by-rois">
<h3>orient_by_rois<a class="headerlink" href="#orient-by-rois" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.orient_by_rois">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">orient_by_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_place</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_generator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.orient_by_rois" title="Permalink to this definition">#</a></dt>
<dd><p>Orient a set of streamlines according to a pair of ROIs</p>
<section id="id114">
<h4>Parameters<a class="headerlink" href="#id114" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">list or generator</span></dt><dd><p>List or generator of 2d arrays of 3d coordinates. Each array contains
the xyz coordinates of a single streamline.</p>
</dd>
<dt>affine<span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt>roi1, roi2<span class="classifier">ndarray</span></dt><dd><p>Binary masks designating the location of the regions of interest, or
coordinate arrays (n-by-3 array with ROI coordinate in each row).</p>
</dd>
<dt>in_place<span class="classifier">bool</span></dt><dd><p>Whether to make the change in-place in the original list
(and return a reference to the list), or to make a copy of the list
and return this copy, with the relevant streamlines reoriented.
Default: False.</p>
</dd>
<dt>as_generator<span class="classifier">bool</span></dt><dd><p>Whether to return a generator as output. Default: False</p>
</dd>
</dl>
</section>
<section id="id115">
<h4>Returns<a class="headerlink" href="#id115" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">list or generator</span></dt><dd><p>The same 3D arrays as a list or generator, but reoriented with respect
to the ROIs</p>
</dd>
</dl>
</section>
<section id="id116">
<h4>Examples<a class="headerlink" href="#id116" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]]),</span>
<span class="gp">... </span>               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">roi1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi1</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi2</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orient_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">roi1</span><span class="p">,</span> <span class="n">roi2</span><span class="p">)</span>
<span class="go">[array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 1.,  0.,  0.],</span>
<span class="go">       [ 2.,  0.,  0.]]), array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 1.,  0.,  0.],</span>
<span class="go">       [ 2.,  0.,  0.]])]</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="orient-by-streamline">
<h3>orient_by_streamline<a class="headerlink" href="#orient-by-streamline" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.orient_by_streamline">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">orient_by_streamline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">standard</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_place</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_generator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.orient_by_streamline" title="Permalink to this definition">#</a></dt>
<dd><p>Orient a bundle of streamlines to a standard streamline.</p>
<section id="id117">
<h4>Parameters<a class="headerlink" href="#id117" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">Streamlines, list</span></dt><dd><p>The input streamlines to orient.</p>
</dd>
<dt>standard<span class="classifier">Streamlines, list, or ndarrray</span></dt><dd><p>This provides the standard orientation according to which the
streamlines in the provided bundle should be reoriented.</p>
</dd>
<dt>n_points: int, optional</dt><dd><p>The number of samples to apply to each of the streamlines.</p>
</dd>
<dt>in_place<span class="classifier">bool</span></dt><dd><p>Whether to make the change in-place in the original input
(and return a reference), or to make a copy of the list
and return this copy, with the relevant streamlines reoriented.
Default: False.</p>
</dd>
<dt>as_generator<span class="classifier">bool</span></dt><dd><p>Whether to return a generator as output. Default: False</p>
</dd>
</dl>
</section>
<section id="id118">
<h4>Returns<a class="headerlink" href="#id118" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>Streamlines<span class="classifier">with each individual array oriented to be as similar as</span></dt><dd><p>possible to the standard.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="values-from-volume">
<h3>values_from_volume<a class="headerlink" href="#values-from-volume" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.values_from_volume">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">values_from_volume</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.values_from_volume" title="Permalink to this definition">#</a></dt>
<dd><p>Extract values of a scalar/vector along each streamline from a volume.</p>
<section id="id119">
<h4>Parameters<a class="headerlink" href="#id119" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>data<span class="classifier">3D or 4D array</span></dt><dd><p>Scalar (for 3D) and vector (for 4D) values to be extracted. For 4D
data, interpolation will be done on the 3 spatial dimensions in each
volume.</p>
</dd>
<dt>streamlines<span class="classifier">ndarray or list</span></dt><dd><p>If array, of shape (n_streamlines, n_nodes, 3)
If list, len(n_streamlines) with (n_nodes, 3) array in
each element of the list.</p>
</dd>
<dt>affine<span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
</dl>
</section>
<section id="id120">
<h4>Returns<a class="headerlink" href="#id120" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>array or list (depending on the input)<span class="classifier">values interpolate to each</span></dt><dd><p>coordinate along the length of each streamline.</p>
</dd>
</dl>
</section>
<section id="id121">
<h4>Notes<a class="headerlink" href="#id121" title="Permalink to this heading">#</a></h4>
<p>Values are extracted from the image based on the 3D coordinates of the
nodes that comprise the points in the streamline, without any interpolation
into segments between the nodes. Using this function with streamlines that
have been resampled into a very small number of nodes will result in very
few values.</p>
</section>
</dd></dl>

</section>
<section id="nbytes">
<h3>nbytes<a class="headerlink" href="#nbytes" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.nbytes">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">nbytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.nbytes" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="density-map">
<h3>density_map<a class="headerlink" href="#density-map" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.density_map">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">density_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vol_dims</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.density_map" title="Permalink to this definition">#</a></dt>
<dd><p>Count the number of unique streamlines that pass through each voxel.</p>
<section id="id122">
<h4>Parameters<a class="headerlink" href="#id122" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">iterable</span></dt><dd><p>A sequence of streamlines.</p>
</dd>
<dt>affine<span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt>vol_dims<span class="classifier">3 ints</span></dt><dd><p>The shape of the volume to be returned containing the streamlines
counts</p>
</dd>
</dl>
</section>
<section id="id123">
<h4>Returns<a class="headerlink" href="#id123" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>image_volume<span class="classifier">ndarray, shape=vol_dims</span></dt><dd><p>The number of streamline points in each voxel of volume.</p>
</dd>
</dl>
</section>
<section id="raises">
<h4>Raises<a class="headerlink" href="#raises" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>IndexError</dt><dd><p>When the points of the streamlines lie outside of the return volume.</p>
</dd>
</dl>
</section>
<section id="id124">
<h4>Notes<a class="headerlink" href="#id124" title="Permalink to this heading">#</a></h4>
<p>A streamline can pass through a voxel even if one of the points of the
streamline does not lie in the voxel. For example a step from [0,0,0] to
[0,0,2] passes through [0,0,1]. Consider subsegmenting the streamlines when
the edges of the voxels are smaller than the steps of the streamlines.</p>
</section>
</dd></dl>

</section>
<section id="connectivity-matrix">
<h3>connectivity_matrix<a class="headerlink" href="#connectivity-matrix" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.connectivity_matrix">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">connectivity_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_volume</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inclusive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symmetric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapping_as_streamlines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.connectivity_matrix" title="Permalink to this definition">#</a></dt>
<dd><p>Count the streamlines that start and end at each label pair.</p>
<section id="id125">
<h4>Parameters<a class="headerlink" href="#id125" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">sequence</span></dt><dd><p>A sequence of streamlines.</p>
</dd>
<dt>affine<span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline coordinates.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt>label_volume<span class="classifier">ndarray</span></dt><dd><p>An image volume with an integer data type, where the intensities in the
volume map to anatomical structures.</p>
</dd>
<dt>inclusive: bool</dt><dd><p>Whether to analyze the entire streamline, as opposed to just the
endpoints. Allowing this will increase calculation time and mapping
size, especially if mapping_as_streamlines is True. False by default.</p>
</dd>
<dt>symmetric<span class="classifier">bool, True by default</span></dt><dd><p>Symmetric means we don’t distinguish between start and end points. If
symmetric is True, <code class="docutils literal notranslate"><span class="pre">matrix[i,</span> <span class="pre">j]</span> <span class="pre">==</span> <span class="pre">matrix[j,</span> <span class="pre">i]</span></code>.</p>
</dd>
<dt>return_mapping<span class="classifier">bool, False by default</span></dt><dd><p>If True, a mapping is returned which maps matrix indices to
streamlines.</p>
</dd>
<dt>mapping_as_streamlines<span class="classifier">bool, False by default</span></dt><dd><p>If True voxel indices map to lists of streamline objects. Otherwise
voxel indices map to lists of integers.</p>
</dd>
</dl>
</section>
<section id="id126">
<h4>Returns<a class="headerlink" href="#id126" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>matrix<span class="classifier">ndarray</span></dt><dd><p>The number of connection between each pair of regions in
<cite>label_volume</cite>.</p>
</dd>
<dt>mapping<span class="classifier">defaultdict(list)</span></dt><dd><p><code class="docutils literal notranslate"><span class="pre">mapping[i,</span> <span class="pre">j]</span></code> returns all the streamlines that connect region <cite>i</cite>
to region <cite>j</cite>. If <cite>symmetric</cite> is True mapping will only have one key
for each start end pair such that if <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">&lt;</span> <span class="pre">j</span></code> mapping will have key
<code class="docutils literal notranslate"><span class="pre">(i,</span> <span class="pre">j)</span></code> but not key <code class="docutils literal notranslate"><span class="pre">(j,</span> <span class="pre">i)</span></code>.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="ndbincount">
<h3>ndbincount<a class="headerlink" href="#ndbincount" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.ndbincount">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">ndbincount</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.ndbincount" title="Permalink to this definition">#</a></dt>
<dd><p>Like bincount, but for nd-indices.</p>
<section id="id127">
<h4>Parameters<a class="headerlink" href="#id127" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>x<span class="classifier">array_like (N, M)</span></dt><dd><p>M indices to a an Nd-array</p>
</dd>
<dt>weights<span class="classifier">array_like (M,), optional</span></dt><dd><p>Weights associated with indices</p>
</dd>
<dt>shape<span class="classifier">optional</span></dt><dd><p>the shape of the output</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="reduce-labels">
<h3>reduce_labels<a class="headerlink" href="#reduce-labels" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.reduce_labels">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">reduce_labels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label_volume</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.reduce_labels" title="Permalink to this definition">#</a></dt>
<dd><p>Reduce an array of labels to the integers from 0 to n with smallest
possible n.</p>
<section id="id128">
<h4>Examples<a class="headerlink" href="#id128" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_labels</span><span class="p">,</span> <span class="n">lookup</span> <span class="o">=</span> <span class="n">reduce_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lookup</span>
<span class="go">array([1, 3, 7, 8, 9])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_labels</span> 
<span class="go">array([[0, 1, 4],</span>
<span class="go">       [0, 1, 3],</span>
<span class="go">       [0, 1, 2]]...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">lookup</span><span class="p">[</span><span class="n">new_labels</span><span class="p">]</span> <span class="o">==</span> <span class="n">labels</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="subsegment">
<h3>subsegment<a class="headerlink" href="#subsegment" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.subsegment">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">subsegment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_segment_length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.subsegment" title="Permalink to this definition">#</a></dt>
<dd><p>Split the segments of the streamlines into small segments.</p>
<p>Replaces each segment of each of the streamlines with the smallest possible
number of equally sized smaller segments such that no segment is longer
than max_segment_length. Among other things, this can useful for getting
streamline counts on a grid that is smaller than the length of the
streamline segments.</p>
<section id="id129">
<h4>Parameters<a class="headerlink" href="#id129" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">sequence of ndarrays</span></dt><dd><p>The streamlines to be subsegmented.</p>
</dd>
<dt>max_segment_length<span class="classifier">float</span></dt><dd><p>The longest allowable segment length.</p>
</dd>
</dl>
</section>
<section id="id130">
<h4>Returns<a class="headerlink" href="#id130" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>output_streamlines<span class="classifier">generator</span></dt><dd><p>A set of streamlines.</p>
</dd>
</dl>
</section>
<section id="id131">
<h4>Notes<a class="headerlink" href="#id131" title="Permalink to this heading">#</a></h4>
<p>Segments of 0 length are removed. If unchanged</p>
</section>
<section id="id132">
<h4>Examples<a class="headerlink" href="#id132" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">subsegment</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="mf">3.</span><span class="p">))</span>
<span class="go">[array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 2.,  0.,  0.],</span>
<span class="go">       [ 5.,  0.,  0.]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">subsegment</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">[array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 1.,  0.,  0.],</span>
<span class="go">       [ 2.,  0.,  0.],</span>
<span class="go">       [ 3.,  0.,  0.],</span>
<span class="go">       [ 4.,  0.,  0.],</span>
<span class="go">       [ 5.,  0.,  0.]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">subsegment</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">))</span>
<span class="go">[array([[ 0. ,  0. ,  0. ],</span>
<span class="go">       [ 1. ,  0. ,  0. ],</span>
<span class="go">       [ 2. ,  0. ,  0. ],</span>
<span class="go">       [ 3.5,  0. ,  0. ],</span>
<span class="go">       [ 5. ,  0. ,  0. ]])]</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="seeds-from-mask">
<h3>seeds_from_mask<a class="headerlink" href="#seeds-from-mask" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.seeds_from_mask">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">seeds_from_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">1,</span> <span class="pre">1)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.seeds_from_mask" title="Permalink to this definition">#</a></dt>
<dd><p>Create seeds for fiber tracking from a binary mask.</p>
<p>Seeds points are placed evenly distributed in all voxels of <code class="docutils literal notranslate"><span class="pre">mask</span></code> which
are <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<section id="id133">
<h4>Parameters<a class="headerlink" href="#id133" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>mask<span class="classifier">binary 3d array_like</span></dt><dd><p>A binary array specifying where to place the seeds for fiber tracking.</p>
</dd>
<dt>affine<span class="classifier">array, (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.
A seed point at the center the voxel <code class="docutils literal notranslate"><span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code>
will be represented as <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code> where
<code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">1]</span> <span class="pre">==</span> <span class="pre">np.dot(affine,</span> <span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k</span> <span class="pre">,</span> <span class="pre">1])</span></code>.</p>
</dd>
<dt>density<span class="classifier">int or array_like (3,)</span></dt><dd><p>Specifies the number of seeds to place along each dimension. A
<code class="docutils literal notranslate"><span class="pre">density</span></code> of <cite>2</cite> is the same as <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">2,</span> <span class="pre">2]</span></code> and will result in a
total of 8 seeds per voxel.</p>
</dd>
</dl>
</section>
<section id="id134">
<h4>See Also<a class="headerlink" href="#id134" title="Permalink to this heading">#</a></h4>
<p>random_seeds_from_mask</p>
</section>
<section id="id135">
<h4>Raises<a class="headerlink" href="#id135" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>ValueError</dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">mask</span></code> is not a three-dimensional array</p>
</dd>
</dl>
</section>
<section id="id136">
<h4>Examples<a class="headerlink" href="#id136" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="s1">&#39;bool&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="go">array([[ 0.,  0.,  0.]])</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="random-seeds-from-mask">
<h3>random_seeds_from_mask<a class="headerlink" href="#random-seeds-from-mask" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.random_seeds_from_mask">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">random_seeds_from_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seeds_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed_count_per_voxel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.random_seeds_from_mask" title="Permalink to this definition">#</a></dt>
<dd><p>Create randomly placed seeds for fiber tracking from a binary mask.</p>
<p>Seeds points are placed randomly distributed in voxels of <code class="docutils literal notranslate"><span class="pre">mask</span></code>
which are <code class="docutils literal notranslate"><span class="pre">True</span></code>.
If <code class="docutils literal notranslate"><span class="pre">seed_count_per_voxel</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, this function is
similar to <code class="docutils literal notranslate"><span class="pre">seeds_from_mask()</span></code>, with the difference that instead of
evenly distributing the seeds, it randomly places the seeds within the
voxels specified by the <code class="docutils literal notranslate"><span class="pre">mask</span></code>.</p>
<section id="id137">
<h4>Parameters<a class="headerlink" href="#id137" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>mask<span class="classifier">binary 3d array_like</span></dt><dd><p>A binary array specifying where to place the seeds for fiber tracking.</p>
</dd>
<dt>affine<span class="classifier">array, (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.
A seed point at the center the voxel <code class="docutils literal notranslate"><span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code>
will be represented as <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code> where
<code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">1]</span> <span class="pre">==</span> <span class="pre">np.dot(affine,</span> <span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k</span> <span class="pre">,</span> <span class="pre">1])</span></code>.</p>
</dd>
<dt>seeds_count<span class="classifier">int</span></dt><dd><p>The number of seeds to generate. If <code class="docutils literal notranslate"><span class="pre">seed_count_per_voxel</span></code> is True,
specifies the number of seeds to place in each voxel. Otherwise,
specifies the total number of seeds to place in the mask.</p>
</dd>
<dt>seed_count_per_voxel: bool</dt><dd><p>If True, seeds_count is per voxel, else seeds_count is the total number
of seeds.</p>
</dd>
<dt>random_seed<span class="classifier">int</span></dt><dd><p>The seed for the random seed generator (numpy.random.seed).</p>
</dd>
</dl>
</section>
<section id="id138">
<h4>See Also<a class="headerlink" href="#id138" title="Permalink to this heading">#</a></h4>
<p>seeds_from_mask</p>
</section>
<section id="id139">
<h4>Raises<a class="headerlink" href="#id139" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>ValueError</dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">mask</span></code> is not a three-dimensional array</p>
</dd>
</dl>
</section>
<section id="id140">
<h4>Examples<a class="headerlink" href="#id140" title="Permalink to this heading">#</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="s1">&#39;bool&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random_seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">seeds_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span><span class="n">seed_count_per_voxel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([[-0.0640051 , -0.47407377,  0.04966248]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random_seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">seeds_count</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
<span class="gp">... </span><span class="n">seed_count_per_voxel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([[-0.0640051 , -0.47407377,  0.04966248],</span>
<span class="go">       [ 0.0507979 ,  0.20814782, -0.20909526],</span>
<span class="go">       [ 0.46702984,  0.04723225,  0.47268436],</span>
<span class="go">       [-0.27800683,  0.37073231, -0.29328084],</span>
<span class="go">       [ 0.39286015, -0.16802019,  0.32122912],</span>
<span class="go">       [-0.42369171,  0.27991879, -0.06159077]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random_seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span><span class="n">seeds_count</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seed_count_per_voxel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([[-0.0640051 , -0.47407377,  0.04966248],</span>
<span class="go">       [-0.27800683,  1.37073231,  1.70671916],</span>
<span class="go">       [ 0.0507979 ,  0.20814782, -0.20909526],</span>
<span class="go">       [-0.48962585,  1.00187459,  1.99577329]])</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="target">
<h3>target<a class="headerlink" href="#target" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.target">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">target</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.target" title="Permalink to this definition">#</a></dt>
<dd><p>Filter streamlines based on whether or not they pass through an ROI.</p>
<section id="id141">
<h4>Parameters<a class="headerlink" href="#id141" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">iterable</span></dt><dd><p>A sequence of streamlines. Each streamline should be a (N, 3) array,
where N is the length of the streamline.</p>
</dd>
<dt>affine<span class="classifier">array (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt>target_mask<span class="classifier">array-like</span></dt><dd><p>A mask used as a target. Non-zero values are considered to be within
the target region.</p>
</dd>
<dt>include<span class="classifier">bool, default True</span></dt><dd><p>If True, streamlines passing through <cite>target_mask</cite> are kept. If False,
the streamlines not passing through <cite>target_mask</cite> are kept.</p>
</dd>
</dl>
</section>
<section id="id142">
<h4>Returns<a class="headerlink" href="#id142" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">generator</span></dt><dd><p>A sequence of streamlines that pass through <cite>target_mask</cite>.</p>
</dd>
</dl>
</section>
<section id="id143">
<h4>Raises<a class="headerlink" href="#id143" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>ValueError</dt><dd><p>When the points of the streamlines lie outside of the <cite>target_mask</cite>.</p>
</dd>
</dl>
</section>
<section id="id144">
<h4>See Also<a class="headerlink" href="#id144" title="Permalink to this heading">#</a></h4>
<p>density_map</p>
</section>
</dd></dl>

</section>
<section id="target-line-based">
<h3>target_line_based<a class="headerlink" href="#target-line-based" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.target_line_based">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">target_line_based</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.target_line_based" title="Permalink to this definition">#</a></dt>
<dd><p>Filter streamlines based on whether or not they pass through a ROI,
using a line-based algorithm. Mostly used as a replacement of <cite>target</cite>
for compressed streamlines.</p>
<p>This function never returns single-point streamlines, whatever the
value of <cite>include</cite>.</p>
<section id="id145">
<h4>Parameters<a class="headerlink" href="#id145" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">iterable</span></dt><dd><p>A sequence of streamlines. Each streamline should be a (N, 3) array,
where N is the length of the streamline.</p>
</dd>
<dt>affine<span class="classifier">array (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt>target_mask<span class="classifier">array-like</span></dt><dd><p>A mask used as a target. Non-zero values are considered to be within
the target region.</p>
</dd>
<dt>include<span class="classifier">bool, default True</span></dt><dd><p>If True, streamlines passing through <cite>target_mask</cite> are kept. If False,
the streamlines not passing through <cite>target_mask</cite> are kept.</p>
</dd>
</dl>
</section>
<section id="id146">
<h4>Returns<a class="headerlink" href="#id146" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">generator</span></dt><dd><p>A sequence of streamlines that pass through <cite>target_mask</cite>.</p>
</dd>
</dl>
</section>
<section id="id147">
<h4>References<a class="headerlink" href="#id147" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>[Bresenham5] Bresenham, Jack Elton. “Algorithm for computer control of a</dt><dd><p>digital plotter”, IBM Systems Journal, vol 4, no. 1, 1965.</p>
</dd>
<dt>[Houde15] Houde et al. How to avoid biased streamlines-based metrics for</dt><dd><p>streamlines with variable step sizes, ISMRM 2015.</p>
</dd>
</dl>
</section>
<section id="id148">
<h4>See Also<a class="headerlink" href="#id148" title="Permalink to this heading">#</a></h4>
<p>dipy.tracking.utils.density_map
dipy.tracking.streamline.compress_streamlines</p>
</section>
</dd></dl>

</section>
<section id="streamline-near-roi">
<h3>streamline_near_roi<a class="headerlink" href="#streamline-near-roi" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.streamline_near_roi">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">streamline_near_roi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_coords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'any'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.streamline_near_roi" title="Permalink to this definition">#</a></dt>
<dd><p>Is a streamline near an ROI.</p>
<p>Implements the inner loops of the <a class="reference internal" href="#dipy.tracking.utils.near_roi" title="dipy.tracking.utils.near_roi"><code class="xref py py-func docutils literal notranslate"><span class="pre">near_roi()</span></code></a> function.</p>
<section id="id149">
<h4>Parameters<a class="headerlink" href="#id149" title="Permalink to this heading">#</a></h4>
<dl>
<dt>streamline<span class="classifier">array, shape (N, 3)</span></dt><dd><p>A single streamline</p>
</dd>
<dt>roi_coords<span class="classifier">array, shape (M, 3)</span></dt><dd><p>ROI coordinates transformed to the streamline coordinate frame.</p>
</dd>
<dt>tol<span class="classifier">float</span></dt><dd><p>Distance (in the units of the streamlines, usually mm). If any
coordinate in the streamline is within this distance from the center
of any voxel in the ROI, this function returns True.</p>
</dd>
<dt>mode<span class="classifier">string</span></dt><dd><p>One of {“any”, “all”, “either_end”, “both_end”}, where return True
if:</p>
<p>“any” : any point is within tol from ROI.</p>
<p>“all” : all points are within tol from ROI.</p>
<p>“either_end” : either of the end-points is within tol from ROI</p>
<p>“both_end” : both end points are within tol from ROI.</p>
</dd>
</dl>
</section>
<section id="id150">
<h4>Returns<a class="headerlink" href="#id150" title="Permalink to this heading">#</a></h4>
<p>out : boolean</p>
</section>
</dd></dl>

</section>
<section id="near-roi">
<h3>near_roi<a class="headerlink" href="#near-roi" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.near_roi">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">near_roi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">region_of_interest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'any'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.near_roi" title="Permalink to this definition">#</a></dt>
<dd><p>Provide filtering criteria for a set of streamlines based on whether
they fall within a tolerance distance from an ROI.</p>
<section id="id151">
<h4>Parameters<a class="headerlink" href="#id151" title="Permalink to this heading">#</a></h4>
<dl>
<dt>streamlines<span class="classifier">list or generator</span></dt><dd><p>A sequence of streamlines. Each streamline should be a (N, 3) array,
where N is the length of the streamline.</p>
</dd>
<dt>affine<span class="classifier">array (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt>region_of_interest<span class="classifier">ndarray</span></dt><dd><p>A mask used as a target. Non-zero values are considered to be within
the target region.</p>
</dd>
<dt>tol<span class="classifier">float</span></dt><dd><p>Distance (in the units of the streamlines, usually mm). If any
coordinate in the streamline is within this distance from the center
of any voxel in the ROI, the filtering criterion is set to True for
this streamline, otherwise False. Defaults to the distance between
the center of each voxel and the corner of the voxel.</p>
</dd>
<dt>mode<span class="classifier">string, optional</span></dt><dd><p>One of {“any”, “all”, “either_end”, “both_end”}, where return True
if:</p>
<p>“any” : any point is within tol from ROI. Default.</p>
<p>“all” : all points are within tol from ROI.</p>
<p>“either_end” : either of the end-points is within tol from ROI</p>
<p>“both_end” : both end points are within tol from ROI.</p>
</dd>
</dl>
</section>
<section id="id152">
<h4>Returns<a class="headerlink" href="#id152" title="Permalink to this heading">#</a></h4>
<p>1D array of boolean dtype, shape (len(streamlines), )</p>
<p>This contains <cite>True</cite> for indices corresponding to each streamline
that passes within a tolerance distance from the target ROI, <cite>False</cite>
otherwise.</p>
</section>
</dd></dl>

</section>
<section id="id153">
<h3>length<a class="headerlink" href="#id153" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.length">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.length" title="Permalink to this definition">#</a></dt>
<dd><p>Calculate the lengths of many streamlines in a bundle.</p>
<section id="id154">
<h4>Parameters<a class="headerlink" href="#id154" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">list</span></dt><dd><p>Each item in the list is an array with 3D coordinates of a streamline.</p>
</dd>
</dl>
</section>
<section id="id155">
<h4>Returns<a class="headerlink" href="#id155" title="Permalink to this heading">#</a></h4>
<p>Iterator object which then computes the length of each
streamline in the bundle, upon iteration.</p>
</section>
</dd></dl>

</section>
<section id="unique-rows">
<h3>unique_rows<a class="headerlink" href="#unique-rows" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.unique_rows">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">unique_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'f4'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.unique_rows" title="Permalink to this definition">#</a></dt>
<dd><p>Find the unique rows in an array.</p>
<section id="id156">
<h4>Parameters<a class="headerlink" href="#id156" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>in_array: ndarray</dt><dd><p>The array for which the unique rows should be found</p>
</dd>
<dt>dtype: str, optional</dt><dd><p>This determines the intermediate representation used for the
values. Should at least preserve the values of the input array.</p>
</dd>
</dl>
</section>
<section id="id157">
<h4>Returns<a class="headerlink" href="#id157" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>u_return: ndarray</dt><dd><p>Array with the unique rows of the original array.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="transform-tracking-output">
<h3>transform_tracking_output<a class="headerlink" href="#transform-tracking-output" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.transform_tracking_output">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">transform_tracking_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tracking_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_seeds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.transform_tracking_output" title="Permalink to this definition">#</a></dt>
<dd><p>Apply a linear transformation, given by affine, to streamlines.</p>
<section id="id158">
<h4>Parameters<a class="headerlink" href="#id158" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">Streamlines generator</span></dt><dd><p>Either streamlines (list, ArraySequence) or a tuple with streamlines
and seeds together</p>
</dd>
<dt>affine<span class="classifier">array (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt>save_seeds<span class="classifier">bool, optional</span></dt><dd><p>If set, seeds associated to streamlines will be also moved and returned</p>
</dd>
</dl>
</section>
<section id="id159">
<h4>Returns<a class="headerlink" href="#id159" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">generator</span></dt><dd><p>A generator for the sequence of transformed streamlines.
If save_seeds is True, also return a generator for the
transformed seeds.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="reduce-rois">
<h3>reduce_rois<a class="headerlink" href="#reduce-rois" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.reduce_rois">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">reduce_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rois</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.reduce_rois" title="Permalink to this definition">#</a></dt>
<dd><p>Reduce multiple ROIs to one inclusion and one exclusion ROI.</p>
<section id="id160">
<h4>Parameters<a class="headerlink" href="#id160" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>rois<span class="classifier">list or ndarray</span></dt><dd><p>A list of 3D arrays, each with shape (x, y, z) corresponding to the
shape of the brain volume, or a 4D array with shape (n_rois, x, y,
z). Non-zeros in each volume are considered to be within the region.</p>
</dd>
<dt>include<span class="classifier">array or list</span></dt><dd><p>A list or 1D array of boolean marking inclusion or exclusion
criteria.</p>
</dd>
</dl>
</section>
<section id="id161">
<h4>Returns<a class="headerlink" href="#id161" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>include_roi<span class="classifier">boolean 3D array</span></dt><dd><p>An array marking the inclusion mask.</p>
</dd>
<dt>exclude_roi<span class="classifier">boolean 3D array</span></dt><dd><p>An array marking the exclusion mask</p>
</dd>
</dl>
</section>
<section id="id162">
<h4>Notes<a class="headerlink" href="#id162" title="Permalink to this heading">#</a></h4>
<p>The include_roi and exclude_roi can be used to perform the operation: “(A
or B or …) and not (X or Y or …)”, where A, B are inclusion regions
and X, Y are exclusion regions.</p>
</section>
</dd></dl>

</section>
<section id="path-length">
<h3>path_length<a class="headerlink" href="#path-length" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.path_length">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">path_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aoi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.path_length" title="Permalink to this definition">#</a></dt>
<dd><p>Compute the shortest path, along any streamline, between aoi and
each voxel.</p>
<section id="id163">
<h4>Parameters<a class="headerlink" href="#id163" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>streamlines<span class="classifier">seq of (N, 3) arrays</span></dt><dd><p>A sequence of streamlines, path length is given in mm along the curve
of the streamline.</p>
</dd>
<dt>aoi<span class="classifier">array, 3d</span></dt><dd><p>A mask (binary array) of voxels from which to start computing distance.</p>
</dd>
<dt>affine<span class="classifier">array (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt>fill_value<span class="classifier">float</span></dt><dd><p>The value of voxel in the path length map that are not connected to the
aoi.</p>
</dd>
</dl>
</section>
<section id="id164">
<h4>Returns<a class="headerlink" href="#id164" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>plm<span class="classifier">array</span></dt><dd><p>Same shape as aoi. The minimum distance between every point and aoi
along the path of a streamline.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="max-angle-from-curvature">
<h3>max_angle_from_curvature<a class="headerlink" href="#max-angle-from-curvature" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.max_angle_from_curvature">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">max_angle_from_curvature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_radius_curvature</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.max_angle_from_curvature" title="Permalink to this definition">#</a></dt>
<dd><p>Get the maximum deviation angle from the minimum radius curvature.</p>
<section id="id165">
<h4>Parameters<a class="headerlink" href="#id165" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>min_radius_curvature: float</dt><dd><p>Minimum radius of curvature in mm.</p>
</dd>
<dt>step_size: float</dt><dd><p>The tracking step size in mm.</p>
</dd>
</dl>
</section>
<section id="id166">
<h4>Returns<a class="headerlink" href="#id166" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>max_angle: float</dt><dd><p>The maximum deviation angle in radian,
given the radius curvature and the step size.</p>
</dd>
</dl>
</section>
<section id="id167">
<h4>References<a class="headerlink" href="#id167" title="Permalink to this heading">#</a></h4>
<p>For more information:
<a class="reference external" href="https://onlinelibrary.wiley.com/doi/full/10.1002/ima.22005">https://onlinelibrary.wiley.com/doi/full/10.1002/ima.22005</a></p>
</section>
</dd></dl>

</section>
<section id="min-radius-curvature-from-angle">
<h3>min_radius_curvature_from_angle<a class="headerlink" href="#min-radius-curvature-from-angle" title="Permalink to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.min_radius_curvature_from_angle">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">min_radius_curvature_from_angle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_angle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.min_radius_curvature_from_angle" title="Permalink to this definition">#</a></dt>
<dd><p>Get minimum radius of curvature from a deviation angle.</p>
<section id="id168">
<h4>Parameters<a class="headerlink" href="#id168" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>max_angle: float</dt><dd><p>The maximum deviation angle in radian.
theta should be between [0 - pi/2] otherwise default will be pi/2.</p>
</dd>
<dt>step_size: float</dt><dd><p>The tracking step size in mm.</p>
</dd>
</dl>
</section>
<section id="id169">
<h4>Returns<a class="headerlink" href="#id169" title="Permalink to this heading">#</a></h4>
<dl class="simple">
<dt>min_radius_curvature: float</dt><dd><p>Minimum radius of curvature in mm,
given the maximum deviation angle theta and the step size.</p>
</dd>
</dl>
</section>
<section id="id170">
<h4>References<a class="headerlink" href="#id170" title="Permalink to this heading">#</a></h4>
<p>More information:
<a class="reference external" href="https://onlinelibrary.wiley.com/doi/full/10.1002/ima.22005">https://onlinelibrary.wiley.com/doi/full/10.1002/ima.22005</a></p>
</section>
</dd></dl>

</section>
</section>
</section>

<div class="section ablog__blog_comments">
  
  
</div>

                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="dipy.stats.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stats</span></code></p>
      </div>
    </a>
    <a class="right-next"
       href="dipy.viz.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><code class="xref py py-mod docutils literal notranslate"><span class="pre">viz</span></code></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking._utils">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking._utils</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.benchmarks">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.benchmarks</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.benchmarks.bench_streamline">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.benchmarks.bench_streamline</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.learning">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.learning</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.life">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.life</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.local_tracking">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.local_tracking</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.mesh">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.mesh</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.metrics">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.metrics</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.streamline">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.streamline</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.utils">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.utils</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#important-notes">Important Notes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">setup</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.benchmarks.bench_streamline.setup"><code class="docutils literal notranslate"><span class="pre">setup()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-streamlines">generate_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.benchmarks.bench_streamline.generate_streamlines"><code class="docutils literal notranslate"><span class="pre">generate_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bench-set-number-of-points">bench_set_number_of_points</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.benchmarks.bench_streamline.bench_set_number_of_points"><code class="docutils literal notranslate"><span class="pre">bench_set_number_of_points()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bench-length">bench_length</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.benchmarks.bench_streamline.bench_length"><code class="docutils literal notranslate"><span class="pre">bench_length()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bench-compress-streamlines">bench_compress_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.benchmarks.bench_streamline.bench_compress_streamlines"><code class="docutils literal notranslate"><span class="pre">bench_compress_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#detect-corresponding-tracks">detect_corresponding_tracks</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.learning.detect_corresponding_tracks"><code class="docutils literal notranslate"><span class="pre">detect_corresponding_tracks()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#detect-corresponding-tracks-plus">detect_corresponding_tracks_plus</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.learning.detect_corresponding_tracks_plus"><code class="docutils literal notranslate"><span class="pre">detect_corresponding_tracks_plus()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lifesignalmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">LifeSignalMaker</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.LifeSignalMaker"><code class="docutils literal notranslate"><span class="pre">LifeSignalMaker</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.LifeSignalMaker.__init__"><code class="docutils literal notranslate"><span class="pre">LifeSignalMaker.__init__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.LifeSignalMaker.calc_signal"><code class="docutils literal notranslate"><span class="pre">LifeSignalMaker.calc_signal()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.LifeSignalMaker.streamline_signal"><code class="docutils literal notranslate"><span class="pre">LifeSignalMaker.streamline_signal()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fibermodel"><code class="xref py py-class docutils literal notranslate"><span class="pre">FiberModel</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.FiberModel"><code class="docutils literal notranslate"><span class="pre">FiberModel</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.FiberModel.__init__"><code class="docutils literal notranslate"><span class="pre">FiberModel.__init__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.FiberModel.fit"><code class="docutils literal notranslate"><span class="pre">FiberModel.fit()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.FiberModel.setup"><code class="docutils literal notranslate"><span class="pre">FiberModel.setup()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fiberfit"><code class="xref py py-class docutils literal notranslate"><span class="pre">FiberFit</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.FiberFit"><code class="docutils literal notranslate"><span class="pre">FiberFit</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.FiberFit.__init__"><code class="docutils literal notranslate"><span class="pre">FiberFit.__init__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.FiberFit.predict"><code class="docutils literal notranslate"><span class="pre">FiberFit.predict()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gradient">gradient</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.gradient"><code class="docutils literal notranslate"><span class="pre">gradient()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streamline-gradients">streamline_gradients</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.streamline_gradients"><code class="docutils literal notranslate"><span class="pre">streamline_gradients()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grad-tensor">grad_tensor</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.grad_tensor"><code class="docutils literal notranslate"><span class="pre">grad_tensor()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streamline-tensors">streamline_tensors</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.streamline_tensors"><code class="docutils literal notranslate"><span class="pre">streamline_tensors()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streamline-signal">streamline_signal</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.streamline_signal"><code class="docutils literal notranslate"><span class="pre">streamline_signal()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#voxel2streamline">voxel2streamline</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.voxel2streamline"><code class="docutils literal notranslate"><span class="pre">voxel2streamline()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#localtracking"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalTracking</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.local_tracking.LocalTracking"><code class="docutils literal notranslate"><span class="pre">LocalTracking</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.local_tracking.LocalTracking.__init__"><code class="docutils literal notranslate"><span class="pre">LocalTracking.__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#particlefilteringtracking"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParticleFilteringTracking</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.local_tracking.ParticleFilteringTracking"><code class="docutils literal notranslate"><span class="pre">ParticleFilteringTracking</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.local_tracking.ParticleFilteringTracking.__init__"><code class="docutils literal notranslate"><span class="pre">ParticleFilteringTracking.__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random-coordinates-from-surface">random_coordinates_from_surface</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.mesh.random_coordinates_from_surface"><code class="docutils literal notranslate"><span class="pre">random_coordinates_from_surface()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seeds-from-surface-coordinates">seeds_from_surface_coordinates</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.mesh.seeds_from_surface_coordinates"><code class="docutils literal notranslate"><span class="pre">seeds_from_surface_coordinates()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#triangles-area">triangles_area</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.mesh.triangles_area"><code class="docutils literal notranslate"><span class="pre">triangles_area()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vertices-to-triangles-values">vertices_to_triangles_values</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.mesh.vertices_to_triangles_values"><code class="docutils literal notranslate"><span class="pre">vertices_to_triangles_values()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#winding">winding</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.winding"><code class="docutils literal notranslate"><span class="pre">winding()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#length">length</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.length"><code class="docutils literal notranslate"><span class="pre">length()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bytes">bytes</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.bytes"><code class="docutils literal notranslate"><span class="pre">bytes()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#midpoint">midpoint</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.midpoint"><code class="docutils literal notranslate"><span class="pre">midpoint()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#downsample">downsample</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.downsample"><code class="docutils literal notranslate"><span class="pre">downsample()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#center-of-mass">center_of_mass</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.center_of_mass"><code class="docutils literal notranslate"><span class="pre">center_of_mass()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#magn">magn</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.magn"><code class="docutils literal notranslate"><span class="pre">magn()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#frenet-serret">frenet_serret</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.frenet_serret"><code class="docutils literal notranslate"><span class="pre">frenet_serret()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mean-curvature">mean_curvature</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.mean_curvature"><code class="docutils literal notranslate"><span class="pre">mean_curvature()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mean-orientation">mean_orientation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.mean_orientation"><code class="docutils literal notranslate"><span class="pre">mean_orientation()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-combinations">generate_combinations</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.generate_combinations"><code class="docutils literal notranslate"><span class="pre">generate_combinations()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#longest-track-bundle">longest_track_bundle</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.longest_track_bundle"><code class="docutils literal notranslate"><span class="pre">longest_track_bundle()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#intersect-sphere">intersect_sphere</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.intersect_sphere"><code class="docutils literal notranslate"><span class="pre">intersect_sphere()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#inside-sphere">inside_sphere</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.inside_sphere"><code class="docutils literal notranslate"><span class="pre">inside_sphere()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#inside-sphere-points">inside_sphere_points</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.inside_sphere_points"><code class="docutils literal notranslate"><span class="pre">inside_sphere_points()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spline">spline</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.spline"><code class="docutils literal notranslate"><span class="pre">spline()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#startpoint">startpoint</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.startpoint"><code class="docutils literal notranslate"><span class="pre">startpoint()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#endpoint">endpoint</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.endpoint"><code class="docutils literal notranslate"><span class="pre">endpoint()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#arbitrarypoint">arbitrarypoint</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.arbitrarypoint"><code class="docutils literal notranslate"><span class="pre">arbitrarypoint()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#principal-components">principal_components</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.principal_components"><code class="docutils literal notranslate"><span class="pre">principal_components()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#midpoint2point">midpoint2point</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.midpoint2point"><code class="docutils literal notranslate"><span class="pre">midpoint2point()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unlist-streamlines">unlist_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.unlist_streamlines"><code class="docutils literal notranslate"><span class="pre">unlist_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#relist-streamlines">relist_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.relist_streamlines"><code class="docutils literal notranslate"><span class="pre">relist_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#center-streamlines">center_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.center_streamlines"><code class="docutils literal notranslate"><span class="pre">center_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deform-streamlines">deform_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.deform_streamlines"><code class="docutils literal notranslate"><span class="pre">deform_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transform-streamlines">transform_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.transform_streamlines"><code class="docutils literal notranslate"><span class="pre">transform_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#select-random-set-of-streamlines">select_random_set_of_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.select_random_set_of_streamlines"><code class="docutils literal notranslate"><span class="pre">select_random_set_of_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#select-by-rois">select_by_rois</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.select_by_rois"><code class="docutils literal notranslate"><span class="pre">select_by_rois()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cluster-confidence">cluster_confidence</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.cluster_confidence"><code class="docutils literal notranslate"><span class="pre">cluster_confidence()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#orient-by-rois">orient_by_rois</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.orient_by_rois"><code class="docutils literal notranslate"><span class="pre">orient_by_rois()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#orient-by-streamline">orient_by_streamline</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.orient_by_streamline"><code class="docutils literal notranslate"><span class="pre">orient_by_streamline()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#values-from-volume">values_from_volume</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.values_from_volume"><code class="docutils literal notranslate"><span class="pre">values_from_volume()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nbytes">nbytes</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.nbytes"><code class="docutils literal notranslate"><span class="pre">nbytes()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#density-map">density_map</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.density_map"><code class="docutils literal notranslate"><span class="pre">density_map()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#connectivity-matrix">connectivity_matrix</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.connectivity_matrix"><code class="docutils literal notranslate"><span class="pre">connectivity_matrix()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ndbincount">ndbincount</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.ndbincount"><code class="docutils literal notranslate"><span class="pre">ndbincount()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reduce-labels">reduce_labels</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.reduce_labels"><code class="docutils literal notranslate"><span class="pre">reduce_labels()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#subsegment">subsegment</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.subsegment"><code class="docutils literal notranslate"><span class="pre">subsegment()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seeds-from-mask">seeds_from_mask</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.seeds_from_mask"><code class="docutils literal notranslate"><span class="pre">seeds_from_mask()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random-seeds-from-mask">random_seeds_from_mask</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.random_seeds_from_mask"><code class="docutils literal notranslate"><span class="pre">random_seeds_from_mask()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#target">target</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.target"><code class="docutils literal notranslate"><span class="pre">target()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#target-line-based">target_line_based</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.target_line_based"><code class="docutils literal notranslate"><span class="pre">target_line_based()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streamline-near-roi">streamline_near_roi</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.streamline_near_roi"><code class="docutils literal notranslate"><span class="pre">streamline_near_roi()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#near-roi">near_roi</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.near_roi"><code class="docutils literal notranslate"><span class="pre">near_roi()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id153">length</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.length"><code class="docutils literal notranslate"><span class="pre">length()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unique-rows">unique_rows</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.unique_rows"><code class="docutils literal notranslate"><span class="pre">unique_rows()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transform-tracking-output">transform_tracking_output</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.transform_tracking_output"><code class="docutils literal notranslate"><span class="pre">transform_tracking_output()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reduce-rois">reduce_rois</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.reduce_rois"><code class="docutils literal notranslate"><span class="pre">reduce_rois()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#path-length">path_length</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.path_length"><code class="docutils literal notranslate"><span class="pre">path_length()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#max-angle-from-curvature">max_angle_from_curvature</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.max_angle_from_curvature"><code class="docutils literal notranslate"><span class="pre">max_angle_from_curvature()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#min-radius-curvature-from-angle">min_radius_curvature_from_angle</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.min_radius_curvature_from_angle"><code class="docutils literal notranslate"><span class="pre">min_radius_curvature_from_angle()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  
<script type="module" src="../_static/scripts/grg-sphinx-theme.js"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2008-2023, dipy developers &lt;neuroimaging@python.org&gt;.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

    <div class="copyright-text">
      <i class="fa-regular fa-copyright"></i> 
    </div>
  </footer>
  </body>
</html>