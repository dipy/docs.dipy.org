
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>DIPY &#8212; dipy 1.11.0.dev0+git20241213.932dcbd documentation</title>
  
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/css/dipy.css?v=cedb193d" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

  
<link rel="stylesheet" href="../_static/styles/grg-sphinx-theme.css"/>

    <script src="../_static/documentation_options.js?v=e000a0f7"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-D610GKJZRC"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-D610GKJZRC');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-D610GKJZRC');
            </script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'reference/dipy.tracking';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://docs.dipy.org/dev/_static/version_switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'development';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = true;
        </script>
    <link rel="icon" href="../_static/dipy-favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="viz" href="dipy.viz.html" />
    <link rel="prev" title="stats" href="dipy.stats.html" />
  <meta name="keywords" content="DIPY, dMRI, DTI, DSI, diffusion MRI, Tensor,
  neuroimaging, python, neuroscience, Eleftherios, Garyfallidis, tractography,
  streamlines, fiber tracking">

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
<nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
     
  

<a class="navbar-brand logo" href="https://dipy.org">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/dipy-logo.png" class="logo__image only-light" alt="DIPY"/>
    <script>document.write(`<img src="../_static/dipy-logo.png" class="logo__image only-dark" alt="DIPY"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  
  <ul class="bd-navbar-elements navbar-nav">
    
          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Docs
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
      <li class="nav-item">
        <a class="nav-link" href="../index.html">
          Overview
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../examples_built/index.html">
          Tutorials
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../recipes.html">
          Recipes
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../interfaces/index.html">
          CLI / Workflows
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="index.html">
          API
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../reference_cmd/index.html">
          CLI API
        </a>
      </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Workshops
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Latest
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2024" target="_blank">
            DIPY Workshop 2024 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Past
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2023" target="_blank">
            DIPY Workshop 2023 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2022" target="_blank">
            DIPY Workshop 2022 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2021" target="_blank">
            DIPY Workshop 2021 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2020" target="_blank">
            DIPY Workshop 2020 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2019" target="_blank">
            DIPY Workshop 2019 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Community
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
    <li class="nav-item">
      <p class="nav-section-title nav-link">
        News
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/calendar">
            Calendar
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://mail.python.org/mailman3/lists/dipy.python.org/" target="_blank">
            Newsletters <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/blog">
            Blog
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://www.youtube.com/c/diffusionimaginginpython" target="_blank">
            Youtube <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Help
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://app.gitter.im/#/room/%23dipy_dipy:gitter.im" target="_blank">
            Live Chat (Gitter) <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://github.com/dipy/dipy/discussions" target="_blank">
            Github Discussions <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    About
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/team">
            Team
          </a>
        </li>

      <li class="nav-item">
        <a class="nav-link" href="../faq.html">
          FAQ
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../user_guide/mission.html">
          Mission Statement
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../stateoftheart.html">
          Releases
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../cite.html">
          Cite
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../glossary.html">
          Glossary
        </a>
      </li>
                </ul>
            </li>
          
  </ul>
  
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/dipy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/dipymri" title="Twitter/X" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter/X</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/c/diffusionimaginginpython" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.linkedin.com/company/dipy/" title="LinkedIn" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-linkedin fa-lg" aria-hidden="true"></i>
            <span class="sr-only">LinkedIn</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

</nav>

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  
  <ul class="bd-navbar-elements navbar-nav">
    
          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Docs
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
      <li class="nav-item">
        <a class="nav-link" href="../index.html">
          Overview
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../examples_built/index.html">
          Tutorials
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../recipes.html">
          Recipes
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../interfaces/index.html">
          CLI / Workflows
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="index.html">
          API
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../reference_cmd/index.html">
          CLI API
        </a>
      </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Workshops
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Latest
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2024" target="_blank">
            DIPY Workshop 2024 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Past
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2023" target="_blank">
            DIPY Workshop 2023 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2022" target="_blank">
            DIPY Workshop 2022 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2021" target="_blank">
            DIPY Workshop 2021 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2020" target="_blank">
            DIPY Workshop 2020 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2019" target="_blank">
            DIPY Workshop 2019 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Community
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
    <li class="nav-item">
      <p class="nav-section-title nav-link">
        News
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/calendar">
            Calendar
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://mail.python.org/mailman3/lists/dipy.python.org/" target="_blank">
            Newsletters <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/blog">
            Blog
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://www.youtube.com/c/diffusionimaginginpython" target="_blank">
            Youtube <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Help
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://app.gitter.im/#/room/%23dipy_dipy:gitter.im" target="_blank">
            Live Chat (Gitter) <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://github.com/dipy/dipy/discussions" target="_blank">
            Github Discussions <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    About
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/team">
            Team
          </a>
        </li>

      <li class="nav-item">
        <a class="nav-link" href="../faq.html">
          FAQ
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../user_guide/mission.html">
          Mission Statement
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../stateoftheart.html">
          Releases
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../cite.html">
          Cite
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../glossary.html">
          Glossary
        </a>
      </li>
                </ul>
            </li>
          
  </ul>
  
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/dipy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/dipymri" title="Twitter/X" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter/X</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/c/diffusionimaginginpython" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.linkedin.com/company/dipy/" title="LinkedIn" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-linkedin fa-lg" aria-hidden="true"></i>
            <span class="sr-only">LinkedIn</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dipy.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dipy</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dipy.align.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">align</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dipy.core.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">core</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dipy.data.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">data</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dipy.denoise.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">denoise</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dipy.direction.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">direction</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dipy.io.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">io</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dipy.nn.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nn</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dipy.reconst.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">reconst</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dipy.segment.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">segment</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dipy.sims.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sims</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dipy.stats.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stats</span></code></a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dipy.viz.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">viz</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="dipy.workflows.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows</span></code></a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">API Reference</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">DIPY</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="module-dipy.tracking">
<span id="tracking"></span><h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking</span></code><a class="headerlink" href="#module-dipy.tracking" title="Link to this heading">#</a></h1>
<p>Tracking objects</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
</tbody>
</table>
</div>
<section id="module-dipy.tracking._utils">
<span id="module-tracking-utils"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking._utils</span></code><a class="headerlink" href="#module-dipy.tracking._utils" title="Link to this heading">#</a></h2>
<p>This is a helper module for dipy.tracking.utils.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.direction_getter">
<span id="module-tracking-direction-getter"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.direction_getter</span></code><a class="headerlink" href="#module-dipy.tracking.direction_getter" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.direction_getter.DirectionGetter" title="dipy.tracking.direction_getter.DirectionGetter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DirectionGetter</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.distances">
<span id="module-tracking-distances"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.distances</span></code><a class="headerlink" href="#module-dipy.tracking.distances" title="Link to this heading">#</a></h2>
<p>Optimized track distances, similarities and distanch clustering algorithms</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.distances.add_3vecs" title="dipy.tracking.distances.add_3vecs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_3vecs</span></code></a>(vec1, vec2)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.distances.approx_polygon_track" title="dipy.tracking.distances.approx_polygon_track"><code class="xref py py-obj docutils literal notranslate"><span class="pre">approx_polygon_track</span></code></a>(xyz[, alpha])</p></td>
<td><p>Fast and simple trajectory approximation algorithm by Eleftherios and Ian</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.distances.approximate_mdl_trajectory" title="dipy.tracking.distances.approximate_mdl_trajectory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">approximate_mdl_trajectory</span></code></a>(xyz[, alpha])</p></td>
<td><p>Implementation of Lee et al Approximate Trajectory Partitioning Algorithm</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.distances.bundles_distances_mam" title="dipy.tracking.distances.bundles_distances_mam"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bundles_distances_mam</span></code></a>(tracksA, tracksB[, metric])</p></td>
<td><p>Calculate distances between list of tracks A and list of tracks B</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.distances.bundles_distances_mdf" title="dipy.tracking.distances.bundles_distances_mdf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bundles_distances_mdf</span></code></a>(tracksA, tracksB)</p></td>
<td><p>Calculate distances between list of tracks A and list of tracks B</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.distances.cut_plane" title="dipy.tracking.distances.cut_plane"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cut_plane</span></code></a>(tracks, ref)</p></td>
<td><p>Extract divergence vectors and points of intersection between planes normal to the reference fiber and other tracks</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.distances.inner_3vecs" title="dipy.tracking.distances.inner_3vecs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">inner_3vecs</span></code></a>(vec1, vec2)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.distances.intersect_segment_cylinder" title="dipy.tracking.distances.intersect_segment_cylinder"><code class="xref py py-obj docutils literal notranslate"><span class="pre">intersect_segment_cylinder</span></code></a>(sa, sb, p, q, r)</p></td>
<td><p>Intersect Segment S(t) = sa +t(sb-sa), 0 &lt;=t&lt;= 1 against cylinder specified by p,q and r</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.distances.larch_3merge" title="dipy.tracking.distances.larch_3merge"><code class="xref py py-obj docutils literal notranslate"><span class="pre">larch_3merge</span></code></a>(C[, thr])</p></td>
<td><p>Reassign tracks to existing clusters by merging clusters that their representative tracks are not very distant i.e. less than sqd_thr.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.distances.larch_3split" title="dipy.tracking.distances.larch_3split"><code class="xref py py-obj docutils literal notranslate"><span class="pre">larch_3split</span></code></a>(tracks[, indices, thr])</p></td>
<td><p>Generate a first pass clustering using 3 points on the tracks only.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.distances.lee_angle_distance" title="dipy.tracking.distances.lee_angle_distance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lee_angle_distance</span></code></a>(start0, end0, start1, end1)</p></td>
<td><p>Calculates angle distance metric for the distance between two line segments</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.distances.lee_perpendicular_distance" title="dipy.tracking.distances.lee_perpendicular_distance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lee_perpendicular_distance</span></code></a>(start0, end0, ...)</p></td>
<td><p>Calculates perpendicular distance metric for the distance between two line segments</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.distances.local_skeleton_clustering" title="dipy.tracking.distances.local_skeleton_clustering"><code class="xref py py-obj docutils literal notranslate"><span class="pre">local_skeleton_clustering</span></code></a>(tracks[, d_thr])</p></td>
<td><p>Efficient tractography clustering</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.distances.local_skeleton_clustering_3pts" title="dipy.tracking.distances.local_skeleton_clustering_3pts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">local_skeleton_clustering_3pts</span></code></a>(tracks[, d_thr])</p></td>
<td><p>Does a first pass clustering</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.distances.mam_distances" title="dipy.tracking.distances.mam_distances"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mam_distances</span></code></a>(xyz1, xyz2[, metric])</p></td>
<td><p>Min/Max/Mean Average Minimum Distance between tracks xyz1 and xyz2</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.distances.minimum_closest_distance" title="dipy.tracking.distances.minimum_closest_distance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">minimum_closest_distance</span></code></a>(xyz1, xyz2)</p></td>
<td><p>Find the minimum distance between two curves xyz1, xyz2</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.distances.most_similar_track_mam" title="dipy.tracking.distances.most_similar_track_mam"><code class="xref py py-obj docutils literal notranslate"><span class="pre">most_similar_track_mam</span></code></a>(tracks[, metric])</p></td>
<td><p>Find the most similar track in a bundle using distances calculated from Zhang et.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.distances.mul_3vec" title="dipy.tracking.distances.mul_3vec"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mul_3vec</span></code></a>(a, vec)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.distances.mul_3vecs" title="dipy.tracking.distances.mul_3vecs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mul_3vecs</span></code></a>(vec1, vec2)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.distances.norm_3vec" title="dipy.tracking.distances.norm_3vec"><code class="xref py py-obj docutils literal notranslate"><span class="pre">norm_3vec</span></code></a>(vec)</p></td>
<td><p>Euclidean (L2) norm of length 3 vector</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.distances.normalized_3vec" title="dipy.tracking.distances.normalized_3vec"><code class="xref py py-obj docutils literal notranslate"><span class="pre">normalized_3vec</span></code></a>(vec)</p></td>
<td><p>Return normalized 3D vector</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.distances.point_segment_sq_distance" title="dipy.tracking.distances.point_segment_sq_distance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">point_segment_sq_distance</span></code></a>(a, b, c)</p></td>
<td><p>Calculate the squared distance from a point c to a finite line segment ab.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.distances.point_track_sq_distance_check" title="dipy.tracking.distances.point_track_sq_distance_check"><code class="xref py py-obj docutils literal notranslate"><span class="pre">point_track_sq_distance_check</span></code></a>(track, point, ...)</p></td>
<td><p>Check if square distance of track from point is smaller than threshold</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.distances.sub_3vecs" title="dipy.tracking.distances.sub_3vecs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sub_3vecs</span></code></a>(vec1, vec2)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.distances.track_dist_3pts" title="dipy.tracking.distances.track_dist_3pts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">track_dist_3pts</span></code></a>(tracka, trackb)</p></td>
<td><p>Calculate the euclidean distance between two 3pt tracks</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.distances.track_roi_intersection_check" title="dipy.tracking.distances.track_roi_intersection_check"><code class="xref py py-obj docutils literal notranslate"><span class="pre">track_roi_intersection_check</span></code></a>(track, roi, ...)</p></td>
<td><p>Check if a track is intersecting a region of interest</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">warn</span></code>()</p></td>
<td><p>Issue a warning, or maybe ignore it or raise an exception.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.fbcmeasures">
<span id="module-tracking-fbcmeasures"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.fbcmeasures</span></code><a class="headerlink" href="#module-dipy.tracking.fbcmeasures" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.fbcmeasures.FBCMeasures" title="dipy.tracking.fbcmeasures.FBCMeasures"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FBCMeasures</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.fbcmeasures.KDTree" title="dipy.tracking.fbcmeasures.KDTree"><code class="xref py py-obj docutils literal notranslate"><span class="pre">KDTree</span></code></a>(data[, leafsize, compact_nodes, ...])</p></td>
<td><p>kd-tree for quick nearest-neighbor lookup.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.fbcmeasures.interp1d" title="dipy.tracking.fbcmeasures.interp1d"><code class="xref py py-obj docutils literal notranslate"><span class="pre">interp1d</span></code></a>(x, y[, kind, axis, copy, ...])</p></td>
<td><p>Interpolate a 1-D function.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.fbcmeasures.compute_rfbc" title="dipy.tracking.fbcmeasures.compute_rfbc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_rfbc</span></code></a>(streamlines_length, ...[, ...])</p></td>
<td><p>Compute the relative fiber to bundle coherence (RFBC)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.fbcmeasures.determine_num_threads" title="dipy.tracking.fbcmeasures.determine_num_threads"><code class="xref py py-obj docutils literal notranslate"><span class="pre">determine_num_threads</span></code></a>(num_threads)</p></td>
<td><p>Determine the effective number of threads to be used for OpenMP calls</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.fbcmeasures.min_moving_average" title="dipy.tracking.fbcmeasures.min_moving_average"><code class="xref py py-obj docutils literal notranslate"><span class="pre">min_moving_average</span></code></a>(a, n)</p></td>
<td><p>Return the lowest cumulative sum for the score of a streamline segment</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.learning">
<span id="module-tracking-learning"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.learning</span></code><a class="headerlink" href="#module-dipy.tracking.learning" title="Link to this heading">#</a></h2>
<p>Learning algorithms for tractography</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.learning.detect_corresponding_tracks" title="dipy.tracking.learning.detect_corresponding_tracks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">detect_corresponding_tracks</span></code></a>(indices, ...)</p></td>
<td><p>Detect corresponding tracks from list tracks1 to list tracks2 where tracks1 &amp; tracks2 are lists of tracks</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.learning.detect_corresponding_tracks_plus" title="dipy.tracking.learning.detect_corresponding_tracks_plus"><code class="xref py py-obj docutils literal notranslate"><span class="pre">detect_corresponding_tracks_plus</span></code></a>(indices, ...)</p></td>
<td><p>Detect corresponding tracks from 1 to 2 where tracks1 &amp; tracks2 are sequences of tracks</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.life">
<span id="module-tracking-life"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.life</span></code><a class="headerlink" href="#module-dipy.tracking.life" title="Link to this heading">#</a></h2>
<p>This is an implementation of the Linear Fascicle Evaluation (LiFE) algorithm
described in <a class="footnote-reference brackets" href="#footcite-pestilli2014" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<section id="references">
<h3>References<a class="headerlink" href="#references" title="Link to this heading">#</a></h3>
<div class="docutils container" id="id2">
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footcite-pestilli2014" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id10">2</a>)</span>
<p>Franco Pestilli, Jason D. Yeatman, Ariel Rokem, Kendrick N. Kay, and Brian A. Wandell. Evaluation and statistical inference for human connectomes. <em>Nature Methods</em>, 11(10):1058–1063, 2014. URL: <a class="reference external" href="https://doi.org/10.1038/nmeth.3098">https://doi.org/10.1038/nmeth.3098</a>, <a class="reference external" href="https://doi.org/10.1038/nmeth.3098">doi:10.1038/nmeth.3098</a>.</p>
</aside>
</aside>
</div>
</section>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.life.LifeSignalMaker" title="dipy.tracking.life.LifeSignalMaker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LifeSignalMaker</span></code></a>(gtab, *[, evals, sphere])</p></td>
<td><p>A class for generating signals from streamlines in an efficient and speedy manner.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.life.FiberModel" title="dipy.tracking.life.FiberModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FiberModel</span></code></a>(gtab)</p></td>
<td><p>A class for representing and solving predictive models based on tractography solutions.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.life.FiberFit" title="dipy.tracking.life.FiberFit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FiberFit</span></code></a>(fiber_model, life_matrix, ...)</p></td>
<td><p>A fit of the LiFE model to diffusion data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.life.gradient" title="dipy.tracking.life.gradient"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gradient</span></code></a>(f)</p></td>
<td><p>Return the gradient of an N-dimensional array.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.life.streamline_gradients" title="dipy.tracking.life.streamline_gradients"><code class="xref py py-obj docutils literal notranslate"><span class="pre">streamline_gradients</span></code></a>(streamline)</p></td>
<td><p>Calculate the gradients of the streamline along the spatial dimension</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.life.grad_tensor" title="dipy.tracking.life.grad_tensor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grad_tensor</span></code></a>(grad, evals)</p></td>
<td><p>Calculate the 3 by 3 tensor for a given spatial gradient, given a canonical tensor shape (also as a 3 by 3), pointing at [1,0,0]</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.life.streamline_tensors" title="dipy.tracking.life.streamline_tensors"><code class="xref py py-obj docutils literal notranslate"><span class="pre">streamline_tensors</span></code></a>(streamline, *[, evals])</p></td>
<td><p>The tensors generated by this fiber.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.life.streamline_signal" title="dipy.tracking.life.streamline_signal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">streamline_signal</span></code></a>(streamline, gtab, *[, evals])</p></td>
<td><p>The signal from a single streamline estimate along each of its nodes.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.life.voxel2streamline" title="dipy.tracking.life.voxel2streamline"><code class="xref py py-obj docutils literal notranslate"><span class="pre">voxel2streamline</span></code></a>(streamline, affine, *[, ...])</p></td>
<td><p>Maps voxels to streamlines and streamlines to voxels, for setting up the LiFE equations matrix</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.local_tracking">
<span id="module-tracking-local-tracking"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.local_tracking</span></code><a class="headerlink" href="#module-dipy.tracking.local_tracking" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.local_tracking.LocalTracking" title="dipy.tracking.local_tracking.LocalTracking"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LocalTracking</span></code></a>(direction_getter, ...[, ...])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.local_tracking.ParticleFilteringTracking" title="dipy.tracking.local_tracking.ParticleFilteringTracking"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ParticleFilteringTracking</span></code></a>(direction_getter, ...)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.localtrack">
<span id="module-tracking-localtrack"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.localtrack</span></code><a class="headerlink" href="#module-dipy.tracking.localtrack" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.localtrack.local_tracker" title="dipy.tracking.localtrack.local_tracker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">local_tracker</span></code></a>(dg, sc, seed_pos, first_step, ...)</p></td>
<td><p>Tracks one direction from a seed.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.localtrack.pft_tracker" title="dipy.tracking.localtrack.pft_tracker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pft_tracker</span></code></a>(dg, sc, seed_pos, first_step, ...)</p></td>
<td><p>Tracks one direction from a seed using the particle filtering algorithm.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.localtrack.random" title="dipy.tracking.localtrack.random"><code class="xref py py-obj docutils literal notranslate"><span class="pre">random</span></code></a>(/)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.mesh">
<span id="module-tracking-mesh"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.mesh</span></code><a class="headerlink" href="#module-dipy.tracking.mesh" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.mesh.random_coordinates_from_surface" title="dipy.tracking.mesh.random_coordinates_from_surface"><code class="xref py py-obj docutils literal notranslate"><span class="pre">random_coordinates_from_surface</span></code></a>(...[, ...])</p></td>
<td><p>Generate random triangles_indices and trilinear_coord</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.mesh.seeds_from_surface_coordinates" title="dipy.tracking.mesh.seeds_from_surface_coordinates"><code class="xref py py-obj docutils literal notranslate"><span class="pre">seeds_from_surface_coordinates</span></code></a>(triangles, ...)</p></td>
<td><p>Compute points from triangles_indices and trilinear_coord</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.mesh.triangles_area" title="dipy.tracking.mesh.triangles_area"><code class="xref py py-obj docutils literal notranslate"><span class="pre">triangles_area</span></code></a>(triangles, vts)</p></td>
<td><p>Compute the local area of each triangle</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.mesh.vertices_to_triangles_values" title="dipy.tracking.mesh.vertices_to_triangles_values"><code class="xref py py-obj docutils literal notranslate"><span class="pre">vertices_to_triangles_values</span></code></a>(triangles, ...)</p></td>
<td><p>Change from values per vertex to values per triangle</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.metrics">
<span id="module-tracking-metrics"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.metrics</span></code><a class="headerlink" href="#module-dipy.tracking.metrics" title="Link to this heading">#</a></h2>
<p>Metrics for tracks, where tracks are arrays of points</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.winding" title="dipy.tracking.metrics.winding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">winding</span></code></a>(xyz)</p></td>
<td><p>Total turning angle projected.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.length" title="dipy.tracking.metrics.length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">length</span></code></a>(xyz, *[, along])</p></td>
<td><p>Euclidean length of track line</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.bytes" title="dipy.tracking.metrics.bytes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code></a>(xyz)</p></td>
<td><p>Size of track in bytes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.midpoint" title="dipy.tracking.metrics.midpoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">midpoint</span></code></a>(xyz)</p></td>
<td><p>Midpoint of track</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.center_of_mass" title="dipy.tracking.metrics.center_of_mass"><code class="xref py py-obj docutils literal notranslate"><span class="pre">center_of_mass</span></code></a>(xyz)</p></td>
<td><p>Center of mass of streamline</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.magn" title="dipy.tracking.metrics.magn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">magn</span></code></a>(xyz, *[, n])</p></td>
<td><p>magnitude of vector</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.frenet_serret" title="dipy.tracking.metrics.frenet_serret"><code class="xref py py-obj docutils literal notranslate"><span class="pre">frenet_serret</span></code></a>(xyz)</p></td>
<td><p>Frenet-Serret Space Curve Invariants</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.mean_curvature" title="dipy.tracking.metrics.mean_curvature"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mean_curvature</span></code></a>(xyz)</p></td>
<td><p>Calculates the mean curvature of a curve</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.mean_orientation" title="dipy.tracking.metrics.mean_orientation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mean_orientation</span></code></a>(xyz)</p></td>
<td><p>Calculates the mean orientation of a curve</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.generate_combinations" title="dipy.tracking.metrics.generate_combinations"><code class="xref py py-obj docutils literal notranslate"><span class="pre">generate_combinations</span></code></a>(items, n)</p></td>
<td><p>Combine sets of size n from items</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.longest_track_bundle" title="dipy.tracking.metrics.longest_track_bundle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">longest_track_bundle</span></code></a>(bundle, *[, sort])</p></td>
<td><p>Return longest track or length sorted track indices in <cite>bundle</cite></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.intersect_sphere" title="dipy.tracking.metrics.intersect_sphere"><code class="xref py py-obj docutils literal notranslate"><span class="pre">intersect_sphere</span></code></a>(xyz, center, radius)</p></td>
<td><p>If any segment of the track is intersecting with a sphere of specific center and radius return True otherwise False</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.inside_sphere" title="dipy.tracking.metrics.inside_sphere"><code class="xref py py-obj docutils literal notranslate"><span class="pre">inside_sphere</span></code></a>(xyz, center, radius)</p></td>
<td><p>If any point of the track is inside a sphere of a specified center and radius return True otherwise False.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.inside_sphere_points" title="dipy.tracking.metrics.inside_sphere_points"><code class="xref py py-obj docutils literal notranslate"><span class="pre">inside_sphere_points</span></code></a>(xyz, center, radius)</p></td>
<td><p>If a track intersects with a sphere of a specified center and radius return the points that are inside the sphere otherwise False.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.spline" title="dipy.tracking.metrics.spline"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spline</span></code></a>(xyz, *[, s, k, nest])</p></td>
<td><p>Generate B-splines as documented in <a class="reference external" href="https://scipy-cookbook.readthedocs.io/items/Interpolation.html">https://scipy-cookbook.readthedocs.io/items/Interpolation.html</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.startpoint" title="dipy.tracking.metrics.startpoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startpoint</span></code></a>(xyz)</p></td>
<td><p>First point of the track</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.endpoint" title="dipy.tracking.metrics.endpoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">endpoint</span></code></a>(xyz)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.arbitrarypoint" title="dipy.tracking.metrics.arbitrarypoint"><code class="xref py py-obj docutils literal notranslate"><span class="pre">arbitrarypoint</span></code></a>(xyz, distance)</p></td>
<td><p>Select an arbitrary point along distance on the track (curve)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.metrics.principal_components" title="dipy.tracking.metrics.principal_components"><code class="xref py py-obj docutils literal notranslate"><span class="pre">principal_components</span></code></a>(xyz)</p></td>
<td><p>We use PCA to calculate the 3 principal directions for a track</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.metrics.midpoint2point" title="dipy.tracking.metrics.midpoint2point"><code class="xref py py-obj docutils literal notranslate"><span class="pre">midpoint2point</span></code></a>(xyz, p)</p></td>
<td><p>Calculate distance from midpoint of a curve to arbitrary point p</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.propspeed">
<span id="module-tracking-propspeed"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.propspeed</span></code><a class="headerlink" href="#module-dipy.tracking.propspeed" title="Link to this heading">#</a></h2>
<p>Track propagation performance functions</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.propspeed.eudx_both_directions" title="dipy.tracking.propspeed.eudx_both_directions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eudx_both_directions</span></code></a>(seed, ref, qa, ind, ...)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.propspeed.ndarray_offset" title="dipy.tracking.propspeed.ndarray_offset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray_offset</span></code></a>(indices, strides, lenind, ...)</p></td>
<td><p>Find offset in an N-dimensional ndarray using strides</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.stopping_criterion">
<span id="module-tracking-stopping-criterion"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.stopping_criterion</span></code><a class="headerlink" href="#module-dipy.tracking.stopping_criterion" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.stopping_criterion.ActStoppingCriterion" title="dipy.tracking.stopping_criterion.ActStoppingCriterion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ActStoppingCriterion</span></code></a></p></td>
<td><p>Anatomically-Constrained Tractography (ACT) stopping criterion.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion" title="dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AnatomicalStoppingCriterion</span></code></a></p></td>
<td><p>Abstract class that takes as input included and excluded tissue maps.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.stopping_criterion.BinaryStoppingCriterion" title="dipy.tracking.stopping_criterion.BinaryStoppingCriterion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BinaryStoppingCriterion</span></code></a></p></td>
<td><p>cdef:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.stopping_criterion.CmcStoppingCriterion" title="dipy.tracking.stopping_criterion.CmcStoppingCriterion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CmcStoppingCriterion</span></code></a></p></td>
<td><p>Continuous map criterion (CMC) stopping criterion.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.stopping_criterion.StoppingCriterion" title="dipy.tracking.stopping_criterion.StoppingCriterion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">StoppingCriterion</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.stopping_criterion.StreamlineStatus" title="dipy.tracking.stopping_criterion.StreamlineStatus"><code class="xref py py-obj docutils literal notranslate"><span class="pre">StreamlineStatus</span></code></a>(value[, names, module, ...])</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.stopping_criterion.ThresholdStoppingCriterion" title="dipy.tracking.stopping_criterion.ThresholdStoppingCriterion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ThresholdStoppingCriterion</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.streamline">
<span id="module-tracking-streamline"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.streamline</span></code><a class="headerlink" href="#module-dipy.tracking.streamline" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamline.unlist_streamlines" title="dipy.tracking.streamline.unlist_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unlist_streamlines</span></code></a>(streamlines)</p></td>
<td><p>Return the streamlines not as a list but as an array and an offset</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamline.relist_streamlines" title="dipy.tracking.streamline.relist_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">relist_streamlines</span></code></a>(points, offsets)</p></td>
<td><p>Given a representation of a set of streamlines as a large array and an offsets array return the streamlines as a list of shorter arrays.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamline.center_streamlines" title="dipy.tracking.streamline.center_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">center_streamlines</span></code></a>(streamlines)</p></td>
<td><p>Move streamlines to the origin</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamline.deform_streamlines" title="dipy.tracking.streamline.deform_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">deform_streamlines</span></code></a>(streamlines, ...)</p></td>
<td><p>Apply deformation field to streamlines</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamline.transform_streamlines" title="dipy.tracking.streamline.transform_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transform_streamlines</span></code></a>(streamlines, mat, *[, ...])</p></td>
<td><p>Apply affine transformation to streamlines</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamline.select_random_set_of_streamlines" title="dipy.tracking.streamline.select_random_set_of_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_random_set_of_streamlines</span></code></a>(...[, rng])</p></td>
<td><p>Select a random set of streamlines</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamline.select_by_rois" title="dipy.tracking.streamline.select_by_rois"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_by_rois</span></code></a>(streamlines, affine, rois, ...)</p></td>
<td><p>Select streamlines based on logical relations with several regions of interest (ROIs).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamline.cluster_confidence" title="dipy.tracking.streamline.cluster_confidence"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cluster_confidence</span></code></a>(streamlines, *[, ...])</p></td>
<td><p>Computes the cluster confidence index (cci), which is an estimation of the support a set of streamlines gives to a particular pathway.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamline.orient_by_rois" title="dipy.tracking.streamline.orient_by_rois"><code class="xref py py-obj docutils literal notranslate"><span class="pre">orient_by_rois</span></code></a>(streamlines, affine, roi1, ...)</p></td>
<td><p>Orient a set of streamlines according to a pair of ROIs</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamline.orient_by_streamline" title="dipy.tracking.streamline.orient_by_streamline"><code class="xref py py-obj docutils literal notranslate"><span class="pre">orient_by_streamline</span></code></a>(streamlines, standard, *)</p></td>
<td><p>Orient a bundle of streamlines to a standard streamline.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamline.values_from_volume" title="dipy.tracking.streamline.values_from_volume"><code class="xref py py-obj docutils literal notranslate"><span class="pre">values_from_volume</span></code></a>(data, streamlines, affine)</p></td>
<td><p>Extract values of a scalar/vector along each streamline from a volume.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamline.nbytes" title="dipy.tracking.streamline.nbytes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nbytes</span></code></a>(streamlines)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.streamlinespeed">
<span id="module-tracking-streamlinespeed"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.streamlinespeed</span></code><a class="headerlink" href="#module-dipy.tracking.streamlinespeed" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamlinespeed.Streamlines" title="dipy.tracking.streamlinespeed.Streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Streamlines</span></code></a></p></td>
<td><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">ArraySequence</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamlinespeed.as_native_array" title="dipy.tracking.streamlinespeed.as_native_array"><code class="xref py py-obj docutils literal notranslate"><span class="pre">as_native_array</span></code></a>(arr)</p></td>
<td><p>Return <cite>arr</cite> as native byteordered array</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamlinespeed.compress_streamlines" title="dipy.tracking.streamlinespeed.compress_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compress_streamlines</span></code></a>(streamlines[, ...])</p></td>
<td><p>Compress streamlines by linearization.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.streamlinespeed.length" title="dipy.tracking.streamlinespeed.length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">length</span></code></a>(streamlines)</p></td>
<td><p>Euclidean length of streamlines</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.streamlinespeed.set_number_of_points" title="dipy.tracking.streamlinespeed.set_number_of_points"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_number_of_points</span></code></a>(streamlines[, nb_points])</p></td>
<td><p>Change the number of points of streamlines</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.utils">
<span id="id3"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.utils</span></code><a class="headerlink" href="#module-dipy.tracking.utils" title="Link to this heading">#</a></h2>
<p>Various tools related to creating and working with streamlines.</p>
<p>This module provides tools for targeting streamlines using ROIs, for making
connectivity matrices from whole brain fiber tracking and some other tools that
allow streamlines to interact with image data.</p>
<section id="important-notes">
<h3>Important Notes<a class="headerlink" href="#important-notes" title="Link to this heading">#</a></h3>
<p>Dipy uses affine matrices to represent the relationship between streamline
points, which are defined as points in a continuous 3d space, and image voxels,
which are typically arranged in a discrete 3d grid. Dipy uses a convention
similar to nifti files to interpret these affine matrices. This convention is
that the point at the center of voxel <code class="docutils literal notranslate"><span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code> is represented by the point
<code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code> where <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">1]</span> <span class="pre">=</span> <span class="pre">affine</span> <span class="pre">*</span> <span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k,</span> <span class="pre">1]</span></code>.  Also when the
phrase “voxel coordinates” is used, it is understood to be the same as <code class="docutils literal notranslate"><span class="pre">affine</span>
<span class="pre">=</span> <span class="pre">eye(4)</span></code>.</p>
<p>As an example, let’s take a 2d image where the affine is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
 <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
 <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]]</span>
</pre></div>
</div>
<p>The pixels of an image with this affine would look something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">------------</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">C</span> <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">----</span><span class="n">B</span><span class="o">--------</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">-------------</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">------------</span><span class="n">D</span>
</pre></div>
</div>
<p>And the letters A-D represent the following points in
“real world coordinates”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">]</span>
<span class="n">B</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">.5</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">]</span>
<span class="n">C</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">]</span>
<span class="n">D</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">2.5</span><span class="p">,</span>  <span class="mf">5.</span><span class="p">]</span>
</pre></div>
</div>
</section>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.density_map" title="dipy.tracking.utils.density_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">density_map</span></code></a>(streamlines, affine, vol_dims)</p></td>
<td><p>Count the number of unique streamlines that pass through each voxel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.connectivity_matrix" title="dipy.tracking.utils.connectivity_matrix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connectivity_matrix</span></code></a>(streamlines, affine, ...)</p></td>
<td><p>Count the streamlines that start and end at each label pair.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.ndbincount" title="dipy.tracking.utils.ndbincount"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndbincount</span></code></a>(x, *[, weights, shape])</p></td>
<td><p>Like bincount, but for nd-indices.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.reduce_labels" title="dipy.tracking.utils.reduce_labels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reduce_labels</span></code></a>(label_volume)</p></td>
<td><p>Reduce an array of labels to the integers from 0 to n with smallest possible n.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.subsegment" title="dipy.tracking.utils.subsegment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subsegment</span></code></a>(streamlines, max_segment_length)</p></td>
<td><p>Split the segments of the streamlines into small segments.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.seeds_from_mask" title="dipy.tracking.utils.seeds_from_mask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">seeds_from_mask</span></code></a>(mask, affine, *[, density])</p></td>
<td><p>Create seeds for fiber tracking from a binary mask.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.random_seeds_from_mask" title="dipy.tracking.utils.random_seeds_from_mask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">random_seeds_from_mask</span></code></a>(mask, affine, *[, ...])</p></td>
<td><p>Create randomly placed seeds for fiber tracking from a binary mask.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.target" title="dipy.tracking.utils.target"><code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code></a>(streamlines, affine, target_mask, *)</p></td>
<td><p>Filter streamlines based on whether or not they pass through an ROI.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.target_line_based" title="dipy.tracking.utils.target_line_based"><code class="xref py py-obj docutils literal notranslate"><span class="pre">target_line_based</span></code></a>(streamlines, affine, ...)</p></td>
<td><p>Filter streamlines based on whether or not they pass through a ROI, using a line-based algorithm.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.streamline_near_roi" title="dipy.tracking.utils.streamline_near_roi"><code class="xref py py-obj docutils literal notranslate"><span class="pre">streamline_near_roi</span></code></a>(streamline, roi_coords, ...)</p></td>
<td><p>Is a streamline near an ROI.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.near_roi" title="dipy.tracking.utils.near_roi"><code class="xref py py-obj docutils literal notranslate"><span class="pre">near_roi</span></code></a>(streamlines, affine, ...[, tol, mode])</p></td>
<td><p>Provide filtering criteria for a set of streamlines based on whether they fall within a tolerance distance from an ROI.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.length" title="dipy.tracking.utils.length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">length</span></code></a>(streamlines)</p></td>
<td><p>Calculate the lengths of many streamlines in a bundle.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.unique_rows" title="dipy.tracking.utils.unique_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unique_rows</span></code></a>(in_array, *[, dtype])</p></td>
<td><p>Find the unique rows in an array.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.transform_tracking_output" title="dipy.tracking.utils.transform_tracking_output"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transform_tracking_output</span></code></a>(tracking_output, ...)</p></td>
<td><p>Apply a linear transformation, given by affine, to streamlines.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.reduce_rois" title="dipy.tracking.utils.reduce_rois"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reduce_rois</span></code></a>(rois, include)</p></td>
<td><p>Reduce multiple ROIs to one inclusion and one exclusion ROI.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.path_length" title="dipy.tracking.utils.path_length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">path_length</span></code></a>(streamlines, affine, aoi, *[, ...])</p></td>
<td><p>Compute the shortest path, along any streamline, between aoi and each voxel.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.max_angle_from_curvature" title="dipy.tracking.utils.max_angle_from_curvature"><code class="xref py py-obj docutils literal notranslate"><span class="pre">max_angle_from_curvature</span></code></a>(...)</p></td>
<td><p>Get the maximum deviation angle from the minimum radius curvature.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.utils.min_radius_curvature_from_angle" title="dipy.tracking.utils.min_radius_curvature_from_angle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">min_radius_curvature_from_angle</span></code></a>(max_angle, ...)</p></td>
<td><p>Get minimum radius of curvature from a deviation angle.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.utils.seeds_directions_pairs" title="dipy.tracking.utils.seeds_directions_pairs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">seeds_directions_pairs</span></code></a>(positions, peaks, *)</p></td>
<td><p>Pair each seed to the corresponding peaks.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-dipy.tracking.vox2track">
<span id="module-tracking-vox2track"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.vox2track</span></code><a class="headerlink" href="#module-dipy.tracking.vox2track" title="Link to this heading">#</a></h2>
<p>This module contains the parts of dipy.tracking.utils that need to be
implemented in cython.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.vox2track.streamline_mapping" title="dipy.tracking.vox2track.streamline_mapping"><code class="xref py py-obj docutils literal notranslate"><span class="pre">streamline_mapping</span></code></a>(streamlines[, affine, ...])</p></td>
<td><p>Creates a mapping from voxel indices to streamlines.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.vox2track.track_counts" title="dipy.tracking.vox2track.track_counts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">track_counts</span></code></a>(tracks, vol_dims[, vox_sizes, ...])</p></td>
<td><p>Counts of points in <cite>tracks</cite> that pass through voxels in volume</p></td>
</tr>
</tbody>
</table>
</div>
<section id="directiongetter">
<h3><a class="reference internal" href="#dipy.tracking.direction_getter.DirectionGetter" title="dipy.tracking.direction_getter.DirectionGetter"><code class="xref py py-class docutils literal notranslate"><span class="pre">DirectionGetter</span></code></a><a class="headerlink" href="#directiongetter" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.direction_getter.DirectionGetter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.direction_getter.</span></span><span class="sig-name descname"><span class="pre">DirectionGetter</span></span><a class="headerlink" href="#dipy.tracking.direction_getter.DirectionGetter" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>generate_streamline</strong></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>get_direction</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>initial_direction</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.direction_getter.DirectionGetter.generate_streamline">
<span class="sig-name descname"><span class="pre">generate_streamline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voxel_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopping_criterion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_status</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixedstep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.direction_getter.DirectionGetter.generate_streamline" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.direction_getter.DirectionGetter.get_direction">
<span class="sig-name descname"><span class="pre">get_direction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">point</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.direction_getter.DirectionGetter.get_direction" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.direction_getter.DirectionGetter.initial_direction">
<span class="sig-name descname"><span class="pre">initial_direction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">point</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.direction_getter.DirectionGetter.initial_direction" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="add-3vecs">
<h3>add_3vecs<a class="headerlink" href="#add-3vecs" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.add_3vecs">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">add_3vecs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vec1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.add_3vecs" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="approx-polygon-track">
<h3>approx_polygon_track<a class="headerlink" href="#approx-polygon-track" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.approx_polygon_track">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">approx_polygon_track</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.392</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.approx_polygon_track" title="Link to this definition">#</a></dt>
<dd><p>Fast and simple trajectory approximation algorithm by Eleftherios and Ian</p>
<p>It will reduce the number of points of the track by keeping
intact the start and endpoints of the track and trying to remove
as many points as possible without distorting much the shape of
the track</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array(N,3)</span></dt><dd><p>initial trajectory</p>
</dd>
<dt><strong>alpha</strong><span class="classifier">float</span></dt><dd><p>smoothing parameter (&lt;0.392 smoother, &gt;0.392 rougher) if the
trajectory was a smooth circle then with alpha =0.393
~=pi/8. the circle would be approximated with an decahexagon if
alpha = 0.7853 ~=pi/4. with an octagon.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>characteristic_points: list of M array(3,) points</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Assuming that a good approximation for a circle is an octagon then
that means that the points of the octagon will have angle alpha =
2*pi/8 = pi/4 . We calculate the angle between every two neighbour
segments of a trajectory and if the angle is higher than pi/4 we
choose that point as a characteristic point otherwise we move at the
next point.</p>
<p class="rubric">Examples</p>
<p>Approximating a helix:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.75</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">t</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyza</span> <span class="o">=</span> <span class="n">approx_polygon_track</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">xyza</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="approximate-mdl-trajectory">
<h3>approximate_mdl_trajectory<a class="headerlink" href="#approximate-mdl-trajectory" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.approximate_mdl_trajectory">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">approximate_mdl_trajectory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.approximate_mdl_trajectory" title="Link to this definition">#</a></dt>
<dd><p>Implementation of Lee et al Approximate Trajectory
Partitioning Algorithm</p>
<p>This is base on the minimum description length principle</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array(N,3)</span></dt><dd><p>initial trajectory</p>
</dd>
<dt><strong>alpha</strong><span class="classifier">float</span></dt><dd><p>smoothing parameter (&gt;1 smoother, &lt;1  rougher)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>characteristic_points</strong><span class="classifier">list of M array(3,) points</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="bundles-distances-mam">
<h3>bundles_distances_mam<a class="headerlink" href="#bundles-distances-mam" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.bundles_distances_mam">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">bundles_distances_mam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tracksA</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracksB</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'avg'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.bundles_distances_mam" title="Link to this definition">#</a></dt>
<dd><p>Calculate distances between list of tracks A and list of tracks B</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tracksA</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</dd>
<dt><strong>tracksB</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</dd>
<dt><strong>metric</strong><span class="classifier">str</span></dt><dd><p>‘avg’, ‘min’, ‘max’</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>DM</strong><span class="classifier">array, shape (len(tracksA), len(tracksB))</span></dt><dd><p>distances between tracksA and tracksB according to metric</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">dipy.tracking.streamline.set_number_of_points</span></code></dt><dd></dd>
</dl>
</div>
</dd></dl>

</section>
<section id="bundles-distances-mdf">
<h3>bundles_distances_mdf<a class="headerlink" href="#bundles-distances-mdf" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.bundles_distances_mdf">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">bundles_distances_mdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tracksA</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracksB</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.bundles_distances_mdf" title="Link to this definition">#</a></dt>
<dd><p>Calculate distances between list of tracks A and list of tracks B</p>
<p>All tracks need to have the same number of points</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tracksA</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, [(N,3) .. (N,3)]</p>
</dd>
<dt><strong>tracksB</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, [(N,3) .. (N,3)]</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>DM</strong><span class="classifier">array, shape (len(tracksA), len(tracksB))</span></dt><dd><p>distances between tracksA and tracksB according to metric</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">dipy.tracking.streamline.set_number_of_points</span></code></dt><dd></dd>
</dl>
</div>
</dd></dl>

</section>
<section id="cut-plane">
<h3>cut_plane<a class="headerlink" href="#cut-plane" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.cut_plane">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">cut_plane</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tracks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.cut_plane" title="Link to this definition">#</a></dt>
<dd><p>Extract divergence vectors and points of intersection
between planes normal to the reference fiber and other tracks</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tracks</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</dd>
<dt><strong>ref</strong><span class="classifier">array, shape (N,3)</span></dt><dd><p>reference track</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>hits</strong><span class="classifier">sequence</span></dt><dd><p>list of points and rcds (radial coefficient of divergence)</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The orthogonality relationship
<code class="docutils literal notranslate"><span class="pre">np.inner(hits[p][q][0:3]-ref[p+1],ref[p+2]-ref[r][p+1])</span></code> will hold
throughout for every point q in the hits plane at point (p+1) on the
reference track.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">refx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundlex</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">2.5</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">cut_plane</span><span class="p">(</span><span class="n">bundlex</span><span class="p">,</span><span class="n">refx</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.70710683</span><span class="p">,</span> <span class="mf">0.</span> <span class="p">]]))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.70710677</span><span class="p">,</span> <span class="mf">0.</span> <span class="p">]]))</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="inner-3vecs">
<h3>inner_3vecs<a class="headerlink" href="#inner-3vecs" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.inner_3vecs">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">inner_3vecs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vec1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.inner_3vecs" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="intersect-segment-cylinder">
<h3>intersect_segment_cylinder<a class="headerlink" href="#intersect-segment-cylinder" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.intersect_segment_cylinder">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">intersect_segment_cylinder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sa</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.intersect_segment_cylinder" title="Link to this definition">#</a></dt>
<dd><p>Intersect Segment S(t) = sa +t(sb-sa), 0 &lt;=t&lt;= 1 against cylinder specified by p,q and r</p>
<p>See p.197 from Real Time Collision Detection by C. Ericson</p>
<p class="rubric">Examples</p>
<p>Define cylinder using a segment defined by</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">=</span><span class="mf">0.5</span>
</pre></div>
</div>
<p>Define segment</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sa</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">1</span> <span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sb</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</pre></div>
</div>
<p>Intersection</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">intersect_segment_cylinder</span><span class="p">(</span><span class="n">sa</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
<span class="go">(1.0, 0.25, 0.75)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="larch-3merge">
<h3>larch_3merge<a class="headerlink" href="#larch-3merge" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.larch_3merge">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">larch_3merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">C</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.larch_3merge" title="Link to this definition">#</a></dt>
<dd><p>Reassign tracks to existing clusters by merging clusters that their
representative tracks are not very distant i.e. less than sqd_thr. Using
tracks consisting of 3 points (first, mid and last). This is necessary
after running larch_fast_split after multiple split in different levels
(squared thresholds) as some of them have created independent clusters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>C</strong><span class="classifier">graph with clusters</span></dt><dd><p>of indices 3tracks (tracks consisting of 3 points only)</p>
</dd>
<dt><strong>sqd_trh: float</strong></dt><dd><p>squared euclidean distance threshold</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>C</strong><span class="classifier">dict</span></dt><dd><p>a tree graph containing the clusters</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="larch-3split">
<h3>larch_3split<a class="headerlink" href="#larch-3split" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.larch_3split">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">larch_3split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tracks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.larch_3split" title="Link to this definition">#</a></dt>
<dd><p>Generate a first pass clustering using 3 points on the tracks only.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tracks</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape <code class="docutils literal notranslate"><span class="pre">(N1,3)</span> <span class="pre">..</span> <span class="pre">(Nm,3)</span></code>, where 3 points are
(first, mid and last)</p>
</dd>
<dt><strong>indices</strong><span class="classifier">None or sequence, optional</span></dt><dd><p>Sequence of integer indices of tracks</p>
</dd>
<dt><strong>trh</strong><span class="classifier">float, optional</span></dt><dd><p>squared euclidean distance threshold</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>C</strong><span class="classifier">dict</span></dt><dd><p>A tree graph containing the clusters.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If a 3 point track (3track) is far away from all clusters then add a new
cluster and assign this 3track as the rep(representative) track for the new
cluster. Otherwise the rep 3track of each cluster is the average track of
the cluster.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.7</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">4.4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.9</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">4.6</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">larch_3split</span><span class="p">(</span><span class="n">tracks</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>Here is an example of how to visualize the clustering above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dipy.viz</span> <span class="kn">import</span> <span class="n">window</span><span class="p">,</span> <span class="n">actor</span>
<span class="n">scene</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">Scene</span><span class="p">()</span>
<span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">actor</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">tracks</span><span class="p">,</span><span class="n">window</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">red</span><span class="p">))</span>
<span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">C</span><span class="p">:</span>
    <span class="n">color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">C</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;indices&#39;</span><span class="p">]:</span>
        <span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">actor</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">tracks</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">color</span><span class="p">))</span>
<span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">C</span><span class="p">:</span>
    <span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">actor</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;rep3&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">C</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;N&#39;</span><span class="p">],</span>
                         <span class="n">window</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
<span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="lee-angle-distance">
<h3>lee_angle_distance<a class="headerlink" href="#lee-angle-distance" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.lee_angle_distance">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">lee_angle_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.lee_angle_distance" title="Link to this definition">#</a></dt>
<dd><p>Calculates angle distance metric for the distance between two line segments</p>
<p>Based on Lee , Han &amp; Whang SIGMOD07.</p>
<p>This function assumes that norm(end0-start0)&gt;norm(end1-start1) i.e. that the
first segment will be bigger than the second one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>start0</strong><span class="classifier">float array(3,)</span></dt><dd></dd>
<dt><strong>end0</strong><span class="classifier">float array(3,)</span></dt><dd></dd>
<dt><strong>start1</strong><span class="classifier">float array(3,)</span></dt><dd></dd>
<dt><strong>end1</strong><span class="classifier">float array(3,)</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>angle_distance</strong><span class="classifier">float</span></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>l_0 = np.inner(end0-start0,end0-start0)
l_1 = np.inner(end1-start1,end1-start1)</p>
<p>cos_theta_squared = np.inner(end0-start0,end1-start1)**2/ (l_0*l_1)
return np.sqrt((1-cos_theta_squared)*l_1)</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lee_angle_distance</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="go">2.0</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="lee-perpendicular-distance">
<h3>lee_perpendicular_distance<a class="headerlink" href="#lee-perpendicular-distance" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.lee_perpendicular_distance">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">lee_perpendicular_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.lee_perpendicular_distance" title="Link to this definition">#</a></dt>
<dd><p>Calculates perpendicular distance metric for the distance between two line segments</p>
<p>Based on Lee , Han &amp; Whang SIGMOD07.</p>
<p>This function assumes that norm(end0-start0)&gt;norm(end1-start1) i.e. that the
first segment will be bigger than the second one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>start0</strong><span class="classifier">float array(3,)</span></dt><dd></dd>
<dt><strong>end0</strong><span class="classifier">float array(3,)</span></dt><dd></dd>
<dt><strong>start1</strong><span class="classifier">float array(3,)</span></dt><dd></dd>
<dt><strong>end1</strong><span class="classifier">float array(3,)</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>perpendicular_distance: float</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>l0 = np.inner(end0-start0,end0-start0)
l1 = np.inner(end1-start1,end1-start1)</p>
<p>k0=end0-start0</p>
<p>u1 = np.inner(start1-start0,k0)/l0
u2 = np.inner(end1-start0,k0)/l0</p>
<p>ps = start0+u1*k0
pe = start0+u2*k0</p>
<p>lperp1 = np.sqrt(np.inner(ps-start1,ps-start1))
lperp2 = np.sqrt(np.inner(pe-end1,pe-end1))</p>
<dl class="simple">
<dt>if lperp1+lperp2 &gt; 0.:</dt><dd><p>return (lperp1**2+lperp2**2)/(lperp1+lperp2)</p>
</dd>
<dt>else:</dt><dd><p>return 0.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">lee_perpendicular_distance</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.6f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">d</span><span class="p">)</span>
<span class="go">5.787888</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="local-skeleton-clustering">
<h3>local_skeleton_clustering<a class="headerlink" href="#local-skeleton-clustering" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.local_skeleton_clustering">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">local_skeleton_clustering</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tracks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.local_skeleton_clustering" title="Link to this definition">#</a></dt>
<dd><p>Efficient tractography clustering</p>
<p>Every track can needs to have the same number of points.
Use <cite>dipy.tracking.metrics.downsample</cite> to restrict the number of points</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tracks</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (N,3) .. (N,3) where N=points</p>
</dd>
<dt><strong>d_thr</strong><span class="classifier">float</span></dt><dd><p>average euclidean distance threshold</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>C</strong><span class="classifier">dict</span></dt><dd><p>Clusters.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">dipy.tracking.metrics.downsample</span></code></dt><dd></dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>The distance calculated between two tracks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t_1</span>       <span class="n">t_2</span>

<span class="mi">0</span><span class="o">*</span>   <span class="n">a</span>    <span class="o">*</span><span class="mi">0</span>
  \       <span class="o">|</span>
   \      <span class="o">|</span>
   <span class="mi">1</span><span class="o">*</span>     <span class="o">|</span>
    <span class="o">|</span>  <span class="n">b</span>  <span class="o">*</span><span class="mi">1</span>
    <span class="o">|</span>      \
    <span class="mi">2</span><span class="o">*</span>      \
        <span class="n">c</span>    <span class="o">*</span><span class="mi">2</span>
</pre></div>
</div>
<p>is equal to <span class="math notranslate nohighlight">\((a+b+c)/3\)</span> where <span class="math notranslate nohighlight">\(a\)</span> the euclidean distance between <code class="docutils literal notranslate"><span class="pre">t_1[0]</span></code>
and <code class="docutils literal notranslate"><span class="pre">t_2[0]</span></code>, <span class="math notranslate nohighlight">\(b\)</span> between <code class="docutils literal notranslate"><span class="pre">t_1[1]</span></code> and <code class="docutils literal notranslate"><span class="pre">t_2[1]</span></code> and <span class="math notranslate nohighlight">\(c\)</span> between
<code class="docutils literal notranslate"><span class="pre">t_1[2]</span></code> and <code class="docutils literal notranslate"><span class="pre">t_2[2]</span></code>. Also the same with t2 flipped (so <code class="docutils literal notranslate"><span class="pre">t_1[0]</span></code>
compared to <code class="docutils literal notranslate"><span class="pre">t_2[2]</span></code> etc).</p>
<p>Visualization:</p>
<p>It is possible to visualize the clustering C from the example
above using the dipy.viz module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dipy.viz</span> <span class="kn">import</span> <span class="n">window</span><span class="p">,</span> <span class="n">actor</span>
<span class="n">scene</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">Scene</span><span class="p">()</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">C</span><span class="p">:</span>
    <span class="n">color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">C</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;indices&#39;</span><span class="p">]:</span>
        <span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">actor</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">tracks</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">color</span><span class="p">))</span>
<span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.7</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">4.4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.9</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">4.6</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">local_skeleton_clustering</span><span class="p">(</span><span class="n">tracks</span><span class="p">,</span> <span class="n">d_thr</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="local-skeleton-clustering-3pts">
<h3>local_skeleton_clustering_3pts<a class="headerlink" href="#local-skeleton-clustering-3pts" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.local_skeleton_clustering_3pts">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">local_skeleton_clustering_3pts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tracks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.local_skeleton_clustering_3pts" title="Link to this definition">#</a></dt>
<dd><p>Does a first pass clustering</p>
<p>Every track can only have 3 pts neither less or more.
Use <cite>dipy.tracking.metrics.downsample</cite> to restrict the number of points</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tracks</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (N,3) .. (N,3) where N=3</p>
</dd>
<dt><strong>d_thr</strong><span class="classifier">float</span></dt><dd><p>Average euclidean distance threshold</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>C</strong><span class="classifier">dict</span></dt><dd><p>Clusters.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>It is possible to visualize the clustering C from the example
above using the fvtk module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">=</span><span class="n">fvtk</span><span class="o">.</span><span class="n">ren</span><span class="p">()</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">C</span><span class="p">:</span>
    <span class="n">color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">C</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;indices&#39;</span><span class="p">]:</span>
        <span class="n">fvtk</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">fos</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">tracks</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">color</span><span class="p">))</span>
<span class="n">fvtk</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.7</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">4.4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.9</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">4.6</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span><span class="o">=</span><span class="n">local_skeleton_clustering_3pts</span><span class="p">(</span><span class="n">tracks</span><span class="p">,</span><span class="n">d_thr</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="mam-distances">
<h3>mam_distances<a class="headerlink" href="#mam-distances" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.mam_distances">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">mam_distances</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xyz2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.mam_distances" title="Link to this definition">#</a></dt>
<dd><p>Min/Max/Mean Average Minimum Distance between tracks xyz1 and xyz2</p>
<p>Based on the metrics in Zhang, Correia, Laidlaw 2008
<a class="reference external" href="https://ieeexplore.ieee.org/document/4479455">https://ieeexplore.ieee.org/document/4479455</a>
which in turn are based on those of Corouge et al. 2004</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz1</strong><span class="classifier">array, shape (N1,3), dtype float32</span></dt><dd></dd>
<dt><strong>xyz2</strong><span class="classifier">array, shape (N2,3), dtype float32</span></dt><dd><p>arrays representing x,y,z of the N1 and N2 points of two tracks</p>
</dd>
<dt><strong>metrics</strong><span class="classifier">{‘avg’,’min’,’max’,’all’}</span></dt><dd><p>Metric to calculate.  {‘avg’,’min’,’max’} return a scalar. ‘all’
returns a tuple</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>avg_mcd</strong><span class="classifier">float</span></dt><dd><p>average_mean_closest_distance</p>
</dd>
<dt><strong>min_mcd</strong><span class="classifier">float</span></dt><dd><p>minimum_mean_closest_distance</p>
</dd>
<dt><strong>max_mcd</strong><span class="classifier">float</span></dt><dd><p>maximum_mean_closest_distance</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Algorithmic description</p>
<p>Let’s say we have curves A and B.</p>
<p>For every point in A calculate the minimum distance from every point
in B stored in minAB</p>
<p>For every point in B calculate the minimum distance from every point
in A stored in minBA</p>
<p>find average of minAB stored as avg_minAB
find average of minBA stored as avg_minBA</p>
<p>if metric is ‘avg’ then return (avg_minAB + avg_minBA)/2.0
if metric is ‘min’ then return min(avg_minAB,avg_minBA)
if metric is ‘max’ then return max(avg_minAB,avg_minBA)</p>
</dd></dl>

</section>
<section id="minimum-closest-distance">
<h3>minimum_closest_distance<a class="headerlink" href="#minimum-closest-distance" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.minimum_closest_distance">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">minimum_closest_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xyz2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.minimum_closest_distance" title="Link to this definition">#</a></dt>
<dd><p>Find the minimum distance between two curves xyz1, xyz2</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz1</strong><span class="classifier">array, shape (N1,3), dtype float32</span></dt><dd></dd>
<dt><strong>xyz2</strong><span class="classifier">array, shape (N2,3), dtype float32</span></dt><dd><p>arrays representing x,y,z of the N1 and N2 points  of two tracks</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>md</strong><span class="classifier">minimum distance</span></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Algorithmic description</p>
<p>Let’s say we have curves A and B</p>
<p>for every point in A calculate the minimum distance from every point in B stored in minAB
for every point in B calculate the minimum distance from every point in A stored in minBA
find min of minAB stored in min_minAB
find min of minBA stored in min_minBA</p>
<p>Then return (min_minAB + min_minBA)/2.0</p>
</dd></dl>

</section>
<section id="most-similar-track-mam">
<h3>most_similar_track_mam<a class="headerlink" href="#most-similar-track-mam" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.most_similar_track_mam">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">most_similar_track_mam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tracks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'avg'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.most_similar_track_mam" title="Link to this definition">#</a></dt>
<dd><p>Find the most similar track in a bundle
using distances calculated from Zhang et. al 2008.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tracks</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</dd>
<dt><strong>metric</strong><span class="classifier">str</span></dt><dd><p>‘avg’, ‘min’, ‘max’</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>si</strong><span class="classifier">int</span></dt><dd><p>index of the most similar track in tracks. This can be used as a
reference track for a bundle.</p>
</dd>
<dt><strong>s</strong><span class="classifier">array, shape (len(tracks),)</span></dt><dd><p>similarities between tracks[si] and the rest of the tracks in
the bundle</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>A vague description of this function is given below:</p>
<p>for (i,j) in tracks_combinations_of_2:</p>
<blockquote>
<div><p>calculate the mean_closest_distance from i to j  (mcd_i)
calculate the mean_closest_distance from j to i  (mcd_j)</p>
<dl class="simple">
<dt>if ‘avg’:</dt><dd><p>s holds the average similarities</p>
</dd>
<dt>if ‘min’:</dt><dd><p>s holds the minimum similarities</p>
</dd>
<dt>if ‘max’:</dt><dd><p>s holds the maximum similarities</p>
</dd>
</dl>
</div></blockquote>
<p>si holds the index of the track with min {avg,min,max} average metric</p>
</dd></dl>

</section>
<section id="mul-3vec">
<h3>mul_3vec<a class="headerlink" href="#mul-3vec" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.mul_3vec">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">mul_3vec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.mul_3vec" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="mul-3vecs">
<h3>mul_3vecs<a class="headerlink" href="#mul-3vecs" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.mul_3vecs">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">mul_3vecs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vec1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.mul_3vecs" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="norm-3vec">
<h3>norm_3vec<a class="headerlink" href="#norm-3vec" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.norm_3vec">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">norm_3vec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.norm_3vec" title="Link to this definition">#</a></dt>
<dd><p>Euclidean (L2) norm of length 3 vector</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>vec</strong><span class="classifier">array-like shape (3,)</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>norm</strong><span class="classifier">float</span></dt><dd><p>Euclidean norm</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="normalized-3vec">
<h3>normalized_3vec<a class="headerlink" href="#normalized-3vec" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.normalized_3vec">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">normalized_3vec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.normalized_3vec" title="Link to this definition">#</a></dt>
<dd><p>Return normalized 3D vector</p>
<p>Vector divided by Euclidean (L2) norm</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>vec</strong><span class="classifier">array-like shape (3,)</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>vec_out</strong><span class="classifier">array shape (3,)</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="point-segment-sq-distance">
<h3>point_segment_sq_distance<a class="headerlink" href="#point-segment-sq-distance" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.point_segment_sq_distance">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">point_segment_sq_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.point_segment_sq_distance" title="Link to this definition">#</a></dt>
<dd><p>Calculate the squared distance from a point c to a finite line segment ab.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point_segment_sq_distance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point_segment_sq_distance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
<span class="go">9.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point_segment_sq_distance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="go">2.0</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="point-track-sq-distance-check">
<h3>point_track_sq_distance_check<a class="headerlink" href="#point-track-sq-distance-check" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.point_track_sq_distance_check">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">point_track_sq_distance_check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">track</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">point</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sq_dist_thr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.point_track_sq_distance_check" title="Link to this definition">#</a></dt>
<dd><p>Check if square distance of track from point is smaller than threshold</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>track: array,float32, shape (N,3)</strong></dt><dd></dd>
<dt><strong>point: array,float32, shape (3,)</strong></dt><dd></dd>
<dt><strong>sq_dist_thr: double, threshold</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>bool: True, if sq_distance &lt;= sq_dist_thr, otherwise False.</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point_track_sq_distance_check</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;f4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;f4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point_track_sq_distance_check</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="mf">.2</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point_track_sq_distance_check</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="sub-3vecs">
<h3>sub_3vecs<a class="headerlink" href="#sub-3vecs" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.sub_3vecs">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">sub_3vecs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vec1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.sub_3vecs" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="track-dist-3pts">
<h3>track_dist_3pts<a class="headerlink" href="#track-dist-3pts" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.track_dist_3pts">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">track_dist_3pts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tracka</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trackb</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.track_dist_3pts" title="Link to this definition">#</a></dt>
<dd><p>Calculate the euclidean distance between two 3pt tracks</p>
<p>Both direct and flip distances are calculated but only the smallest is returned</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>a</strong><span class="classifier">array, shape (3,3)</span></dt><dd></dd>
<dt><strong>a three point track</strong></dt><dd></dd>
<dt><strong>b</strong><span class="classifier">array, shape (3,3)</span></dt><dd></dd>
<dt><strong>a three point track</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>dist :float</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">track_dist_3pts</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.6f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">c</span><span class="p">)</span>
<span class="go">2.721573</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="track-roi-intersection-check">
<h3>track_roi_intersection_check<a class="headerlink" href="#track-roi-intersection-check" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.distances.track_roi_intersection_check">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.distances.</span></span><span class="sig-name descname"><span class="pre">track_roi_intersection_check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">track</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sq_dist_thr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.track_roi_intersection_check" title="Link to this definition">#</a></dt>
<dd><p>Check if a track is intersecting a region of interest</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>track: array,float32, shape (N,3)</strong></dt><dd></dd>
<dt><strong>roi: array,float32, shape (M,3)</strong></dt><dd></dd>
<dt><strong>sq_dist_thr: double, threshold, check squared euclidean distance from every roi point</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>bool: True, if sq_distance &lt;= sq_dist_thr, otherwise False.</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;f4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;f4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">track_roi_intersection_check</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">roi</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">track_roi_intersection_check</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;f4&#39;</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="warn">
<h3>warn<a class="headerlink" href="#warn" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">warn(/,</span> <span class="pre">message,</span> <span class="pre">category=None,</span> <span class="pre">stacklevel=1,</span> <span class="pre">source=None,</span> <span class="pre">*,</span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">warn</span>&#160;&#160;&#160;&#160; <span class="pre">skip_file_prefixes=&lt;unrepresentable&gt;)</span></span></dt>
<dd><p>Issue a warning, or maybe ignore it or raise an exception.</p>
<dl class="simple">
<dt>message</dt><dd><p>Text of the warning message.</p>
</dd>
<dt>category</dt><dd><p>The Warning category subclass. Defaults to UserWarning.</p>
</dd>
<dt>stacklevel</dt><dd><p>How far up the call stack to make this warning appear. A value of 2 for
example attributes the warning to the caller of the code calling warn().</p>
</dd>
<dt>source</dt><dd><p>If supplied, the destroyed object which emitted a ResourceWarning</p>
</dd>
<dt>skip_file_prefixes</dt><dd><p>An optional tuple of module filename prefixes indicating frames to skip
during stacklevel computations for stack frame attribution.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="fbcmeasures">
<h3><a class="reference internal" href="#dipy.tracking.fbcmeasures.FBCMeasures" title="dipy.tracking.fbcmeasures.FBCMeasures"><code class="xref py py-class docutils literal notranslate"><span class="pre">FBCMeasures</span></code></a><a class="headerlink" href="#fbcmeasures" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.FBCMeasures">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.fbcmeasures.</span></span><span class="sig-name descname"><span class="pre">FBCMeasures</span></span><a class="headerlink" href="#dipy.tracking.fbcmeasures.FBCMeasures" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.fbcmeasures.FBCMeasures.get_points_rfbc_thresholded" title="dipy.tracking.fbcmeasures.FBCMeasures.get_points_rfbc_thresholded"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_points_rfbc_thresholded</span></code></a>(threshold[, ...])</p></td>
<td><p>Set a threshold on the RFBC to remove spurious fibers.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.FBCMeasures.get_points_rfbc_thresholded">
<span class="sig-name descname"><span class="pre">get_points_rfbc_thresholded</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">emphasis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.fbcmeasures.FBCMeasures.get_points_rfbc_thresholded" title="Link to this definition">#</a></dt>
<dd><p>Set a threshold on the RFBC to remove spurious fibers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>threshold</strong><span class="classifier">float</span></dt><dd><p>The threshold to set on the RFBC, should be within 0 and 1.</p>
</dd>
<dt><strong>emphasis</strong><span class="classifier">float</span></dt><dd><p>Enhances the coloring of the fibers by LFBC. Increasing emphasis
will stress spurious fibers by logarithmic weighting.</p>
</dd>
<dt><strong>verbose</strong><span class="classifier">boolean</span></dt><dd><p>Prints info about the found RFBC for the set of fibers such as
median, mean, min and max values.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>output</strong><span class="classifier">tuple with 3 elements</span></dt><dd><p>The output contains:
1) a collection of streamlines, each n by 3, with n
being the number of nodes in the fiber that remain after filtering
2) the r,g,b values of the local fiber to bundle coherence (LFBC)
3) the relative fiber to bundle coherence (RFBC)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="kdtree">
<h3><a class="reference internal" href="#dipy.tracking.fbcmeasures.KDTree" title="dipy.tracking.fbcmeasures.KDTree"><code class="xref py py-class docutils literal notranslate"><span class="pre">KDTree</span></code></a><a class="headerlink" href="#kdtree" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.fbcmeasures.</span></span><span class="sig-name descname"><span class="pre">KDTree</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leafsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compact_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">balanced_tree</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boxsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scipy/spatial/_kdtree.html#KDTree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cKDTree</span></code></p>
<p>kd-tree for quick nearest-neighbor lookup.</p>
<p>This class provides an index into a set of k-dimensional points
which can be used to rapidly look up the nearest neighbors of any
point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">array_like, shape (n,m)</span></dt><dd><p>The n data points of dimension m to be indexed. This array is
not copied unless this is necessary to produce a contiguous
array of doubles, and so modifying this data will result in
bogus results. The data are also copied if the kd-tree is built
with copy_data=True.</p>
</dd>
<dt><strong>leafsize</strong><span class="classifier">positive int, optional</span></dt><dd><p>The number of points at which the algorithm switches over to
brute-force.  Default: 10.</p>
</dd>
<dt><strong>compact_nodes</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, the kd-tree is built to shrink the hyperrectangles to
the actual data range. This usually gives a more compact tree that
is robust against degenerated input data and gives faster queries
at the expense of longer build time. Default: True.</p>
</dd>
<dt><strong>copy_data</strong><span class="classifier">bool, optional</span></dt><dd><p>If True the data is always copied to protect the kd-tree against
data corruption. Default: False.</p>
</dd>
<dt><strong>balanced_tree</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, the median is used to split the hyperrectangles instead of
the midpoint. This usually gives a more compact tree and
faster queries at the expense of longer build time. Default: True.</p>
</dd>
<dt><strong>boxsize</strong><span class="classifier">array_like or scalar, optional</span></dt><dd><p>Apply a m-d toroidal topology to the KDTree.. The topology is generated
by <span class="math notranslate nohighlight">\(x_i + n_i L_i\)</span> where <span class="math notranslate nohighlight">\(n_i\)</span> are integers and <span class="math notranslate nohighlight">\(L_i\)</span>
is the boxsize along i-th dimension. The input data shall be wrapped
into <span class="math notranslate nohighlight">\([0, L_i)\)</span>. A ValueError is raised if any of the data is
outside of this bound.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Attributes<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>data</strong><span class="classifier">ndarray, shape (n,m)</span></dt><dd><p>The n data points of dimension m to be indexed. This array is
not copied unless this is necessary to produce a contiguous
array of doubles. The data are also copied if the kd-tree is built
with <cite>copy_data=True</cite>.</p>
</dd>
<dt><strong>leafsize</strong><span class="classifier">positive int</span></dt><dd><p>The number of points at which the algorithm switches over to
brute-force.</p>
</dd>
<dt><strong>m</strong><span class="classifier">int</span></dt><dd><p>The dimension of a single data-point.</p>
</dd>
<dt><strong>n</strong><span class="classifier">int</span></dt><dd><p>The number of data points.</p>
</dd>
<dt><strong>maxes</strong><span class="classifier">ndarray, shape (m,)</span></dt><dd><p>The maximum value in each dimension of the n data points.</p>
</dd>
<dt><strong>mins</strong><span class="classifier">ndarray, shape (m,)</span></dt><dd><p>The minimum value in each dimension of the n data points.</p>
</dd>
<dt><strong>size</strong><span class="classifier">int</span></dt><dd><p>The number of nodes in the tree.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.fbcmeasures.KDTree.count_neighbors" title="dipy.tracking.fbcmeasures.KDTree.count_neighbors"><code class="xref py py-obj docutils literal notranslate"><span class="pre">count_neighbors</span></code></a>(other, r[, p, weights, ...])</p></td>
<td><p>Count how many nearby pairs can be formed.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.fbcmeasures.KDTree.query" title="dipy.tracking.fbcmeasures.KDTree.query"><code class="xref py py-obj docutils literal notranslate"><span class="pre">query</span></code></a>(x[, k, eps, p, distance_upper_bound, ...])</p></td>
<td><p>Query the kd-tree for nearest neighbors.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.fbcmeasures.KDTree.query_ball_point" title="dipy.tracking.fbcmeasures.KDTree.query_ball_point"><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_ball_point</span></code></a>(x, r[, p, eps, workers, ...])</p></td>
<td><p>Find all points within distance r of point(s) x.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.fbcmeasures.KDTree.query_ball_tree" title="dipy.tracking.fbcmeasures.KDTree.query_ball_tree"><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_ball_tree</span></code></a>(other, r[, p, eps])</p></td>
<td><p>Find all pairs of points between <cite>self</cite> and <cite>other</cite> whose distance is at most r.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.fbcmeasures.KDTree.query_pairs" title="dipy.tracking.fbcmeasures.KDTree.query_pairs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_pairs</span></code></a>(r[, p, eps, output_type])</p></td>
<td><p>Find all pairs of points in <cite>self</cite> whose distance is at most r.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.fbcmeasures.KDTree.sparse_distance_matrix" title="dipy.tracking.fbcmeasures.KDTree.sparse_distance_matrix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sparse_distance_matrix</span></code></a>(other, max_distance)</p></td>
<td><p>Compute a sparse distance matrix.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>innernode</strong></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>leafnode</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>node</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p class="rubric">Notes</p>
<p>The algorithm used is described in Maneewongvatana and Mount 1999.
The general idea is that the kd-tree is a binary tree, each of whose
nodes represents an axis-aligned hyperrectangle. Each node specifies
an axis and splits the set of points based on whether their coordinate
along that axis is greater than or less than a particular value.</p>
<p>During construction, the axis and splitting point are chosen by the
“sliding midpoint” rule, which ensures that the cells do not all
become long and thin.</p>
<p>The tree can be queried for the r closest neighbors of any given point
(optionally returning only those within some maximum distance of the
point). It can also be queried, with a substantial gain in efficiency,
for the r approximate closest neighbors.</p>
<p>For large dimensions (20 is already large) do not expect this to run
significantly faster than brute force. High-dimensional nearest-neighbor
queries are a substantial open problem in computer science.</p>
<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.count_neighbors">
<span class="sig-name descname"><span class="pre">count_neighbors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cumulative</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scipy/spatial/_kdtree.html#KDTree.count_neighbors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.count_neighbors" title="Link to this definition">#</a></dt>
<dd><p>Count how many nearby pairs can be formed.</p>
<p>Count the number of pairs <code class="docutils literal notranslate"><span class="pre">(x1,x2)</span></code> can be formed, with <code class="docutils literal notranslate"><span class="pre">x1</span></code> drawn
from <code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">x2</span></code> drawn from <code class="docutils literal notranslate"><span class="pre">other</span></code>, and where
<code class="docutils literal notranslate"><span class="pre">distance(x1,</span> <span class="pre">x2,</span> <span class="pre">p)</span> <span class="pre">&lt;=</span> <span class="pre">r</span></code>.</p>
<p>Data points on <code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">other</span></code> are optionally weighted by the
<code class="docutils literal notranslate"><span class="pre">weights</span></code> argument. (See below)</p>
<p>This is adapted from the “two-point correlation” algorithm described by
Gray and Moore <a class="reference internal" href="#r3239e116cbed-1" id="id4">[1]</a>.  See notes for further discussion.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>other</strong><span class="classifier">KDTree</span></dt><dd><p>The other tree to draw points from, can be the same tree as self.</p>
</dd>
<dt><strong>r</strong><span class="classifier">float or one-dimensional array of floats</span></dt><dd><p>The radius to produce a count for. Multiple radii are searched with
a single tree traversal.
If the count is non-cumulative(<code class="docutils literal notranslate"><span class="pre">cumulative=False</span></code>), <code class="docutils literal notranslate"><span class="pre">r</span></code> defines
the edges of the bins, and must be non-decreasing.</p>
</dd>
<dt><strong>p</strong><span class="classifier">float, optional</span></dt><dd><p>1&lt;=p&lt;=infinity.
Which Minkowski p-norm to use.
Default 2.0.
A finite large p may cause a ValueError if overflow can occur.</p>
</dd>
<dt><strong>weights</strong><span class="classifier">tuple, array_like, or None, optional</span></dt><dd><p>If None, the pair-counting is unweighted.
If given as a tuple, weights[0] is the weights of points in
<code class="docutils literal notranslate"><span class="pre">self</span></code>, and weights[1] is the weights of points in <code class="docutils literal notranslate"><span class="pre">other</span></code>;
either can be None to indicate the points are unweighted.
If given as an array_like, weights is the weights of points in
<code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">other</span></code>. For this to make sense, <code class="docutils literal notranslate"><span class="pre">self</span></code> and
<code class="docutils literal notranslate"><span class="pre">other</span></code> must be the same tree. If <code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">other</span></code> are two
different trees, a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> is raised.
Default: None</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.6.0.</span></p>
</div>
</dd>
<dt><strong>cumulative</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether the returned counts are cumulative. When cumulative is set
to <code class="docutils literal notranslate"><span class="pre">False</span></code> the algorithm is optimized to work with a large number
of bins (&gt;10) specified by <code class="docutils literal notranslate"><span class="pre">r</span></code>. When <code class="docutils literal notranslate"><span class="pre">cumulative</span></code> is set to
True, the algorithm is optimized to work with a small number of
<code class="docutils literal notranslate"><span class="pre">r</span></code>. Default: True</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.6.0.</span></p>
</div>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>result</strong><span class="classifier">scalar or 1-D array</span></dt><dd><p>The number of pairs. For unweighted counts, the result is integer.
For weighted counts, the result is float.
If cumulative is False, <code class="docutils literal notranslate"><span class="pre">result[i]</span></code> contains the counts with
<code class="docutils literal notranslate"><span class="pre">(-inf</span> <span class="pre">if</span> <span class="pre">i</span> <span class="pre">==</span> <span class="pre">0</span> <span class="pre">else</span> <span class="pre">r[i-1])</span> <span class="pre">&lt;</span> <span class="pre">R</span> <span class="pre">&lt;=</span> <span class="pre">r[i]</span></code></p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Pair-counting is the basic operation used to calculate the two point
correlation functions from a data set composed of position of objects.</p>
<p>Two point correlation function measures the clustering of objects and
is widely used in cosmology to quantify the large scale structure
in our Universe, but it may be useful for data analysis in other fields
where self-similar assembly of objects also occur.</p>
<p>The Landy-Szalay estimator for the two point correlation function of
<code class="docutils literal notranslate"><span class="pre">D</span></code> measures the clustering signal in <code class="docutils literal notranslate"><span class="pre">D</span></code>. <a class="reference internal" href="#r3239e116cbed-2" id="id5">[2]</a></p>
<p>For example, given the position of two sets of objects,</p>
<ul class="simple">
<li><p>objects <code class="docutils literal notranslate"><span class="pre">D</span></code> (data) contains the clustering signal, and</p></li>
<li><p>objects <code class="docutils literal notranslate"><span class="pre">R</span></code> (random) that contains no signal,</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\xi(r) = \frac{&lt;D, D&gt; - 2 f &lt;D, R&gt; + f^2&lt;R, R&gt;}{f^2&lt;R, R&gt;},\]</div>
<p>where the brackets represents counting pairs between two data sets
in a finite bin around <code class="docutils literal notranslate"><span class="pre">r</span></code> (distance), corresponding to setting
<cite>cumulative=False</cite>, and <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">=</span> <span class="pre">float(len(D))</span> <span class="pre">/</span> <span class="pre">float(len(R))</span></code> is the
ratio between number of objects from data and random.</p>
<p>The algorithm implemented here is loosely based on the dual-tree
algorithm described in <a class="reference internal" href="#r3239e116cbed-1" id="id6">[1]</a>. We switch between two different
pair-cumulation scheme depending on the setting of <code class="docutils literal notranslate"><span class="pre">cumulative</span></code>.
The computing time of the method we use when for
<code class="docutils literal notranslate"><span class="pre">cumulative</span> <span class="pre">==</span> <span class="pre">False</span></code> does not scale with the total number of bins.
The algorithm for <code class="docutils literal notranslate"><span class="pre">cumulative</span> <span class="pre">==</span> <span class="pre">True</span></code> scales linearly with the
number of bins, though it is slightly faster when only
1 or 2 bins are used. <a class="reference internal" href="#r3239e116cbed-5" id="id7">[5]</a>.</p>
<p>As an extension to the naive pair-counting,
weighted pair-counting counts the product of weights instead
of number of pairs.
Weighted pair-counting is used to estimate marked correlation functions
(<a class="reference internal" href="#r3239e116cbed-3" id="id8">[3]</a>, section 2.2),
or to properly calculate the average of data per distance bin
(e.g. <a class="reference internal" href="#r3239e116cbed-4" id="id9">[4]</a>, section 2.1 on redshift).</p>
<div role="list" class="citation-list">
<div class="citation" id="r3239e116cbed-1" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id4">1</a>,<a role="doc-backlink" href="#id6">2</a>)</span>
<p>Gray and Moore,
“N-body problems in statistical learning”,
Mining the sky, 2000,
<a class="reference external" href="https://arxiv.org/abs/astro-ph/0012333">https://arxiv.org/abs/astro-ph/0012333</a></p>
</div>
<div class="citation" id="r3239e116cbed-2" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">2</a><span class="fn-bracket">]</span></span>
<p>Landy and Szalay,
“Bias and variance of angular correlation functions”,
The Astrophysical Journal, 1993,
<a class="reference external" href="http://adsabs.harvard.edu/abs/1993ApJ...412...64L">http://adsabs.harvard.edu/abs/1993ApJ…412…64L</a></p>
</div>
<div class="citation" id="r3239e116cbed-3" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">3</a><span class="fn-bracket">]</span></span>
<p>Sheth, Connolly and Skibba,
“Marked correlations in galaxy formation models”,
Arxiv e-print, 2005,
<a class="reference external" href="https://arxiv.org/abs/astro-ph/0511773">https://arxiv.org/abs/astro-ph/0511773</a></p>
</div>
<div class="citation" id="r3239e116cbed-4" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">4</a><span class="fn-bracket">]</span></span>
<p>Hawkins, et al.,
“The 2dF Galaxy Redshift Survey: correlation functions,
peculiar velocities and the matter density of the Universe”,
Monthly Notices of the Royal Astronomical Society, 2002,
<a class="reference external" href="http://adsabs.harvard.edu/abs/2003MNRAS.346...78H">http://adsabs.harvard.edu/abs/2003MNRAS.346…78H</a></p>
</div>
<div class="citation" id="r3239e116cbed-5" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">5</a><span class="fn-bracket">]</span></span>
<p><a class="github reference external" href="https://github.com/scipy/scipy/pull/5647#issuecomment-168474926">scipy/scipy#5647</a></p>
</div>
</div>
<p class="rubric">Examples</p>
<p>You can count neighbors number between two kd-trees within a distance:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="kn">import</span> <span class="n">KDTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">points1</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">points2</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kd_tree1</span> <span class="o">=</span> <span class="n">KDTree</span><span class="p">(</span><span class="n">points1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kd_tree2</span> <span class="o">=</span> <span class="n">KDTree</span><span class="p">(</span><span class="n">points2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kd_tree1</span><span class="o">.</span><span class="n">count_neighbors</span><span class="p">(</span><span class="n">kd_tree2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<p>This number is same as the total pair number calculated by
<cite>query_ball_tree</cite>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">indexes</span> <span class="o">=</span> <span class="n">kd_tree1</span><span class="o">.</span><span class="n">query_ball_tree</span><span class="p">(</span><span class="n">kd_tree2</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indexes</span><span class="p">])</span>
<span class="go">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.innernode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">innernode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ckdtreenode</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scipy/spatial/_kdtree.html#KDTree.innernode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.innernode" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.tracking.fbcmeasures.KDTree.node" title="scipy.spatial._kdtree.KDTree.node"><code class="xref py py-class docutils literal notranslate"><span class="pre">node</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>children</strong></dt><dd></dd>
<dt><strong>split</strong></dt><dd></dd>
<dt><strong>split_dim</strong></dt><dd></dd>
</dl>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.innernode.children">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">children</span></span><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.innernode.children" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.innernode.split">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">split</span></span><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.innernode.split" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.innernode.split_dim">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">split_dim</span></span><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.innernode.split_dim" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.leafnode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">leafnode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ckdtree_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scipy/spatial/_kdtree.html#KDTree.leafnode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.leafnode" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.tracking.fbcmeasures.KDTree.node" title="scipy.spatial._kdtree.KDTree.node"><code class="xref py py-class docutils literal notranslate"><span class="pre">node</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>children</strong></dt><dd></dd>
<dt><strong>idx</strong></dt><dd></dd>
</dl>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.leafnode.children">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">children</span></span><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.leafnode.children" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.leafnode.idx">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">idx</span></span><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.leafnode.idx" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.node">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ckdtree_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scipy/spatial/_kdtree.html#KDTree.node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.node" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.query">
<span class="sig-name descname"><span class="pre">query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance_upper_bound</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scipy/spatial/_kdtree.html#KDTree.query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.query" title="Link to this definition">#</a></dt>
<dd><p>Query the kd-tree for nearest neighbors.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>x</strong><span class="classifier">array_like, last dimension self.m</span></dt><dd><p>An array of points to query.</p>
</dd>
<dt><strong>k</strong><span class="classifier">int or Sequence[int], optional</span></dt><dd><p>Either the number of nearest neighbors to return, or a list of the
k-th nearest neighbors to return, starting from 1.</p>
</dd>
<dt><strong>eps</strong><span class="classifier">nonnegative float, optional</span></dt><dd><p>Return approximate nearest neighbors; the kth returned value
is guaranteed to be no further than (1+eps) times the
distance to the real kth nearest neighbor.</p>
</dd>
<dt><strong>p</strong><span class="classifier">float, 1&lt;=p&lt;=infinity, optional</span></dt><dd><p>Which Minkowski p-norm to use.
1 is the sum-of-absolute-values distance (“Manhattan” distance).
2 is the usual Euclidean distance.
infinity is the maximum-coordinate-difference distance.
A large, finite p may cause a ValueError if overflow can occur.</p>
</dd>
<dt><strong>distance_upper_bound</strong><span class="classifier">nonnegative float, optional</span></dt><dd><p>Return only neighbors within this distance. This is used to prune
tree searches, so if you are doing a series of nearest-neighbor
queries, it may help to supply the distance to the nearest neighbor
of the most recent point.</p>
</dd>
<dt><strong>workers</strong><span class="classifier">int, optional</span></dt><dd><p>Number of workers to use for parallel processing. If -1 is given
all CPU threads are used. Default: 1.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.6.0.</span></p>
</div>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>d</strong><span class="classifier">float or array of floats</span></dt><dd><p>The distances to the nearest neighbors.
If <code class="docutils literal notranslate"><span class="pre">x</span></code> has shape <code class="docutils literal notranslate"><span class="pre">tuple+(self.m,)</span></code>, then <code class="docutils literal notranslate"><span class="pre">d</span></code> has shape
<code class="docutils literal notranslate"><span class="pre">tuple+(k,)</span></code>.
When k == 1, the last dimension of the output is squeezed.
Missing neighbors are indicated with infinite distances.
Hits are sorted by distance (nearest first).</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.9.0: </span>Previously if <code class="docutils literal notranslate"><span class="pre">k=None</span></code>, then <cite>d</cite> was an object array of
shape <code class="docutils literal notranslate"><span class="pre">tuple</span></code>, containing lists of distances. This behavior
has been removed, use <cite>query_ball_point</cite> instead.</p>
</div>
</dd>
<dt><strong>i</strong><span class="classifier">integer or array of integers</span></dt><dd><p>The index of each neighbor in <code class="docutils literal notranslate"><span class="pre">self.data</span></code>.
<code class="docutils literal notranslate"><span class="pre">i</span></code> is the same shape as d.
Missing neighbors are indicated with <code class="docutils literal notranslate"><span class="pre">self.n</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="kn">import</span> <span class="n">KDTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">KDTree</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">ravel</span><span class="p">()])</span>
</pre></div>
</div>
<p>To query the nearest neighbours and return squeezed result, use</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">,</span> <span class="n">ii</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">query</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.2</span><span class="p">,</span> <span class="mf">2.9</span><span class="p">]],</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dd</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">[2.         0.2236068]</span>
<span class="go">[ 0 13]</span>
</pre></div>
</div>
<p>To query the nearest neighbours and return unsqueezed result, use</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">,</span> <span class="n">ii</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">query</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.2</span><span class="p">,</span> <span class="mf">2.9</span><span class="p">]],</span> <span class="n">k</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dd</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">[[2.        ]</span>
<span class="go"> [0.2236068]]</span>
<span class="go">[[ 0]</span>
<span class="go"> [13]]</span>
</pre></div>
</div>
<p>To query the second nearest neighbours and return unsqueezed result,
use</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">,</span> <span class="n">ii</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">query</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.2</span><span class="p">,</span> <span class="mf">2.9</span><span class="p">]],</span> <span class="n">k</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dd</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">[[2.23606798]</span>
<span class="go"> [0.80622577]]</span>
<span class="go">[[ 6]</span>
<span class="go"> [19]]</span>
</pre></div>
</div>
<p>To query the first and second nearest neighbours, use</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">,</span> <span class="n">ii</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">query</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.2</span><span class="p">,</span> <span class="mf">2.9</span><span class="p">]],</span> <span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dd</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">[[2.         2.23606798]</span>
<span class="go"> [0.2236068  0.80622577]]</span>
<span class="go">[[ 0  6]</span>
<span class="go"> [13 19]]</span>
</pre></div>
</div>
<p>or, be more specific</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">,</span> <span class="n">ii</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">query</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.2</span><span class="p">,</span> <span class="mf">2.9</span><span class="p">]],</span> <span class="n">k</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dd</span><span class="p">,</span> <span class="n">ii</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">[[2.         2.23606798]</span>
<span class="go"> [0.2236068  0.80622577]]</span>
<span class="go">[[ 0  6]</span>
<span class="go"> [13 19]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.query_ball_point">
<span class="sig-name descname"><span class="pre">query_ball_point</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_sorted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scipy/spatial/_kdtree.html#KDTree.query_ball_point"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.query_ball_point" title="Link to this definition">#</a></dt>
<dd><p>Find all points within distance r of point(s) x.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>x</strong><span class="classifier">array_like, shape tuple + (self.m,)</span></dt><dd><p>The point or points to search for neighbors of.</p>
</dd>
<dt><strong>r</strong><span class="classifier">array_like, float</span></dt><dd><p>The radius of points to return, must broadcast to the length of x.</p>
</dd>
<dt><strong>p</strong><span class="classifier">float, optional</span></dt><dd><p>Which Minkowski p-norm to use.  Should be in the range [1, inf].
A finite large p may cause a ValueError if overflow can occur.</p>
</dd>
<dt><strong>eps</strong><span class="classifier">nonnegative float, optional</span></dt><dd><p>Approximate search. Branches of the tree are not explored if their
nearest points are further than <code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">/</span> <span class="pre">(1</span> <span class="pre">+</span> <span class="pre">eps)</span></code>, and branches are
added in bulk if their furthest points are nearer than
<code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">*</span> <span class="pre">(1</span> <span class="pre">+</span> <span class="pre">eps)</span></code>.</p>
</dd>
<dt><strong>workers</strong><span class="classifier">int, optional</span></dt><dd><p>Number of jobs to schedule for parallel processing. If -1 is given
all processors are used. Default: 1.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.6.0.</span></p>
</div>
</dd>
<dt><strong>return_sorted</strong><span class="classifier">bool, optional</span></dt><dd><p>Sorts returned indices if True and does not sort them if False. If
None, does not sort single point queries, but does sort
multi-point queries which was the behavior before this option
was added.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.6.0.</span></p>
</div>
</dd>
<dt><strong>return_length</strong><span class="classifier">bool, optional</span></dt><dd><p>Return the number of points inside the radius instead of a list
of the indices.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.6.0.</span></p>
</div>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>results</strong><span class="classifier">list or array of lists</span></dt><dd><p>If <cite>x</cite> is a single point, returns a list of the indices of the
neighbors of <cite>x</cite>. If <cite>x</cite> is an array of points, returns an object
array of shape tuple containing lists of neighbors.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If you have many points whose neighbors you want to find, you may save
substantial amounts of time by putting them in a KDTree and using
query_ball_tree.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">spatial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">ravel</span><span class="p">()]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">spatial</span><span class="o">.</span><span class="n">KDTree</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">query_ball_point</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">[5, 10, 11, 15]</span>
</pre></div>
</div>
<p>Query multiple points and plot the results:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">points</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">points</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">results</span> <span class="ow">in</span> <span class="n">tree</span><span class="o">.</span><span class="n">query_ball_point</span><span class="p">(([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">nearby_points</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">results</span><span class="p">]</span>
<span class="gp">... </span>    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">nearby_points</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">nearby_points</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;o&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.query_ball_tree">
<span class="sig-name descname"><span class="pre">query_ball_tree</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scipy/spatial/_kdtree.html#KDTree.query_ball_tree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.query_ball_tree" title="Link to this definition">#</a></dt>
<dd><p>Find all pairs of points between <cite>self</cite> and <cite>other</cite> whose distance is
at most r.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>other</strong><span class="classifier">KDTree instance</span></dt><dd><p>The tree containing points to search against.</p>
</dd>
<dt><strong>r</strong><span class="classifier">float</span></dt><dd><p>The maximum distance, has to be positive.</p>
</dd>
<dt><strong>p</strong><span class="classifier">float, optional</span></dt><dd><p>Which Minkowski norm to use.  <cite>p</cite> has to meet the condition
<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;=</span> <span class="pre">p</span> <span class="pre">&lt;=</span> <span class="pre">infinity</span></code>.</p>
</dd>
<dt><strong>eps</strong><span class="classifier">float, optional</span></dt><dd><p>Approximate search.  Branches of the tree are not explored
if their nearest points are further than <code class="docutils literal notranslate"><span class="pre">r/(1+eps)</span></code>, and
branches are added in bulk if their furthest points are nearer
than <code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">*</span> <span class="pre">(1+eps)</span></code>.  <cite>eps</cite> has to be non-negative.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>results</strong><span class="classifier">list of lists</span></dt><dd><p>For each element <code class="docutils literal notranslate"><span class="pre">self.data[i]</span></code> of this tree, <code class="docutils literal notranslate"><span class="pre">results[i]</span></code> is a
list of the indices of its neighbors in <code class="docutils literal notranslate"><span class="pre">other.data</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>You can search all pairs of points between two kd-trees within a distance:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="kn">import</span> <span class="n">KDTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">points1</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">points2</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">points1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">points1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;xk&quot;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">points2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">points2</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;og&quot;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kd_tree1</span> <span class="o">=</span> <span class="n">KDTree</span><span class="p">(</span><span class="n">points1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kd_tree2</span> <span class="o">=</span> <span class="n">KDTree</span><span class="p">(</span><span class="n">points2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indexes</span> <span class="o">=</span> <span class="n">kd_tree1</span><span class="o">.</span><span class="n">query_ball_tree</span><span class="p">(</span><span class="n">kd_tree2</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">indexes</span><span class="p">)):</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">indexes</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
<span class="gp">... </span>        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">points1</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">points2</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
<span class="gp">... </span>            <span class="p">[</span><span class="n">points1</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">points2</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span> <span class="s2">&quot;-r&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.query_pairs">
<span class="sig-name descname"><span class="pre">query_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'set'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scipy/spatial/_kdtree.html#KDTree.query_pairs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.query_pairs" title="Link to this definition">#</a></dt>
<dd><p>Find all pairs of points in <cite>self</cite> whose distance is at most r.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>r</strong><span class="classifier">positive float</span></dt><dd><p>The maximum distance.</p>
</dd>
<dt><strong>p</strong><span class="classifier">float, optional</span></dt><dd><p>Which Minkowski norm to use.  <cite>p</cite> has to meet the condition
<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;=</span> <span class="pre">p</span> <span class="pre">&lt;=</span> <span class="pre">infinity</span></code>.</p>
</dd>
<dt><strong>eps</strong><span class="classifier">float, optional</span></dt><dd><p>Approximate search.  Branches of the tree are not explored
if their nearest points are further than <code class="docutils literal notranslate"><span class="pre">r/(1+eps)</span></code>, and
branches are added in bulk if their furthest points are nearer
than <code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">*</span> <span class="pre">(1+eps)</span></code>.  <cite>eps</cite> has to be non-negative.</p>
</dd>
<dt><strong>output_type</strong><span class="classifier">string, optional</span></dt><dd><p>Choose the output container, ‘set’ or ‘ndarray’. Default: ‘set’</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.6.0.</span></p>
</div>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>results</strong><span class="classifier">set or ndarray</span></dt><dd><p>Set of pairs <code class="docutils literal notranslate"><span class="pre">(i,j)</span></code>, with <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">&lt;</span> <span class="pre">j</span></code>, for which the corresponding
positions are close. If output_type is ‘ndarray’, an ndarry is
returned instead of a set.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>You can search all pairs of points in a kd-tree within a distance:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="kn">import</span> <span class="n">KDTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">points</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">points</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">points</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;xk&quot;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kd_tree</span> <span class="o">=</span> <span class="n">KDTree</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pairs</span> <span class="o">=</span> <span class="n">kd_tree</span><span class="o">.</span><span class="n">query_pairs</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
<span class="gp">... </span>            <span class="p">[</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span> <span class="s2">&quot;-r&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.sparse_distance_matrix">
<span class="sig-name descname"><span class="pre">sparse_distance_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_distance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dok_matrix'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scipy/spatial/_kdtree.html#KDTree.sparse_distance_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.sparse_distance_matrix" title="Link to this definition">#</a></dt>
<dd><p>Compute a sparse distance matrix.</p>
<p>Computes a distance matrix between two KDTrees, leaving as zero
any distance greater than max_distance.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>other</strong><span class="classifier">KDTree</span></dt><dd></dd>
<dt><strong>max_distance</strong><span class="classifier">positive float</span></dt><dd></dd>
<dt><strong>p</strong><span class="classifier">float, 1&lt;=p&lt;=infinity</span></dt><dd><p>Which Minkowski p-norm to use.
A finite large p may cause a ValueError if overflow can occur.</p>
</dd>
<dt><strong>output_type</strong><span class="classifier">string, optional</span></dt><dd><p>Which container to use for output data. Options: ‘dok_matrix’,
‘coo_matrix’, ‘dict’, or ‘ndarray’. Default: ‘dok_matrix’.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.6.0.</span></p>
</div>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>result</strong><span class="classifier">dok_matrix, coo_matrix, dict or ndarray</span></dt><dd><p>Sparse matrix representing the results in “dictionary of keys”
format. If a dict is returned the keys are (i,j) tuples of indices.
If output_type is ‘ndarray’ a record array with fields ‘i’, ‘j’,
and ‘v’ is returned,</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>You can compute a sparse distance matrix between two kd-trees:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="kn">import</span> <span class="n">KDTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">points1</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">points2</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kd_tree1</span> <span class="o">=</span> <span class="n">KDTree</span><span class="p">(</span><span class="n">points1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kd_tree2</span> <span class="o">=</span> <span class="n">KDTree</span><span class="p">(</span><span class="n">points2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdm</span> <span class="o">=</span> <span class="n">kd_tree1</span><span class="o">.</span><span class="n">sparse_distance_matrix</span><span class="p">(</span><span class="n">kd_tree2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdm</span><span class="o">.</span><span class="n">toarray</span><span class="p">()</span>
<span class="go">array([[0.        , 0.        , 0.12295571, 0.        , 0.        ],</span>
<span class="go">   [0.        , 0.        , 0.        , 0.        , 0.        ],</span>
<span class="go">   [0.28942611, 0.        , 0.        , 0.2333084 , 0.        ],</span>
<span class="go">   [0.        , 0.        , 0.        , 0.        , 0.        ],</span>
<span class="go">   [0.24617575, 0.29571802, 0.26836782, 0.        , 0.        ]])</span>
</pre></div>
</div>
<p>You can check distances above the <cite>max_distance</cite> are zeros:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="kn">import</span> <span class="n">distance_matrix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance_matrix</span><span class="p">(</span><span class="n">points1</span><span class="p">,</span> <span class="n">points2</span><span class="p">)</span>
<span class="go">array([[0.56906522, 0.39923701, 0.12295571, 0.8658745 , 0.79428925],</span>
<span class="go">   [0.37327919, 0.7225693 , 0.87665969, 0.32580855, 0.75679479],</span>
<span class="go">   [0.28942611, 0.30088013, 0.6395831 , 0.2333084 , 0.33630734],</span>
<span class="go">   [0.31994999, 0.72658602, 0.71124834, 0.55396483, 0.90785663],</span>
<span class="go">   [0.24617575, 0.29571802, 0.26836782, 0.57714465, 0.6473269 ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.KDTree.tree">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tree</span></span><a class="headerlink" href="#dipy.tracking.fbcmeasures.KDTree.tree" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="interp1d">
<h3><a class="reference internal" href="#dipy.tracking.fbcmeasures.interp1d" title="dipy.tracking.fbcmeasures.interp1d"><code class="xref py py-class docutils literal notranslate"><span class="pre">interp1d</span></code></a><a class="headerlink" href="#interp1d" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.interp1d">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.fbcmeasures.</span></span><span class="sig-name descname"><span class="pre">interp1d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assume_sorted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scipy/interpolate/_interpolate.html#interp1d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.fbcmeasures.interp1d" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_Interpolator1D</span></code></p>
<p>Interpolate a 1-D function.</p>
<p><cite>x</cite> and <cite>y</cite> are arrays of values used to approximate some function f:
<code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">f(x)</span></code>. This class returns a function whose call method uses
interpolation to find the value of new points.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>x</strong><span class="classifier">(npoints, ) array_like</span></dt><dd><p>A 1-D array of real values.</p>
</dd>
<dt><strong>y</strong><span class="classifier">(…, npoints, …) array_like</span></dt><dd><p>A N-D array of real values. The length of <cite>y</cite> along the interpolation
axis must be equal to the length of <cite>x</cite>. Use the <code class="docutils literal notranslate"><span class="pre">axis</span></code> parameter
to select correct axis. Unlike other interpolators, the default
interpolation axis is the last axis of <cite>y</cite>.</p>
</dd>
<dt><strong>kind</strong><span class="classifier">str or int, optional</span></dt><dd><p>Specifies the kind of interpolation as a string or as an integer
specifying the order of the spline interpolator to use.
The string has to be one of ‘linear’, ‘nearest’, ‘nearest-up’, ‘zero’,
‘slinear’, ‘quadratic’, ‘cubic’, ‘previous’, or ‘next’. ‘zero’,
‘slinear’, ‘quadratic’ and ‘cubic’ refer to a spline interpolation of
zeroth, first, second or third order; ‘previous’ and ‘next’ simply
return the previous or next value of the point; ‘nearest-up’ and
‘nearest’ differ when interpolating half-integers (e.g. 0.5, 1.5)
in that ‘nearest-up’ rounds up and ‘nearest’ rounds down. Default
is ‘linear’.</p>
</dd>
<dt><strong>axis</strong><span class="classifier">int, optional</span></dt><dd><p>Axis in the <code class="docutils literal notranslate"><span class="pre">y</span></code> array corresponding to the x-coordinate values. Unlike
other interpolators, defaults to <code class="docutils literal notranslate"><span class="pre">axis=-1</span></code>.</p>
</dd>
<dt><strong>copy</strong><span class="classifier">bool, optional</span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the class makes internal copies of x and y. If <code class="docutils literal notranslate"><span class="pre">False</span></code>,
references to <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are used if possible. The default is to copy.</p>
</dd>
<dt><strong>bounds_error</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, a ValueError is raised any time interpolation is attempted on
a value outside of the range of x (where extrapolation is
necessary). If False, out of bounds values are assigned <cite>fill_value</cite>.
By default, an error is raised unless <code class="docutils literal notranslate"><span class="pre">fill_value=&quot;extrapolate&quot;</span></code>.</p>
</dd>
<dt><strong>fill_value</strong><span class="classifier">array-like or (array-like, array_like) or “extrapolate”, optional</span></dt><dd><ul>
<li><p>if a ndarray (or float), this value will be used to fill in for
requested points outside of the data range. If not provided, then
the default is NaN. The array-like must broadcast properly to the
dimensions of the non-interpolation axes.</p></li>
<li><p>If a two-element tuple, then the first element is used as a
fill value for <code class="docutils literal notranslate"><span class="pre">x_new</span> <span class="pre">&lt;</span> <span class="pre">x[0]</span></code> and the second element is used for
<code class="docutils literal notranslate"><span class="pre">x_new</span> <span class="pre">&gt;</span> <span class="pre">x[-1]</span></code>. Anything that is not a 2-element tuple (e.g.,
list or ndarray, regardless of shape) is taken to be a single
array-like argument meant to be used for both bounds as
<code class="docutils literal notranslate"><span class="pre">below,</span> <span class="pre">above</span> <span class="pre">=</span> <span class="pre">fill_value,</span> <span class="pre">fill_value</span></code>. Using a two-element tuple
or ndarray requires <code class="docutils literal notranslate"><span class="pre">bounds_error=False</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.17.0.</span></p>
</div>
</li>
<li><p>If “extrapolate”, then points outside the data range will be
extrapolated.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.17.0.</span></p>
</div>
</li>
</ul>
</dd>
<dt><strong>assume_sorted</strong><span class="classifier">bool, optional</span></dt><dd><p>If False, values of <cite>x</cite> can be in any order and they are sorted first.
If True, <cite>x</cite> has to be an array of monotonically increasing values.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Attributes<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#dipy.tracking.fbcmeasures.interp1d.fill_value" title="dipy.tracking.fbcmeasures.interp1d.fill_value"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fill_value</span></code></a></dt><dd><p>The fill value.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">__call__</span></code>(x)</p></td>
<td><p>Evaluate the interpolant</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">splrep</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">splev</span></code></dt><dd><p>Spline interpolation/smoothing based on FITPACK.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">UnivariateSpline</span></code></dt><dd><p>An object-oriented wrapper of the FITPACK routines.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">interp2d</span></code></dt><dd><p>2-D interpolation</p>
</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>Calling <cite>interp1d</cite> with NaNs present in input values results in
undefined behaviour.</p>
<p>Input values <cite>x</cite> and <cite>y</cite> must be convertible to <cite>float</cite> values like
<cite>int</cite> or <cite>float</cite>.</p>
<p>If the values in <cite>x</cite> are not unique, the resulting behavior is
undefined and specific to the choice of <cite>kind</cite>, i.e., changing
<cite>kind</cite> will change the behavior for duplicates.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">interpolate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">/</span><span class="mf">3.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">interpolate</span><span class="o">.</span><span class="n">interp1d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">xnew</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ynew</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">xnew</span><span class="p">)</span>   <span class="c1"># use interpolation function returned by `interp1d`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">xnew</span><span class="p">,</span> <span class="n">ynew</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.interp1d.dtype">
<span class="sig-name descname"><span class="pre">dtype</span></span><a class="headerlink" href="#dipy.tracking.fbcmeasures.interp1d.dtype" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.interp1d.fill_value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fill_value</span></span><a class="headerlink" href="#dipy.tracking.fbcmeasures.interp1d.fill_value" title="Link to this definition">#</a></dt>
<dd><p>The fill value.</p>
</dd></dl>

</dd></dl>

</section>
<section id="compute-rfbc">
<h3>compute_rfbc<a class="headerlink" href="#compute-rfbc" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.compute_rfbc">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.fbcmeasures.</span></span><span class="sig-name descname"><span class="pre">compute_rfbc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streamline_scores</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_windowsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.fbcmeasures.compute_rfbc" title="Link to this definition">#</a></dt>
<dd><p>Compute the relative fiber to bundle coherence (RFBC)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines_length</strong><span class="classifier">1D int array</span></dt><dd><p>Contains the length of each streamline</p>
</dd>
<dt><strong>streamlines_scores</strong><span class="classifier">2D double array</span></dt><dd><p>Contains the local fiber to bundle coherence (LFBC) for each streamline
element.</p>
</dd>
<dt><strong>max_windowsize</strong><span class="classifier">int</span></dt><dd><p>The maximal window size used to calculate the average LFBC region</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>output: normalized lowest average LFBC region along the fiber</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="determine-num-threads">
<h3>determine_num_threads<a class="headerlink" href="#determine-num-threads" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.determine_num_threads">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.fbcmeasures.</span></span><span class="sig-name descname"><span class="pre">determine_num_threads</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_threads</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.fbcmeasures.determine_num_threads" title="Link to this definition">#</a></dt>
<dd><p>Determine the effective number of threads to be used for OpenMP calls</p>
<ul class="simple">
<li><p>For <code class="docutils literal notranslate"><span class="pre">num_threads</span> <span class="pre">=</span> <span class="pre">None</span></code>,
- if the <code class="docutils literal notranslate"><span class="pre">OMP_NUM_THREADS</span></code> environment variable is set, return that
value
- otherwise, return the maximum number of cores retrieved by
<code class="docutils literal notranslate"><span class="pre">openmp.opm_get_num_procs()</span></code>.</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">num_threads</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>, return this value.</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">num_threads</span> <span class="pre">&lt;</span> <span class="pre">0</span></code>, return the maximal number of threads minus
<code class="docutils literal notranslate"><span class="pre">|num_threads</span> <span class="pre">+</span> <span class="pre">1|</span></code>. In particular <code class="docutils literal notranslate"><span class="pre">num_threads</span> <span class="pre">=</span> <span class="pre">-1</span></code> will use as
many threads as there are available cores on the machine.</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">num_threads</span> <span class="pre">=</span> <span class="pre">0</span></code> a ValueError is raised.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>num_threads</strong><span class="classifier">int or None</span></dt><dd><p>Desired number of threads to be used.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="min-moving-average">
<h3>min_moving_average<a class="headerlink" href="#min-moving-average" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.fbcmeasures.min_moving_average">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.fbcmeasures.</span></span><span class="sig-name descname"><span class="pre">min_moving_average</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.fbcmeasures.min_moving_average" title="Link to this definition">#</a></dt>
<dd><p>Return the lowest cumulative sum for the score of a streamline segment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>a</strong><span class="classifier">array</span></dt><dd><p>Input array</p>
</dd>
<dt><strong>n</strong><span class="classifier">int</span></dt><dd><p>Length of the segment</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>output: normalized lowest average LFBC region along the fiber</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="detect-corresponding-tracks">
<h3>detect_corresponding_tracks<a class="headerlink" href="#detect-corresponding-tracks" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.learning.detect_corresponding_tracks">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.learning.</span></span><span class="sig-name descname"><span class="pre">detect_corresponding_tracks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracks1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracks2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/learning.html#detect_corresponding_tracks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.learning.detect_corresponding_tracks" title="Link to this definition">#</a></dt>
<dd><p>Detect corresponding tracks from list tracks1 to list tracks2
where tracks1 &amp; tracks2 are lists of tracks</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>indices</strong><span class="classifier">sequence</span></dt><dd><p>of indices of tracks1 that are to be detected in tracks2</p>
</dd>
<dt><strong>tracks1</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</dd>
<dt><strong>tracks2</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (M1,3) .. (Mm,3)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>track2track</strong><span class="classifier">array (N,2) where N is len(indices) of int</span></dt><dd><p>it shows the correspondence in the following way:
the first column is the current index in tracks1
the second column is the corresponding index in tracks2</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>To find the corresponding tracks we use mam_distances with ‘avg’ option.
Then we calculate the argmin of all the calculated distances and return it
for every index. (See 3rd column of arr in the example given below.)</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dipy.tracking.learning</span> <span class="k">as</span> <span class="nn">tl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle1</span> <span class="o">=</span> <span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle2</span> <span class="o">=</span> <span class="p">[</span><span class="n">B</span><span class="p">,</span> <span class="n">A</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">tl</span><span class="o">.</span><span class="n">detect_corresponding_tracks</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">bundle1</span><span class="p">,</span> <span class="n">bundle2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="detect-corresponding-tracks-plus">
<h3>detect_corresponding_tracks_plus<a class="headerlink" href="#detect-corresponding-tracks-plus" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.learning.detect_corresponding_tracks_plus">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.learning.</span></span><span class="sig-name descname"><span class="pre">detect_corresponding_tracks_plus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracks1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracks2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/learning.html#detect_corresponding_tracks_plus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.learning.detect_corresponding_tracks_plus" title="Link to this definition">#</a></dt>
<dd><p>Detect corresponding tracks from 1 to 2 where tracks1 &amp; tracks2 are
sequences of tracks</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>indices</strong><span class="classifier">sequence</span></dt><dd><p>of indices of tracks1 that are to be detected in tracks2</p>
</dd>
<dt><strong>tracks1</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</dd>
<dt><strong>indices2</strong><span class="classifier">sequence</span></dt><dd><p>of indices of tracks2 in the initial brain</p>
</dd>
<dt><strong>tracks2</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (M1,3) .. (Mm,3)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>track2track</strong><span class="classifier">array (N,2) where N is len(indices)</span></dt><dd><p>of int showing the correspondence in th following way
the first column is the current index of tracks1
the second column is the corresponding index in tracks2</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">distances.mam_distances</span></code></dt><dd></dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>To find the corresponding tracks we use mam_distances with ‘avg’ option.
Then we calculate the argmin of all the calculated distances and return it
for every index. (See 3rd column of arr in the example given below.)</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dipy.tracking.learning</span> <span class="k">as</span> <span class="nn">tl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle1</span> <span class="o">=</span> <span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle2</span> <span class="o">=</span> <span class="p">[</span><span class="n">B</span><span class="p">,</span> <span class="n">A</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices2</span> <span class="o">=</span> <span class="n">indices</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">tl</span><span class="o">.</span><span class="n">detect_corresponding_tracks_plus</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">bundle1</span><span class="p">,</span> <span class="n">indices2</span><span class="p">,</span> <span class="n">bundle2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="lifesignalmaker">
<h3><a class="reference internal" href="#dipy.tracking.life.LifeSignalMaker" title="dipy.tracking.life.LifeSignalMaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">LifeSignalMaker</span></code></a><a class="headerlink" href="#lifesignalmaker" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.life.LifeSignalMaker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">LifeSignalMaker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gtab</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.001,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sphere</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#LifeSignalMaker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.LifeSignalMaker" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A class for generating signals from streamlines in an efficient and speedy
manner.</p>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.life.LifeSignalMaker.streamline_signal" title="dipy.tracking.life.LifeSignalMaker.streamline_signal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">streamline_signal</span></code></a>(streamline)</p></td>
<td><p>Approximate the signal for a given streamline</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>calc_signal</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.life.LifeSignalMaker.calc_signal">
<span class="sig-name descname"><span class="pre">calc_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#LifeSignalMaker.calc_signal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.LifeSignalMaker.calc_signal" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.life.LifeSignalMaker.streamline_signal">
<span class="sig-name descname"><span class="pre">streamline_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#LifeSignalMaker.streamline_signal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.LifeSignalMaker.streamline_signal" title="Link to this definition">#</a></dt>
<dd><p>Approximate the signal for a given streamline</p>
</dd></dl>

</dd></dl>

</section>
<section id="fibermodel">
<h3><a class="reference internal" href="#dipy.tracking.life.FiberModel" title="dipy.tracking.life.FiberModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">FiberModel</span></code></a><a class="headerlink" href="#fibermodel" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.life.FiberModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">FiberModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gtab</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#FiberModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.FiberModel" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.html#dipy.reconst.base.ReconstModel" title="dipy.reconst.base.ReconstModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReconstModel</span></code></a></p>
<p>A class for representing and solving predictive models based on
tractography solutions.</p>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.life.FiberModel.fit" title="dipy.tracking.life.FiberModel.fit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit</span></code></a>(data, streamline, affine, *[, evals, sphere])</p></td>
<td><p>Fit the LiFE FiberModel for data and a set of streamlines associated with this data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#dipy.tracking.life.FiberModel.setup" title="dipy.tracking.life.FiberModel.setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup</span></code></a>(streamline, affine, *[, evals, sphere])</p></td>
<td><p>Set up the necessary components for the LiFE model: the matrix of fiber-contributions to the DWI signal, and the coordinates of voxels for which the equations will be solved</p></td>
</tr>
</tbody>
</table>
</div>
<p class="rubric">Notes</p>
<p>This is an implementation of the LiFE model described in
<a class="footnote-reference brackets" href="#footcite-pestilli2014" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<p class="rubric">References</p>
<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.life.FiberModel.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.001,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sphere</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#FiberModel.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.FiberModel.fit" title="Link to this definition">#</a></dt>
<dd><p>Fit the LiFE FiberModel for data and a set of streamlines associated
with this data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">4D array</span></dt><dd><p>Diffusion-weighted data</p>
</dd>
<dt><strong>streamline</strong><span class="classifier">list</span></dt><dd><p>A bunch of streamlines</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt><strong>evals</strong><span class="classifier">array-like, optional</span></dt><dd><p>The eigenvalues of the tensor response function used in
constructing the model signal. Default: [0.001, 0, 0]</p>
</dd>
<dt><strong>sphere: `dipy.core.Sphere` instance or False, optional</strong></dt><dd><p>Whether to approximate (and cache) the signal on a discrete
sphere. This may confer a significant speed-up in setting up the
problem, but is not as accurate. If <cite>False</cite>, we use the exact
gradients along the streamlines to calculate the matrix, instead of
an approximation.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>FiberFit class instance</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.life.FiberModel.setup">
<span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.001,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sphere</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#FiberModel.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.FiberModel.setup" title="Link to this definition">#</a></dt>
<dd><p>Set up the necessary components for the LiFE model: the matrix of
fiber-contributions to the DWI signal, and the coordinates of voxels
for which the equations will be solved</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamline</strong><span class="classifier">list</span></dt><dd><p>Streamlines, each is an array of shape (n, 3)</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt><strong>evals</strong><span class="classifier">array-like (3 items, optional)</span></dt><dd><p>The eigenvalues of the canonical tensor used as a response
function. Default:[0.001, 0, 0].</p>
</dd>
<dt><strong>sphere: `dipy.core.Sphere` instance, optional</strong></dt><dd><p>Whether to approximate (and cache) the signal on a discrete
sphere. This may confer a significant speed-up in setting up the
problem, but is not as accurate. If <cite>False</cite>, we use the exact
gradients along the streamlines to calculate the matrix, instead of
an approximation. Defaults to use the 724-vertex symmetric sphere
from <a class="reference internal" href="dipy.data.html#module-dipy.data" title="dipy.data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dipy.data</span></code></a></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="fiberfit">
<h3><a class="reference internal" href="#dipy.tracking.life.FiberFit" title="dipy.tracking.life.FiberFit"><code class="xref py py-class docutils literal notranslate"><span class="pre">FiberFit</span></code></a><a class="headerlink" href="#fiberfit" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.life.FiberFit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">FiberFit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fiber_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">life_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vox_coords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_fit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weighted_signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b0_signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean_sig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vox_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#FiberFit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.FiberFit" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.html#dipy.reconst.base.ReconstFit" title="dipy.reconst.base.ReconstFit"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReconstFit</span></code></a></p>
<p>A fit of the LiFE model to diffusion data</p>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.life.FiberFit.predict" title="dipy.tracking.life.FiberFit.predict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">predict</span></code></a>(*[, gtab, S0])</p></td>
<td><p>Predict the signal</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.life.FiberFit.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gtab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">S0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#FiberFit.predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.FiberFit.predict" title="Link to this definition">#</a></dt>
<dd><p>Predict the signal</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>gtab</strong><span class="classifier">GradientTable</span></dt><dd><p>Default: use self.gtab</p>
</dd>
<dt><strong>S0</strong><span class="classifier">float or array</span></dt><dd><p>The non-diffusion-weighted signal in the voxels for which a
prediction is made. Default: use self.b0_signal</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>prediction</strong><span class="classifier">ndarray of shape (voxels, bvecs)</span></dt><dd><p>An array with a prediction of the signal in each voxel/direction</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="gradient">
<h3>gradient<a class="headerlink" href="#gradient" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.life.gradient">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">gradient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#gradient"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.gradient" title="Link to this definition">#</a></dt>
<dd><p>Return the gradient of an N-dimensional array.</p>
<p>The gradient is computed using central differences in the interior
and first differences at the boundaries. The returned gradient hence has
the same shape as the input array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>f</strong><span class="classifier">array_like</span></dt><dd><p>An N-dimensional array containing samples of a scalar function.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>gradient</strong><span class="classifier">ndarray</span></dt><dd><p>N arrays of the same shape as <cite>f</cite> giving the derivative of <cite>f</cite> with
respect to each dimension.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This is a simplified implementation of gradient that is part of numpy
1.8. In order to mitigate the effects of changes added to this
implementation in version 1.9 of numpy, we include this implementation
here.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">16</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gradient</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">array([ 1. ,  1.5,  2.5,  3.5,  4.5,  5. ])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gradient</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">))</span>
<span class="go">[array([[ 2.,  2., -1.],</span>
<span class="go">       [ 2.,  2., -1.]]), array([[ 1. ,  2.5,  4. ],</span>
<span class="go">       [ 1. ,  1. ,  1. ]])]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="streamline-gradients">
<h3>streamline_gradients<a class="headerlink" href="#streamline-gradients" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.life.streamline_gradients">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">streamline_gradients</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#streamline_gradients"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.streamline_gradients" title="Link to this definition">#</a></dt>
<dd><p>Calculate the gradients of the streamline along the spatial dimension</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamline</strong><span class="classifier">array-like of shape (n, 3)</span></dt><dd><p>The 3d coordinates of a single streamline</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>Array of shape (3, n): Spatial gradients along the length of the</dt><dd></dd>
<dt>streamline.</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="grad-tensor">
<h3>grad_tensor<a class="headerlink" href="#grad-tensor" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.life.grad_tensor">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">grad_tensor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#grad_tensor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.grad_tensor" title="Link to this definition">#</a></dt>
<dd><p>Calculate the 3 by 3 tensor for a given spatial gradient, given a canonical
tensor shape (also as a 3 by 3), pointing at [1,0,0]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>grad</strong><span class="classifier">1d array of shape (3,)</span></dt><dd><p>The spatial gradient (e.g between two nodes of a streamline).</p>
</dd>
<dt><strong>evals: 1d array of shape (3,)</strong></dt><dd><p>The eigenvalues of a canonical tensor to be used as a response
function.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="streamline-tensors">
<h3>streamline_tensors<a class="headerlink" href="#streamline-tensors" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.life.streamline_tensors">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">streamline_tensors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.001,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#streamline_tensors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.streamline_tensors" title="Link to this definition">#</a></dt>
<dd><p>The tensors generated by this fiber.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamline</strong><span class="classifier">array-like of shape (n, 3)</span></dt><dd><p>The 3d coordinates of a single streamline</p>
</dd>
<dt><strong>evals</strong><span class="classifier">iterable with three entries, optional</span></dt><dd><p>The estimated eigenvalues of a single fiber tensor.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>An n_nodes by 3 by 3 array with the tensor for each node in the fiber.</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Estimates of the radial/axial diffusivities may rely on
empirical measurements (for example, the AD in the Corpus Callosum), or
may be based on a biophysical model of some kind.</p>
</dd></dl>

</section>
<section id="streamline-signal">
<h3>streamline_signal<a class="headerlink" href="#streamline-signal" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.life.streamline_signal">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">streamline_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gtab</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.001,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#streamline_signal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.streamline_signal" title="Link to this definition">#</a></dt>
<dd><p>The signal from a single streamline estimate along each of its nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamline</strong><span class="classifier">a single streamline</span></dt><dd><p>Streamline data.</p>
</dd>
<dt><strong>gtab</strong><span class="classifier">GradientTable class instance</span></dt><dd><p>Gradient table.</p>
</dd>
<dt><strong>evals</strong><span class="classifier">array-like of length 3, optional</span></dt><dd><p>The eigenvalues of the canonical tensor used as an estimate of the
signal generated by each node of the streamline.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="voxel2streamline">
<h3>voxel2streamline<a class="headerlink" href="#voxel2streamline" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.life.voxel2streamline">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.life.</span></span><span class="sig-name descname"><span class="pre">voxel2streamline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/life.html#voxel2streamline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.life.voxel2streamline" title="Link to this definition">#</a></dt>
<dd><p>Maps voxels to streamlines and streamlines to voxels, for setting up
the LiFE equations matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamline</strong><span class="classifier">list</span></dt><dd><p>A collection of streamlines, each n by 3, with n being the number of
nodes in the fiber.</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt><strong>unique_idx</strong><span class="classifier">array, optional.</span></dt><dd><p>The unique indices in the streamlines</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>v2f, v2fn</strong><span class="classifier">tuple of dicts</span></dt><dd></dd>
<dt>The first dict in the tuple answers the question: Given a voxel (from</dt><dd></dd>
<dt>the unique indices in this model), which fibers pass through it?</dt><dd></dd>
<dt>The second answers the question: Given a streamline, for each voxel that</dt><dd></dd>
<dt>this streamline passes through, which nodes of that streamline are in that</dt><dd></dd>
<dt>voxel?</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="localtracking">
<h3><a class="reference internal" href="#dipy.tracking.local_tracking.LocalTracking" title="dipy.tracking.local_tracking.LocalTracking"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalTracking</span></code></a><a class="headerlink" href="#localtracking" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.local_tracking.LocalTracking">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.local_tracking.</span></span><span class="sig-name descname"><span class="pre">LocalTracking</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">direction_getter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopping_criterion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seeds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cross</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxlen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minlen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixedstep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_seeds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unidirectional</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">randomize_forward_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_directions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/local_tracking.html#LocalTracking"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.local_tracking.LocalTracking" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

</section>
<section id="particlefilteringtracking">
<h3><a class="reference internal" href="#dipy.tracking.local_tracking.ParticleFilteringTracking" title="dipy.tracking.local_tracking.ParticleFilteringTracking"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParticleFilteringTracking</span></code></a><a class="headerlink" href="#particlefilteringtracking" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.local_tracking.ParticleFilteringTracking">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.local_tracking.</span></span><span class="sig-name descname"><span class="pre">ParticleFilteringTracking</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">direction_getter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopping_criterion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seeds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cross</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxlen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minlen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pft_back_tracking_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pft_front_tracking_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pft_max_trial</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">particle_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_seeds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_wm_pve_before_stopping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unidirectional</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">randomize_forward_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_directions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/local_tracking.html#ParticleFilteringTracking"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.local_tracking.ParticleFilteringTracking" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.tracking.local_tracking.LocalTracking" title="dipy.tracking.local_tracking.LocalTracking"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalTracking</span></code></a></p>
</dd></dl>

</section>
<section id="local-tracker">
<h3>local_tracker<a class="headerlink" href="#local-tracker" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.localtrack.local_tracker">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.localtrack.</span></span><span class="sig-name descname"><span class="pre">local_tracker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed_pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voxel_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixedstep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.localtrack.local_tracker" title="Link to this definition">#</a></dt>
<dd><p>Tracks one direction from a seed.</p>
<p>This function is the main workhorse of the <code class="docutils literal notranslate"><span class="pre">LocalTracking</span></code> class defined
in <code class="docutils literal notranslate"><span class="pre">dipy.tracking.local_tracking</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>dg</strong><span class="classifier">DirectionGetter</span></dt><dd><p>Used to choosing tracking directions.</p>
</dd>
<dt><strong>sc</strong><span class="classifier">StoppingCriterion</span></dt><dd><p>Used to check the streamline status (e.g. endpoint) along path.</p>
</dd>
<dt><strong>seed_pos</strong><span class="classifier">array, float, 1d, (3,)</span></dt><dd><p>First point of the (partial) streamline.</p>
</dd>
<dt><strong>first_step</strong><span class="classifier">array, float, 1d, (3,)</span></dt><dd><p>Initial seeding direction. Used as <code class="docutils literal notranslate"><span class="pre">prev_dir</span></code> for selecting the step
direction from the seed point.</p>
</dd>
<dt><strong>voxel_size</strong><span class="classifier">array, float, 1d, (3,)</span></dt><dd><p>Size of voxels in the data set.</p>
</dd>
<dt><strong>streamline</strong><span class="classifier">array, float, 2d, (N, 3)</span></dt><dd><p>Output of tracking will be put into this array. The length of this
array, <code class="docutils literal notranslate"><span class="pre">N</span></code>, will set the maximum allowable length of the streamline.</p>
</dd>
<dt><strong>step_size</strong><span class="classifier">float</span></dt><dd><p>Size of tracking steps in mm if <code class="docutils literal notranslate"><span class="pre">fixed_step</span></code>.</p>
</dd>
<dt><strong>fixedstep</strong><span class="classifier">int</span></dt><dd><p>If greater than 0, a fixed step_size is used, otherwise a variable
step size is used.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>end</strong><span class="classifier">int</span></dt><dd><p>Length of the tracked streamline</p>
</dd>
<dt><strong>stream_status</strong><span class="classifier">StreamlineStatus</span></dt><dd><p>Ending state of the streamlines as determined by the StoppingCriterion.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="pft-tracker">
<h3>pft_tracker<a class="headerlink" href="#pft-tracker" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.localtrack.pft_tracker">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.localtrack.</span></span><span class="sig-name descname"><span class="pre">pft_tracker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed_pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voxel_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pft_max_nbr_back_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pft_max_nbr_front_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pft_max_trials</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">particle_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">particle_paths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">particle_dirs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">particle_weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">particle_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">particle_stream_statuses</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_wm_pve_before_stopping</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.localtrack.pft_tracker" title="Link to this definition">#</a></dt>
<dd><p>Tracks one direction from a seed using the particle filtering algorithm.</p>
<p>This function is the main workhorse of the <code class="docutils literal notranslate"><span class="pre">ParticleFilteringTracking</span></code>
class defined in <code class="docutils literal notranslate"><span class="pre">dipy.tracking.local_tracking</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>dg</strong><span class="classifier">DirectionGetter</span></dt><dd><p>Used to choosing tracking directions.</p>
</dd>
<dt><strong>sc</strong><span class="classifier">AnatomicalStoppingCriterion</span></dt><dd><p>Used to check the streamline status (e.g. endpoint) along path.</p>
</dd>
<dt><strong>seed_pos</strong><span class="classifier">array, float, 1d, (3,)</span></dt><dd><p>First point of the (partial) streamline.</p>
</dd>
<dt><strong>first_step</strong><span class="classifier">array, float, 1d, (3,)</span></dt><dd><p>Initial seeding direction. Used as <code class="docutils literal notranslate"><span class="pre">prev_dir</span></code> for selecting the step
direction from the seed point.</p>
</dd>
<dt><strong>voxel_size</strong><span class="classifier">array, float, 1d, (3,)</span></dt><dd><p>Size of voxels in the data set.</p>
</dd>
<dt><strong>streamline</strong><span class="classifier">array, float, 2d, (N, 3)</span></dt><dd><p>Output of tracking will be put into this array. The length of this
array, <code class="docutils literal notranslate"><span class="pre">N</span></code>, will set the maximum allowable length of the streamline.</p>
</dd>
<dt><strong>directions</strong><span class="classifier">array, float, 2d, (N, 3)</span></dt><dd><p>Output of tracking directions will be put into this array. The length
of this array, <code class="docutils literal notranslate"><span class="pre">N</span></code>, will set the maximum allowable length of the
streamline.</p>
</dd>
<dt><strong>step_size</strong><span class="classifier">float</span></dt><dd><p>Size of tracking steps in mm if <code class="docutils literal notranslate"><span class="pre">fixed_step</span></code>.</p>
</dd>
<dt><strong>pft_max_nbr_back_steps</strong><span class="classifier">int</span></dt><dd><p>Number of tracking steps to back track before starting the particle
filtering tractography.</p>
</dd>
<dt><strong>pft_max_nbr_front_steps</strong><span class="classifier">int</span></dt><dd><p>Number of additional tracking steps to track.</p>
</dd>
<dt><strong>pft_max_trials</strong><span class="classifier">int</span></dt><dd><p>Maximum number of trials for the particle filtering tractography
(Prevents infinite loops).</p>
</dd>
<dt><strong>particle_count</strong><span class="classifier">int</span></dt><dd><p>Number of particles to use in the particle filter.</p>
</dd>
<dt><strong>particle_paths</strong><span class="classifier">array, float, 4d, (2, particle_count, pft_max_steps, 3)</span></dt><dd><p>Temporary array for paths followed by all particles.</p>
</dd>
<dt><strong>particle_dirs</strong><span class="classifier">array, float, 4d, (2, particle_count, pft_max_steps, 3)</span></dt><dd><p>Temporary array for directions followed by particles.</p>
</dd>
<dt><strong>particle_weights</strong><span class="classifier">array, float, 1d (particle_count)</span></dt><dd><p>Temporary array for the weights of particles.</p>
</dd>
<dt><strong>particle_steps</strong><span class="classifier">array, float, (2, particle_count)</span></dt><dd><p>Temporary array for the number of steps of particles.</p>
</dd>
<dt><strong>particle_stream_statuses</strong><span class="classifier">array, float, (2, particle_count)</span></dt><dd><p>Temporary array for the stream status of particles.</p>
</dd>
<dt><strong>min_wm_pve_before_stopping</strong><span class="classifier">int, optional</span></dt><dd><p>Minimum white matter pve (1 - sc.include_map - sc.exclude_map) to
reach before allowing the tractography to stop.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>end</strong><span class="classifier">int</span></dt><dd><p>Length of the tracked streamline</p>
</dd>
<dt><strong>stream_status</strong><span class="classifier">StreamlineStatus</span></dt><dd><p>Ending state of the streamlines as determined by the StoppingCriterion.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="random">
<h3>random<a class="headerlink" href="#random" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.localtrack.random">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.localtrack.</span></span><span class="sig-name descname"><span class="pre">random</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.localtrack.random" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="random-coordinates-from-surface">
<h3>random_coordinates_from_surface<a class="headerlink" href="#random-coordinates-from-surface" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.mesh.random_coordinates_from_surface">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.mesh.</span></span><span class="sig-name descname"><span class="pre">random_coordinates_from_surface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nb_triangles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nb_seed</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triangles_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triangles_weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rand_gen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/mesh.html#random_coordinates_from_surface"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.mesh.random_coordinates_from_surface" title="Link to this definition">#</a></dt>
<dd><p>Generate random triangles_indices and trilinear_coord</p>
<dl class="simple">
<dt>Triangles_indices probability are weighted by triangles_weight,</dt><dd><p>for each triangles inside the given triangles_mask</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>nb_triangles</strong><span class="classifier">int (n)</span></dt><dd><p>The amount of triangles in the mesh</p>
</dd>
<dt><strong>nb_seed</strong><span class="classifier">int</span></dt><dd><p>The number of random indices and coordinates generated.</p>
</dd>
<dt><strong>triangles_mask</strong><span class="classifier">[n] numpy array</span></dt><dd><p>Specifies which triangles should be chosen (or not)</p>
</dd>
<dt><strong>triangles_weight</strong><span class="classifier">[n] numpy array</span></dt><dd><p>Specifies the weight/probability of choosing each triangle</p>
</dd>
<dt><strong>rand_gen</strong><span class="classifier">int</span></dt><dd><p>The seed for the random seed generator (numpy.random.seed).</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>triangles_idx: [s] array</dt><dd><p>Randomly chosen triangles_indices</p>
</dd>
<dt>trilin_coord: [s,3] array</dt><dd><p>Randomly chosen trilinear_coordinates</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#dipy.tracking.mesh.seeds_from_surface_coordinates" title="dipy.tracking.mesh.seeds_from_surface_coordinates"><code class="xref py py-obj docutils literal notranslate"><span class="pre">seeds_from_surface_coordinates</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">random_seeds_from_mask</span></code></dt><dd></dd>
</dl>
</div>
</dd></dl>

</section>
<section id="seeds-from-surface-coordinates">
<h3>seeds_from_surface_coordinates<a class="headerlink" href="#seeds-from-surface-coordinates" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.mesh.seeds_from_surface_coordinates">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.mesh.</span></span><span class="sig-name descname"><span class="pre">seeds_from_surface_coordinates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vts_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triangles_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trilinear_coord</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/mesh.html#seeds_from_surface_coordinates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.mesh.seeds_from_surface_coordinates" title="Link to this definition">#</a></dt>
<dd><p>Compute points from triangles_indices and trilinear_coord</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>triangles</strong><span class="classifier">[n, 3] -&gt; m array</span></dt><dd><p>A list of triangles from a mesh</p>
</dd>
<dt><strong>vts_values</strong><span class="classifier">[m, .] array</span></dt><dd><p>List of values to interpolates from coordinates along vertices,
(vertices, vertices_normal, vertices_colors …)</p>
</dd>
<dt><strong>triangles_idx</strong><span class="classifier">[s] array</span></dt><dd><p>Specifies which triangles should be chosen (or not)</p>
</dd>
<dt><strong>trilinear_coord</strong><span class="classifier">[s, 3] array</span></dt><dd><p>Specifies the weight/probability of choosing each triangle</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>pts</strong><span class="classifier">[s, …] array</span></dt><dd><p>Interpolated values of vertices with triangles_idx and trilinear_coord</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#dipy.tracking.mesh.random_coordinates_from_surface" title="dipy.tracking.mesh.random_coordinates_from_surface"><code class="xref py py-obj docutils literal notranslate"><span class="pre">random_coordinates_from_surface</span></code></a></dt><dd></dd>
</dl>
</div>
</dd></dl>

</section>
<section id="triangles-area">
<h3>triangles_area<a class="headerlink" href="#triangles-area" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.mesh.triangles_area">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.mesh.</span></span><span class="sig-name descname"><span class="pre">triangles_area</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/mesh.html#triangles_area"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.mesh.triangles_area" title="Link to this definition">#</a></dt>
<dd><p>Compute the local area of each triangle</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>triangles</strong><span class="classifier">[n, 3] -&gt; m array</span></dt><dd><p>A list of triangles from a mesh</p>
</dd>
<dt><strong>vts</strong><span class="classifier">[m, .] array</span></dt><dd><p>List of vertices</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>triangles_area</strong><span class="classifier">[m] array</span></dt><dd><p>List of area for each triangle in the mesh</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#dipy.tracking.mesh.random_coordinates_from_surface" title="dipy.tracking.mesh.random_coordinates_from_surface"><code class="xref py py-obj docutils literal notranslate"><span class="pre">random_coordinates_from_surface</span></code></a></dt><dd></dd>
</dl>
</div>
</dd></dl>

</section>
<section id="vertices-to-triangles-values">
<h3>vertices_to_triangles_values<a class="headerlink" href="#vertices-to-triangles-values" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.mesh.vertices_to_triangles_values">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.mesh.</span></span><span class="sig-name descname"><span class="pre">vertices_to_triangles_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vts_values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/mesh.html#vertices_to_triangles_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.mesh.vertices_to_triangles_values" title="Link to this definition">#</a></dt>
<dd><p>Change from values per vertex to values per triangle</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>triangles</strong><span class="classifier">[n, 3] -&gt; m array</span></dt><dd><p>A list of triangles from a mesh</p>
</dd>
<dt><strong>vts_values</strong><span class="classifier">[m, .] array</span></dt><dd><p>List of values to interpolates from coordinates along vertices,
(vertices, vertices_normal, vertices_colors …)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>triangles_values</strong><span class="classifier">[m] array</span></dt><dd><p>List of values for each triangle in the mesh</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#dipy.tracking.mesh.random_coordinates_from_surface" title="dipy.tracking.mesh.random_coordinates_from_surface"><code class="xref py py-obj docutils literal notranslate"><span class="pre">random_coordinates_from_surface</span></code></a></dt><dd></dd>
</dl>
</div>
</dd></dl>

</section>
<section id="winding">
<h3>winding<a class="headerlink" href="#winding" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.winding">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">winding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#winding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.winding" title="Link to this definition">#</a></dt>
<dd><p>Total turning angle projected.</p>
<p>Project space curve to best fitting plane. Calculate the cumulative signed
angle between each line segment and the previous one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array-like shape (N,3)</span></dt><dd><p>Array representing x,y,z of N points in a track.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>a</strong><span class="classifier">scalar</span></dt><dd><p>Total turning angle in degrees.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="length">
<h3>length<a class="headerlink" href="#length" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.length">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">along</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#length"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.length" title="Link to this definition">#</a></dt>
<dd><p>Euclidean length of track line</p>
<p>This will give length in mm if tracks are expressed in world coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a track</p>
</dd>
<dt><strong>along</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, return array giving cumulative length along track,
otherwise (default) return scalar giving total length.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>L</strong><span class="classifier">scalar or array shape (N-1,)</span></dt><dd><p>scalar in case of <cite>along</cite> == False, giving total length, array if
<cite>along</cite> == True, giving cumulative lengths.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">length</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_lens</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">([</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">4</span><span class="o">**</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected_lens</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">len_along</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span> <span class="n">along</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">len_along</span><span class="p">,</span> <span class="n">expected_lens</span><span class="o">.</span><span class="n">cumsum</span><span class="p">())</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">([])</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">([],</span> <span class="n">along</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([0])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="bytes">
<h3>bytes<a class="headerlink" href="#bytes" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.bytes">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#bytes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.bytes" title="Link to this definition">#</a></dt>
<dd><p>Size of track in bytes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array-like shape (N,3)</span></dt><dd><p>Array representing x,y,z of N points in a track.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>b</strong><span class="classifier">int</span></dt><dd><p>Number of bytes.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="midpoint">
<h3>midpoint<a class="headerlink" href="#midpoint" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.midpoint">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">midpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#midpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.midpoint" title="Link to this definition">#</a></dt>
<dd><p>Midpoint of track</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a track</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>mp</strong><span class="classifier">array shape (3,)</span></dt><dd><p>Middle point of line, such that, if L is the line length then
<cite>np</cite> is the point such that the length xyz[0] to <cite>mp</cite> and from
<cite>mp</cite> to xyz[-1] is L/2.  If the middle point is not a point in
<cite>xyz</cite>, then we take the interpolation between the two nearest
<cite>xyz</cite> points.  If <cite>xyz</cite> is empty, return a ValueError</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">midpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">([])</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">   </span><span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">xyz array cannot be empty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="go">array([1, 2, 3])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.5,  2. ,  2.5])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.,  1.,  1.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.5,  0. ,  0. ])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.5,  9. ,  7. ])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="center-of-mass">
<h3>center_of_mass<a class="headerlink" href="#center-of-mass" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.center_of_mass">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">center_of_mass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#center_of_mass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.center_of_mass" title="Link to this definition">#</a></dt>
<dd><p>Center of mass of streamline</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a track</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>com</strong><span class="classifier">array shape (3,)</span></dt><dd><p>center of mass of streamline</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">center_of_mass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">center_of_mass</span><span class="p">([])</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">   </span><span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">xyz array cannot be empty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">center_of_mass</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">array([ 1.,  1.,  1.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">center_of_mass</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.,  1.,  1.])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="magn">
<h3>magn<a class="headerlink" href="#magn" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.magn">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">magn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#magn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.magn" title="Link to this definition">#</a></dt>
<dd><p>magnitude of vector</p>
</dd></dl>

</section>
<section id="frenet-serret">
<h3>frenet_serret<a class="headerlink" href="#frenet-serret" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.frenet_serret">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">frenet_serret</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#frenet_serret"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.frenet_serret" title="Link to this definition">#</a></dt>
<dd><p>Frenet-Serret Space Curve Invariants</p>
<p>Calculates the 3 vector and 2 scalar invariants of a space curve
defined by vectors r = (x,y,z).  If z is omitted (i.e. the array xyz has
shape (N,2)), then the curve is
only 2D (planar), but the equations are still valid.</p>
<p>Similar to
<a class="reference external" href="https://www.mathworks.com/matlabcentral/fileexchange/11169-frenet">https://www.mathworks.com/matlabcentral/fileexchange/11169-frenet</a></p>
<p>In the following equations the prime (<span class="math notranslate nohighlight">\('\)</span>) indicates differentiation
with respect to the parameter <span class="math notranslate nohighlight">\(s\)</span> of a parametrised curve <span class="math notranslate nohighlight">\(\mathbf{r}(s)\)</span>.</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\mathbf{T}=\mathbf{r'}/|\mathbf{r'}|\qquad\)</span> (Tangent vector)}</p></li>
<li><p><span class="math notranslate nohighlight">\(\mathbf{N}=\mathbf{T'}/|\mathbf{T'}|\qquad\)</span> (Normal vector)</p></li>
<li><p><span class="math notranslate nohighlight">\(\mathbf{B}=\mathbf{T}\times\mathbf{N}\qquad\)</span> (Binormal vector)</p></li>
<li><p><span class="math notranslate nohighlight">\(\kappa=|\mathbf{T'}|\qquad\)</span> (Curvature)</p></li>
<li><p><span class="math notranslate nohighlight">\(\mathrm{\tau}=-\mathbf{B'}\cdot\mathbf{N}\)</span> (Torsion)</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a track</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>T</strong><span class="classifier">array shape (N,3)</span></dt><dd><p>array representing the tangent of the curve xyz</p>
</dd>
<dt><strong>N</strong><span class="classifier">array shape (N,3)</span></dt><dd><p>array representing the normal of the curve xyz</p>
</dd>
<dt><strong>B</strong><span class="classifier">array shape (N,3)</span></dt><dd><p>array representing the binormal of the curve xyz</p>
</dd>
<dt><strong>k</strong><span class="classifier">array shape (N,1)</span></dt><dd><p>array representing the curvature of the curve xyz</p>
</dd>
<dt><strong>t</strong><span class="classifier">array shape (N,1)</span></dt><dd><p>array representing the torsion of the curve xyz</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Create a helix and calculate its tangent, normal, binormal, curvature
and torsion</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking</span> <span class="kn">import</span> <span class="n">metrics</span> <span class="k">as</span> <span class="n">tm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="n">theta</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span><span class="p">,</span><span class="n">N</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">tm</span><span class="o">.</span><span class="n">frenet_serret</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="mean-curvature">
<h3>mean_curvature<a class="headerlink" href="#mean-curvature" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.mean_curvature">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">mean_curvature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#mean_curvature"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.mean_curvature" title="Link to this definition">#</a></dt>
<dd><p>Calculates the mean curvature of a curve</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a curve</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>m</strong><span class="classifier">float</span></dt><dd><p>Mean curvature.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Create a straight line and a semi-circle and print their mean curvatures</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking</span> <span class="kn">import</span> <span class="n">metrics</span> <span class="k">as</span> <span class="n">tm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">=</span><span class="n">tm</span><span class="o">.</span><span class="n">mean_curvature</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span> <span class="c1">#mean curvature straight line</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="o">=</span> <span class="n">tm</span><span class="o">.</span><span class="n">mean_curvature</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span> <span class="c1">#mean curvature for semi-circle</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="mean-orientation">
<h3>mean_orientation<a class="headerlink" href="#mean-orientation" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.mean_orientation">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">mean_orientation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#mean_orientation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.mean_orientation" title="Link to this definition">#</a></dt>
<dd><p>Calculates the mean orientation of a curve</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a curve</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>m</strong><span class="classifier">float</span></dt><dd><p>Mean orientation.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="generate-combinations">
<h3>generate_combinations<a class="headerlink" href="#generate-combinations" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.generate_combinations">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">generate_combinations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">items</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#generate_combinations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.generate_combinations" title="Link to this definition">#</a></dt>
<dd><p>Combine sets of size n from items</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>items</strong><span class="classifier">sequence</span></dt><dd></dd>
<dt><strong>n</strong><span class="classifier">int</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>ic</strong><span class="classifier">iterator</span></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">generate_combinations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ic</span><span class="o">=</span><span class="n">generate_combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ic</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="go">[0, 1]</span>
<span class="go">[0, 2]</span>
<span class="go">[1, 2]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="longest-track-bundle">
<h3>longest_track_bundle<a class="headerlink" href="#longest-track-bundle" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.longest_track_bundle">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">longest_track_bundle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bundle</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#longest_track_bundle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.longest_track_bundle" title="Link to this definition">#</a></dt>
<dd><p>Return longest track or length sorted track indices in <cite>bundle</cite></p>
<p>If <cite>sort</cite> == True, return the indices of the sorted tracks in the
bundle, otherwise return the longest track.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>bundle</strong><span class="classifier">sequence</span></dt><dd><p>of tracks as arrays, shape (N1,3) … (Nm,3)</p>
</dd>
<dt><strong>sort</strong><span class="classifier">bool, optional</span></dt><dd><p>If False (default) return longest track.  If True, return length
sorted indices for tracks in bundle</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>longest_or_indices</strong><span class="classifier">array</span></dt><dd><p>longest track - shape (N,3) -  (if <cite>sort</cite> is False), or indices
of length sorted tracks (if <cite>sort</cite> is True)</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">longest_track_bundle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]]),</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">longest_track_bundle</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
<span class="go">array([[0, 0, 0],</span>
<span class="go">       [4, 4, 4]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">longest_track_bundle</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> 
<span class="go">array([0, 1]...)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="intersect-sphere">
<h3>intersect_sphere<a class="headerlink" href="#intersect-sphere" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.intersect_sphere">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">intersect_sphere</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#intersect_sphere"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.intersect_sphere" title="Link to this definition">#</a></dt>
<dd><p>If any segment of the track is intersecting with a sphere of
specific center and radius return True otherwise False</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array, shape (N,3)</span></dt><dd><p>representing x,y,z of the N points of the track</p>
</dd>
<dt><strong>center</strong><span class="classifier">array, shape (3,)</span></dt><dd><p>center of the sphere</p>
</dd>
<dt><strong>radius</strong><span class="classifier">float</span></dt><dd><p>radius of the sphere</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>tf</strong><span class="classifier">{True, False}</span></dt><dd><p>True if track <cite>xyz</cite> intersects sphere</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">intersect_sphere</span>
<span class="go">    ..</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>
<span class="go">    ..</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sph_cent</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="go">    ..</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sph_radius</span> <span class="o">=</span> <span class="mi">1</span>
<span class="go">    ..</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">intersect_sphere</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">sph_cent</span><span class="p">,</span><span class="n">sph_radius</span><span class="p">)</span>
<span class="go">    ..</span>
</pre></div>
</div>
<dl class="simple">
<dt>True</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The ray to sphere intersection method used here is similar with
<a class="reference external" href="https://paulbourke.net/geometry/circlesphere/">https://paulbourke.net/geometry/circlesphere/</a>
<a class="reference external" href="https://paulbourke.net/geometry/circlesphere/source.cpp">https://paulbourke.net/geometry/circlesphere/source.cpp</a>
we just applied it for every segment neglecting the intersections where
the intersecting points are not inside the segment</p>
</dd></dl>

</section>
<section id="inside-sphere">
<h3>inside_sphere<a class="headerlink" href="#inside-sphere" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.inside_sphere">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">inside_sphere</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#inside_sphere"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.inside_sphere" title="Link to this definition">#</a></dt>
<dd><p>If any point of the track is inside a sphere of a specified
center and radius return True otherwise False.  Mathematically this
can be simply described by <span class="math notranslate nohighlight">\(|x-c|\le r\)</span> where <span class="math notranslate nohighlight">\(x\)</span> a point <span class="math notranslate nohighlight">\(c\)</span> the
center of the sphere and <span class="math notranslate nohighlight">\(r\)</span> the radius of the sphere.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array, shape (N,3)</span></dt><dd><p>representing x,y,z of the N points of the track</p>
</dd>
<dt><strong>center</strong><span class="classifier">array, shape (3,)</span></dt><dd><p>center of the sphere</p>
</dd>
<dt><strong>radius</strong><span class="classifier">float</span></dt><dd><p>radius of the sphere</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>tf</strong><span class="classifier">{True,False}</span></dt><dd><p>Whether point is inside sphere.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">inside_sphere</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sph_cent</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sph_radius</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inside_sphere</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">sph_cent</span><span class="p">,</span><span class="n">sph_radius</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="inside-sphere-points">
<h3>inside_sphere_points<a class="headerlink" href="#inside-sphere-points" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.inside_sphere_points">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">inside_sphere_points</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#inside_sphere_points"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.inside_sphere_points" title="Link to this definition">#</a></dt>
<dd><p>If a track intersects with a sphere of a specified center and
radius return the points that are inside the sphere otherwise False.
Mathematically this can be simply described by <span class="math notranslate nohighlight">\(|x-c| \le r\)</span> where <span class="math notranslate nohighlight">\(x\)</span>
a point <span class="math notranslate nohighlight">\(c\)</span> the center of the sphere and <span class="math notranslate nohighlight">\(r\)</span> the radius of the
sphere.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array, shape (N,3)</span></dt><dd><p>representing x,y,z of the N points of the track</p>
</dd>
<dt><strong>center</strong><span class="classifier">array, shape (3,)</span></dt><dd><p>center of the sphere</p>
</dd>
<dt><strong>radius</strong><span class="classifier">float</span></dt><dd><p>radius of the sphere</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>xyzn</strong><span class="classifier">array, shape(M,3)</span></dt><dd><p>array representing x,y,z of the M points inside the sphere</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">inside_sphere_points</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sph_cent</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sph_radius</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inside_sphere_points</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">sph_cent</span><span class="p">,</span><span class="n">sph_radius</span><span class="p">)</span>
<span class="go">array([[1, 1, 1]])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="spline">
<h3>spline<a class="headerlink" href="#spline" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.spline">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">spline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#spline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.spline" title="Link to this definition">#</a></dt>
<dd><p>Generate B-splines as documented in
<a class="reference external" href="https://scipy-cookbook.readthedocs.io/items/Interpolation.html">https://scipy-cookbook.readthedocs.io/items/Interpolation.html</a></p>
<p>The scipy.interpolate packages wraps the netlib FITPACK routines
(Dierckx) for calculating smoothing splines for various kinds of
data and geometries. Although the data is evenly spaced in this
example, it need not be so to use this routine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array, shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in 3d space</p>
</dd>
<dt><strong>s</strong><span class="classifier">float, optional</span></dt><dd><p>A smoothing condition.  The amount of smoothness is determined by
satisfying the conditions: sum((w * (y - g))**2,axis=0) &lt;= s
where g(x) is the smoothed interpolation of (x,y).  The user can
use s to control the tradeoff between closeness and smoothness of
fit.  Larger satisfying the conditions: sum((w * (y -
g))**2,axis=0) &lt;= s where g(x) is the smoothed interpolation of
(x,y).  The user can use s to control the tradeoff between
closeness and smoothness of fit.  Larger s means more smoothing
while smaller values of s indicate less smoothing. Recommended
values of s depend on the weights, w.  If the weights represent
the inverse of the standard-deviation of y, then a: good s value
should be found in the range (m-sqrt(2*m),m+sqrt(2*m)) where m is
the number of datapoints in x, y, and w.</p>
</dd>
<dt><strong>k</strong><span class="classifier">int, optional</span></dt><dd><p>Degree of the spline.  Cubic splines are recommended.  Even
values of k should be avoided especially with a small s-value.
for the same set of data.  If task=-1 find the weighted least
square spline for a given set of knots, t.</p>
</dd>
<dt><strong>nest</strong><span class="classifier">None or int, optional</span></dt><dd><p>An over-estimate of the total number of knots of the spline to
help in determining the storage space.  None results in value
m+2*k. -1 results in m+k+1. Always large enough is nest=m+k+1.
Default is -1.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>xyzn</strong><span class="classifier">array, shape (M,3)</span></dt><dd><p>array representing x,y,z of the M points inside the sphere</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">scipy.interpolate.splprep</span></code></dt><dd></dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">scipy.interpolate.splev</span></code></dt><dd></dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.75</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="c1"># make ascending spiral in 3-space</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">t</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="c1"># add noise</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">z</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyzn</span><span class="o">=</span><span class="n">spline</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">nest</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">xyzn</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="startpoint">
<h3>startpoint<a class="headerlink" href="#startpoint" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.startpoint">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">startpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#startpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.startpoint" title="Link to this definition">#</a></dt>
<dd><p>First point of the track</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array, shape(N,3)</span></dt><dd><p>Track.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>sp</strong><span class="classifier">array, shape(3,)</span></dt><dd><p>First track point.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">startpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sp</span><span class="o">=</span><span class="n">startpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sp</span><span class="o">.</span><span class="n">any</span><span class="p">()</span><span class="o">==</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="endpoint">
<h3>endpoint<a class="headerlink" href="#endpoint" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.endpoint">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">endpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#endpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.endpoint" title="Link to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array, shape(N,3)</span></dt><dd><p>Track.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>ep</strong><span class="classifier">array, shape(3,)</span></dt><dd><p>First track point.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">endpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ep</span><span class="o">=</span><span class="n">endpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ep</span><span class="o">.</span><span class="n">any</span><span class="p">()</span><span class="o">==</span><span class="n">xyz</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="arbitrarypoint">
<h3>arbitrarypoint<a class="headerlink" href="#arbitrarypoint" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.arbitrarypoint">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">arbitrarypoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#arbitrarypoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.arbitrarypoint" title="Link to this definition">#</a></dt>
<dd><p>Select an arbitrary point along distance on the track (curve)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a track</p>
</dd>
<dt><strong>distance</strong><span class="classifier">float</span></dt><dd><p>float representing distance travelled from the xyz[0] point of
the curve along the curve.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>ap</strong><span class="classifier">array shape (3,)</span></dt><dd><p>Arbitrary point of line, such that, if the arbitrary point is not
a point in <cite>xyz</cite>, then we take the interpolation between the two
nearest <cite>xyz</cite> points.  If <cite>xyz</cite> is empty, return a ValueError</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">arbitrarypoint</span><span class="p">,</span> <span class="n">length</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ap</span><span class="o">=</span><span class="n">arbitrarypoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span><span class="n">length</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="principal-components">
<h3>principal_components<a class="headerlink" href="#principal-components" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.principal_components">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">principal_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#principal_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.principal_components" title="Link to this definition">#</a></dt>
<dd><p>We use PCA to calculate the 3 principal directions for a track</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a track</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>va</strong><span class="classifier">array_like</span></dt><dd><p>eigenvalues</p>
</dd>
<dt><strong>ve</strong><span class="classifier">array_like</span></dt><dd><p>eigenvectors</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">principal_components</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">va</span><span class="p">,</span> <span class="n">ve</span> <span class="o">=</span> <span class="n">principal_components</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">va</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.51010101</span><span class="p">,</span> <span class="mf">0.09883545</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="midpoint2point">
<h3>midpoint2point<a class="headerlink" href="#midpoint2point" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.metrics.midpoint2point">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.metrics.</span></span><span class="sig-name descname"><span class="pre">midpoint2point</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/metrics.html#midpoint2point"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.metrics.midpoint2point" title="Link to this definition">#</a></dt>
<dd><p>Calculate distance from midpoint of a curve to arbitrary point p</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>xyz</strong><span class="classifier">array-like shape (N,3)</span></dt><dd><p>array representing x,y,z of N points in a track</p>
</dd>
<dt><strong>p</strong><span class="classifier">array shape (3,)</span></dt><dd><p>array representing an arbitrary point with x,y,z coordinates in
space.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>d</strong><span class="classifier">float</span></dt><dd><p>a float number representing Euclidean distance</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="kn">import</span> <span class="n">midpoint2point</span><span class="p">,</span> <span class="n">midpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dist</span><span class="o">=</span><span class="n">midpoint2point</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="eudx-both-directions">
<h3>eudx_both_directions<a class="headerlink" href="#eudx-both-directions" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.propspeed.eudx_both_directions">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.propspeed.</span></span><span class="sig-name descname"><span class="pre">eudx_both_directions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qa</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odf_vertices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qa_thr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ang_thr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_sz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_weight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_points</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.propspeed.eudx_both_directions" title="Link to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>seed</strong><span class="classifier">array, float64 shape (3,)</span></dt><dd><p>Point where the tracking starts.</p>
</dd>
<dt><strong>ref</strong><span class="classifier">cnp.npy_intp int</span></dt><dd><p>Index of peak to follow first.</p>
</dd>
<dt><strong>qa</strong><span class="classifier">array, float64 shape (X, Y, Z, Np)</span></dt><dd><p>Anisotropy matrix, where <code class="docutils literal notranslate"><span class="pre">Np</span></code> is the number of maximum allowed peaks.</p>
</dd>
<dt><strong>ind</strong><span class="classifier">array, float64 shape(x, y, z, Np)</span></dt><dd><p>Index of the track orientation.</p>
</dd>
<dt><strong>odf_vertices</strong><span class="classifier">double array shape (N, 3)</span></dt><dd><p>Sampling directions on the sphere.</p>
</dd>
<dt><strong>qa_thr</strong><span class="classifier">float</span></dt><dd><p>Threshold for QA, we want everything higher than this threshold.</p>
</dd>
<dt><strong>ang_thr</strong><span class="classifier">float</span></dt><dd><p>Angle threshold, we only select fiber orientation within this range.</p>
</dd>
<dt><strong>step_sz</strong><span class="classifier">double</span></dt><dd></dd>
<dt><strong>total_weight</strong><span class="classifier">double</span></dt><dd></dd>
<dt><strong>max_points</strong><span class="classifier">cnp.npy_intp</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>track</strong><span class="classifier">array, shape (N,3)</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="ndarray-offset">
<h3>ndarray_offset<a class="headerlink" href="#ndarray-offset" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.propspeed.ndarray_offset">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.propspeed.</span></span><span class="sig-name descname"><span class="pre">ndarray_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strides</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lenind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">typesize</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.propspeed.ndarray_offset" title="Link to this definition">#</a></dt>
<dd><p>Find offset in an N-dimensional ndarray using strides</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>indices</strong><span class="classifier">array, npy_intp shape (N,)</span></dt><dd><p>Indices of the array which we want to find the offset.</p>
</dd>
<dt><strong>strides</strong><span class="classifier">array, shape (N,)</span></dt><dd><p>Strides of array.</p>
</dd>
<dt><strong>lenind</strong><span class="classifier">int</span></dt><dd><p>len of the <cite>indices</cite> array.</p>
</dd>
<dt><strong>typesize</strong><span class="classifier">int</span></dt><dd><p>Number of bytes for data type e.g. if 8 for double, 4 for int32</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>offset</strong><span class="classifier">integer</span></dt><dd><p>Index position in flattened array</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.propspeed</span> <span class="kn">import</span> <span class="n">ndarray_offset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">I</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">strides</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndarray_offset</span><span class="p">(</span><span class="n">I</span><span class="p">,</span><span class="n">S</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">A</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">itemsize</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="o">.</span><span class="n">ravel</span><span class="p">()[</span><span class="mi">4</span><span class="p">]</span><span class="o">==</span><span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="actstoppingcriterion">
<h3><a class="reference internal" href="#dipy.tracking.stopping_criterion.ActStoppingCriterion" title="dipy.tracking.stopping_criterion.ActStoppingCriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">ActStoppingCriterion</span></code></a><a class="headerlink" href="#actstoppingcriterion" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.ActStoppingCriterion">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.stopping_criterion.</span></span><span class="sig-name descname"><span class="pre">ActStoppingCriterion</span></span><a class="headerlink" href="#dipy.tracking.stopping_criterion.ActStoppingCriterion" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion" title="dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnatomicalStoppingCriterion</span></code></a></p>
<p>Anatomically-Constrained Tractography (ACT) stopping criterion.</p>
<p>See <a class="footnote-reference brackets" href="#footcite-smith2012" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> for further details about the method.</p>
<p>This implements the use of partial volume fraction (PVE) maps to
determine when the tracking stops. The proposed method
<a class="footnote-reference brackets" href="#footcite-smith2012" id="id12" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> that cuts streamlines going through subcortical gray
matter regions is not implemented here. The backtracking technique for
streamlines reaching INVALIDPOINT is not implemented either.</p>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_pve</span></code>(wm_map, gm_map, csf_map, **kw)</p></td>
<td><p>AnatomicalStoppingCriterion from partial volume fraction (PVE) maps.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>check_point</strong></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>get_exclude</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>get_include</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p class="rubric">References</p>
<div class="docutils container" id="id13">
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footcite-smith2012" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id11">1</a>,<a role="doc-backlink" href="#id12">2</a>)</span>
<p>Robert E. Smith, Jacques-Donald Tournier, Fernando Calamante, and Alan Connelly. Anatomically-constrained tractography: Improved diffusion MRI streamlines tractography through effective use of anatomical information. <em>NeuroImage</em>, 62(3):1924–1938, September 2012. URL: <a class="reference external" href="https://doi.org/10.1016/j.neuroimage.2012.06.005">https://doi.org/10.1016/j.neuroimage.2012.06.005</a>, <a class="reference external" href="https://doi.org/10.1016/j.neuroimage.2012.06.005">doi:10.1016/j.neuroimage.2012.06.005</a>.</p>
</aside>
</aside>
</div>
</dd></dl>

</section>
<section id="anatomicalstoppingcriterion">
<h3><a class="reference internal" href="#dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion" title="dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnatomicalStoppingCriterion</span></code></a><a class="headerlink" href="#anatomicalstoppingcriterion" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.stopping_criterion.</span></span><span class="sig-name descname"><span class="pre">AnatomicalStoppingCriterion</span></span><a class="headerlink" href="#dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.tracking.stopping_criterion.StoppingCriterion" title="dipy.tracking.stopping_criterion.StoppingCriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoppingCriterion</span></code></a></p>
<p>Abstract class that takes as input included and excluded tissue maps.
The ‘include_map’ defines when the streamline reached a ‘valid’ stopping
region (e.g. gray matter partial volume estimation (PVE) map) and the
‘exclude_map’ defines when the streamline reached an ‘invalid’ stopping
region (e.g. corticospinal fluid PVE map). The background of the anatomical
image should be added to the ‘include_map’ to keep streamlines exiting the
brain (e.g. through the brain stem).</p>
<dl class="simple">
<dt>cdef:</dt><dd><p>double interp_out_double[1]
double[:]  interp_out_view = interp_out_view
double[:, :, :] include_map, exclude_map</p>
</dd>
</dl>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion.from_pve" title="dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion.from_pve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_pve</span></code></a>(wm_map, gm_map, csf_map, **kw)</p></td>
<td><p>AnatomicalStoppingCriterion from partial volume fraction (PVE) maps.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>check_point</strong></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>get_exclude</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>get_include</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion.from_pve">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_pve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wm_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gm_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">csf_map</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion.from_pve" title="Link to this definition">#</a></dt>
<dd><p>AnatomicalStoppingCriterion from partial volume fraction (PVE) maps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>wm_map</strong><span class="classifier">array</span></dt><dd><p>The partial volume fraction of white matter at each voxel.</p>
</dd>
<dt><strong>gm_map</strong><span class="classifier">array</span></dt><dd><p>The partial volume fraction of gray matter at each voxel.</p>
</dd>
<dt><strong>csf_map</strong><span class="classifier">array</span></dt><dd><p>The partial volume fraction of corticospinal fluid at each
voxel.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion.get_exclude">
<span class="sig-name descname"><span class="pre">get_exclude</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">point</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion.get_exclude" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion.get_include">
<span class="sig-name descname"><span class="pre">get_include</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">point</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion.get_include" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="binarystoppingcriterion">
<h3><a class="reference internal" href="#dipy.tracking.stopping_criterion.BinaryStoppingCriterion" title="dipy.tracking.stopping_criterion.BinaryStoppingCriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinaryStoppingCriterion</span></code></a><a class="headerlink" href="#binarystoppingcriterion" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.BinaryStoppingCriterion">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.stopping_criterion.</span></span><span class="sig-name descname"><span class="pre">BinaryStoppingCriterion</span></span><a class="headerlink" href="#dipy.tracking.stopping_criterion.BinaryStoppingCriterion" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.tracking.stopping_criterion.StoppingCriterion" title="dipy.tracking.stopping_criterion.StoppingCriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoppingCriterion</span></code></a></p>
<dl class="simple">
<dt>cdef:</dt><dd><p>unsigned char[:, :, :] mask</p>
</dd>
</dl>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>check_point</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</dd></dl>

</section>
<section id="cmcstoppingcriterion">
<h3><a class="reference internal" href="#dipy.tracking.stopping_criterion.CmcStoppingCriterion" title="dipy.tracking.stopping_criterion.CmcStoppingCriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CmcStoppingCriterion</span></code></a><a class="headerlink" href="#cmcstoppingcriterion" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.CmcStoppingCriterion">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.stopping_criterion.</span></span><span class="sig-name descname"><span class="pre">CmcStoppingCriterion</span></span><a class="headerlink" href="#dipy.tracking.stopping_criterion.CmcStoppingCriterion" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion" title="dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnatomicalStoppingCriterion</span></code></a></p>
<p>Continuous map criterion (CMC) stopping criterion.</p>
<p>This implements the use of partial volume fraction (PVE) maps to
determine when the tracking stops <a class="footnote-reference brackets" href="#footcite-girard2014" id="id14" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>.</p>
<dl class="simple">
<dt>cdef:</dt><dd><p>double interp_out_double[1]
double[:]  interp_out_view = interp_out_view
double[:, :, :] include_map, exclude_map
double step_size
double average_voxel_size
double correction_factor</p>
</dd>
</dl>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_pve</span></code>(wm_map, gm_map, csf_map, **kw)</p></td>
<td><p>AnatomicalStoppingCriterion from partial volume fraction (PVE) maps.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>check_point</strong></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>get_exclude</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>get_include</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p class="rubric">References</p>
<div class="docutils container" id="id15">
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footcite-girard2014" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id14">3</a><span class="fn-bracket">]</span></span>
<p>Gabriel Girard, Kevin Whittingstall, Rachid Deriche, and Maxime Descoteaux. Towards quantitative connectivity analysis: reducing tractography biases. <em>NeuroImage</em>, 98:266–278, September 2014. URL: <a class="reference external" href="https://doi.org/10.1016/j.neuroimage.2014.04.074">https://doi.org/10.1016/j.neuroimage.2014.04.074</a>, <a class="reference external" href="https://doi.org/10.1016/j.neuroimage.2014.04.074">doi:10.1016/j.neuroimage.2014.04.074</a>.</p>
</aside>
</aside>
</div>
</dd></dl>

</section>
<section id="stoppingcriterion">
<h3><a class="reference internal" href="#dipy.tracking.stopping_criterion.StoppingCriterion" title="dipy.tracking.stopping_criterion.StoppingCriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoppingCriterion</span></code></a><a class="headerlink" href="#stoppingcriterion" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.StoppingCriterion">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.stopping_criterion.</span></span><span class="sig-name descname"><span class="pre">StoppingCriterion</span></span><a class="headerlink" href="#dipy.tracking.stopping_criterion.StoppingCriterion" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>check_point</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.StoppingCriterion.check_point">
<span class="sig-name descname"><span class="pre">check_point</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">point</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.stopping_criterion.StoppingCriterion.check_point" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="streamlinestatus">
<h3><a class="reference internal" href="#dipy.tracking.stopping_criterion.StreamlineStatus" title="dipy.tracking.stopping_criterion.StreamlineStatus"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamlineStatus</span></code></a><a class="headerlink" href="#streamlinestatus" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.StreamlineStatus">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.stopping_criterion.</span></span><span class="sig-name descname"><span class="pre">StreamlineStatus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names=&lt;not</span> <span class="pre">given&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qualname=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.stopping_criterion.StreamlineStatus" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.IntFlag" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntFlag</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">denominator</span></code></dt><dd><p>the denominator of a rational number in lowest terms</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">imag</span></code></dt><dd><p>the imaginary part of a complex number</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">numerator</span></code></dt><dd><p>the numerator of a rational number in lowest terms</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">real</span></code></dt><dd><p>the real part of a complex number</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">as_integer_ratio</span></code>(/)</p></td>
<td><p>Return a pair of integers, whose ratio is equal to the original int.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">bit_count</span></code>(/)</p></td>
<td><p>Number of ones in the binary representation of the absolute value of self.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">bit_length</span></code>(/)</p></td>
<td><p>Number of bits necessary to represent self in binary.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">conjugate</span></code></p></td>
<td><p>Returns self, the complex conjugate of any int.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_bytes</span></code>(/, bytes[, byteorder, signed])</p></td>
<td><p>Return the integer represented by the given array of bytes.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_integer</span></code>(/)</p></td>
<td><p>Returns True.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_bytes</span></code>(/[, length, byteorder, signed])</p></td>
<td><p>Return an array of bytes representing an integer.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.StreamlineStatus.ENDPOINT">
<span class="sig-name descname"><span class="pre">ENDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#dipy.tracking.stopping_criterion.StreamlineStatus.ENDPOINT" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.StreamlineStatus.INVALIDPOINT">
<span class="sig-name descname"><span class="pre">INVALIDPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#dipy.tracking.stopping_criterion.StreamlineStatus.INVALIDPOINT" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.StreamlineStatus.OUTSIDEIMAGE">
<span class="sig-name descname"><span class="pre">OUTSIDEIMAGE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-1</span></em><a class="headerlink" href="#dipy.tracking.stopping_criterion.StreamlineStatus.OUTSIDEIMAGE" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.StreamlineStatus.PYERROR">
<span class="sig-name descname"><span class="pre">PYERROR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-2</span></em><a class="headerlink" href="#dipy.tracking.stopping_criterion.StreamlineStatus.PYERROR" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.StreamlineStatus.TRACKPOINT">
<span class="sig-name descname"><span class="pre">TRACKPOINT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#dipy.tracking.stopping_criterion.StreamlineStatus.TRACKPOINT" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="thresholdstoppingcriterion">
<h3><a class="reference internal" href="#dipy.tracking.stopping_criterion.ThresholdStoppingCriterion" title="dipy.tracking.stopping_criterion.ThresholdStoppingCriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThresholdStoppingCriterion</span></code></a><a class="headerlink" href="#thresholdstoppingcriterion" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dipy.tracking.stopping_criterion.ThresholdStoppingCriterion">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dipy.tracking.stopping_criterion.</span></span><span class="sig-name descname"><span class="pre">ThresholdStoppingCriterion</span></span><a class="headerlink" href="#dipy.tracking.stopping_criterion.ThresholdStoppingCriterion" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.tracking.stopping_criterion.StoppingCriterion" title="dipy.tracking.stopping_criterion.StoppingCriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoppingCriterion</span></code></a></p>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>check_point</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</dd></dl>

</section>
<section id="unlist-streamlines">
<h3>unlist_streamlines<a class="headerlink" href="#unlist-streamlines" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.unlist_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">unlist_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/streamline.html#unlist_streamlines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.streamline.unlist_streamlines" title="Link to this definition">#</a></dt>
<dd><p>Return the streamlines not as a list but as an array and an offset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines: sequence</strong></dt><dd><p>Streamlines.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>points</strong><span class="classifier">array</span></dt><dd><p>Streamlines’ points.</p>
</dd>
<dt><strong>offsets</strong><span class="classifier">array</span></dt><dd><p>Streamlines’ offsets.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="relist-streamlines">
<h3>relist_streamlines<a class="headerlink" href="#relist-streamlines" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.relist_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">relist_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offsets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/streamline.html#relist_streamlines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.streamline.relist_streamlines" title="Link to this definition">#</a></dt>
<dd><p>Given a representation of a set of streamlines as a large array and
an offsets array return the streamlines as a list of shorter arrays.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>points</strong><span class="classifier">array</span></dt><dd><p>Streamlines’ points.</p>
</dd>
<dt><strong>offsets</strong><span class="classifier">array</span></dt><dd><p>Streamlines’ offsets.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>streamlines: sequence</dt><dd><p>Streamlines.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="center-streamlines">
<h3>center_streamlines<a class="headerlink" href="#center-streamlines" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.center_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">center_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/streamline.html#center_streamlines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.streamline.center_streamlines" title="Link to this definition">#</a></dt>
<dd><p>Move streamlines to the origin</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">list</span></dt><dd><p>List of 2D ndarrays of shape[-1]==3</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>new_streamlines</strong><span class="classifier">list</span></dt><dd><p>List of 2D ndarrays of shape[-1]==3</p>
</dd>
<dt><strong>inv_shift</strong><span class="classifier">ndarray</span></dt><dd><p>Translation in x,y,z to go back in the initial position</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="deform-streamlines">
<h3>deform_streamlines<a class="headerlink" href="#deform-streamlines" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.deform_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">deform_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deform_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_to_current_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_grid_to_world</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_to_ref_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_grid_to_world</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/streamline.html#deform_streamlines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.streamline.deform_streamlines" title="Link to this definition">#</a></dt>
<dd><p>Apply deformation field to streamlines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">list</span></dt><dd><p>List of 2D ndarrays of shape[-1]==3</p>
</dd>
<dt><strong>deform_field</strong><span class="classifier">4D numpy array</span></dt><dd><p>x,y,z displacements stored in volume, shape[-1]==3</p>
</dd>
<dt><strong>stream_to_current_grid</strong><span class="classifier">array, (4, 4)</span></dt><dd><p>transform matrix voxmm space to original grid space</p>
</dd>
<dt><strong>current_grid_to_world</strong><span class="classifier">array (4, 4)</span></dt><dd><p>transform matrix original grid space to world coordinates</p>
</dd>
<dt><strong>stream_to_ref_grid</strong><span class="classifier">array (4, 4)</span></dt><dd><p>transform matrix voxmm space to new grid space</p>
</dd>
<dt><strong>ref_grid_to_world</strong><span class="classifier">array(4, 4)</span></dt><dd><p>transform matrix new grid space to world coordinates</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>new_streamlines</strong><span class="classifier">list</span></dt><dd><p>List of the transformed 2D ndarrays of shape[-1]==3</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="transform-streamlines">
<h3>transform_streamlines<a class="headerlink" href="#transform-streamlines" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.transform_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">transform_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mat</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_place</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/streamline.html#transform_streamlines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.streamline.transform_streamlines" title="Link to this definition">#</a></dt>
<dd><p>Apply affine transformation to streamlines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">Streamlines</span></dt><dd><p>Streamlines object</p>
</dd>
<dt><strong>mat</strong><span class="classifier">array, (4, 4)</span></dt><dd><p>transformation matrix</p>
</dd>
<dt><strong>in_place</strong><span class="classifier">bool</span></dt><dd><p>If True then change data in place.
Be careful changes input streamlines.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>new_streamlines</strong><span class="classifier">Streamlines</span></dt><dd><p>Sequence transformed 2D ndarrays of shape[-1]==3</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="select-random-set-of-streamlines">
<h3>select_random_set_of_streamlines<a class="headerlink" href="#select-random-set-of-streamlines" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.select_random_set_of_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">select_random_set_of_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/streamline.html#select_random_set_of_streamlines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.streamline.select_random_set_of_streamlines" title="Link to this definition">#</a></dt>
<dd><p>Select a random set of streamlines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">Streamlines</span></dt><dd><p>Object of 2D ndarrays of shape[-1]==3</p>
</dd>
<dt><strong>select</strong><span class="classifier">int</span></dt><dd><p>Number of streamlines to select. If there are less streamlines
than <code class="docutils literal notranslate"><span class="pre">select</span></code> then <code class="docutils literal notranslate"><span class="pre">select=len(streamlines)</span></code>.</p>
</dd>
<dt><strong>rng</strong><span class="classifier">RandomState</span></dt><dd><p>Default None.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>selected_streamlines</strong><span class="classifier">list</span></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The same streamline will not be selected twice.</p>
</dd></dl>

</section>
<section id="select-by-rois">
<h3>select_by_rois<a class="headerlink" href="#select-by-rois" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.select_by_rois">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">select_by_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rois</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/streamline.html#select_by_rois"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.streamline.select_by_rois" title="Link to this definition">#</a></dt>
<dd><p>Select streamlines based on logical relations with several regions of
interest (ROIs). For example, select streamlines that pass near ROI1,
but only if they do not pass near ROI2.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>streamlines</strong><span class="classifier">list</span></dt><dd><p>A list of candidate streamlines for selection</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt><strong>rois</strong><span class="classifier">list or ndarray</span></dt><dd><p>A list of 3D arrays, each with shape (x, y, z) corresponding to the
shape of the brain volume, or a 4D array with shape (n_rois, x, y,
z). Non-zeros in each volume are considered to be within the region</p>
</dd>
<dt><strong>include</strong><span class="classifier">array or list</span></dt><dd><p>A list or 1D array of boolean values marking inclusion or exclusion
criteria. If a streamline is near any of the inclusion ROIs, it
should evaluate to True, unless it is also near any of the exclusion
ROIs.</p>
</dd>
<dt><strong>mode</strong><span class="classifier">string, optional</span></dt><dd><p>One of {“any”, “all”, “either_end”, “both_end”}, where a streamline is
associated with an ROI if:</p>
<p>“any” : any point is within tol from ROI. Default.</p>
<p>“all” : all points are within tol from ROI.</p>
<p>“either_end” : either of the end-points is within tol from ROI</p>
<p>“both_end” : both end points are within tol from ROI.</p>
</dd>
<dt><strong>tol</strong><span class="classifier">float</span></dt><dd><p>Distance (in the units of the streamlines, usually mm). If any
coordinate in the streamline is within this distance from the center
of any voxel in the ROI, the filtering criterion is set to True for
this streamline, otherwise False. Defaults to the distance between
the center of each voxel and the corner of the voxel.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>generator</dt><dd><p>Generates the streamlines to be included based on these criteria.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#dipy.tracking.utils.near_roi" title="dipy.tracking.utils.near_roi"><code class="xref py py-func docutils literal notranslate"><span class="pre">dipy.tracking.utils.near_roi()</span></code></a></dt><dd></dd>
<dt><a class="reference internal" href="#dipy.tracking.utils.reduce_rois" title="dipy.tracking.utils.reduce_rois"><code class="xref py py-func docutils literal notranslate"><span class="pre">dipy.tracking.utils.reduce_rois()</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>The only operation currently possible is “(A or B or …) and not (X or Y
or …)”, where A, B are inclusion regions and X, Y are exclusion regions.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mf">1.9</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]]),</span>
<span class="gp">... </span>               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">]]),</span>
<span class="gp">... </span>               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">mask1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask1</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask2</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">selection</span> <span class="o">=</span> <span class="n">select_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="p">[</span><span class="n">mask1</span><span class="p">,</span> <span class="n">mask2</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">tol</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span> <span class="c1"># The result is a generator</span>
<span class="go">[array([[ 0. ,  0. ,  0.9],</span>
<span class="go">       [ 1.9,  0. ,  0. ]]), array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.],</span>
<span class="go">       [ 0.,  2.,  2.]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">selection</span> <span class="o">=</span> <span class="n">select_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="p">[</span><span class="n">mask1</span><span class="p">,</span> <span class="n">mask2</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">tol</span><span class="o">=</span><span class="mf">0.87</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>
<span class="go">[array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.],</span>
<span class="go">       [ 0.,  2.,  2.]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">selection</span> <span class="o">=</span> <span class="n">select_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="p">[</span><span class="n">mask1</span><span class="p">,</span> <span class="n">mask2</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;both_end&quot;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">tol</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>
<span class="go">[array([[ 0. ,  0. ,  0.9],</span>
<span class="go">       [ 1.9,  0. ,  0. ]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask2</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">selection</span> <span class="o">=</span> <span class="n">select_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="p">[</span><span class="n">mask1</span><span class="p">,</span> <span class="n">mask2</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;both_end&quot;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">tol</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>
<span class="go">[array([[ 0. ,  0. ,  0.9],</span>
<span class="go">       [ 1.9,  0. ,  0. ]]), array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.],</span>
<span class="go">       [ 0.,  2.,  2.]])]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="cluster-confidence">
<h3>cluster_confidence<a class="headerlink" href="#cluster-confidence" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.cluster_confidence">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">cluster_confidence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_mdf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">power</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/streamline.html#cluster_confidence"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.streamline.cluster_confidence" title="Link to this definition">#</a></dt>
<dd><p>Computes the cluster confidence index (cci), which is an
estimation of the support a set of streamlines gives to
a particular pathway.</p>
<p>Ex: A single streamline with no others in the dataset
following a similar pathway has a low cci. A streamline
in a bundle of 100 streamlines that follow similar
pathways has a high cci.</p>
<p>See <a class="footnote-reference brackets" href="#footcite-jordan2018" id="id16" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a> (based on the streamline MDF distance from
Garyfallidis <em>et al.</em><a class="footnote-reference brackets" href="#footcite-garyfallidis2012a" id="id17" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">list of 2D (N, 3) arrays</span></dt><dd><p>A sequence of streamlines of length N (# streamlines)</p>
</dd>
<dt><strong>max_mdf</strong><span class="classifier">int</span></dt><dd><p>The maximum MDF distance (mm) that will be considered a
“supporting” streamline and included in cci calculation</p>
</dd>
<dt><strong>subsample: int</strong></dt><dd><p>The number of points that are considered for each streamline
in the calculation. To save on calculation time, each
streamline is subsampled to subsampleN points.</p>
</dd>
<dt><strong>power: int</strong></dt><dd><p>The power to which the MDF distance for each streamline
will be raised to determine how much it contributes to
the cci. High values of power make the contribution value
degrade much faster. E.g., a streamline with 5mm MDF
similarity contributes 1/5 to the cci if power is 1, but
only contributes 1/5^2 = 1/25 if power is 2.</p>
</dd>
<dt><strong>override: bool, False by default</strong></dt><dd><p>override means that the cci calculation will still occur even
though there are short streamlines in the dataset that may alter
expected behaviour.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>Returns an array of CCI scores</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">References</p>
<div class="docutils container" id="id18">
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footcite-jordan2018" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id16">4</a><span class="fn-bracket">]</span></span>
<p>Kesshi M. Jordan, Bagrat Amirbekian, Anisha Keshavan, and Roland G. Henry. Cluster Confidence Index: A Streamline-Wise Pathway Reproducibility Metric for Diffusion-Weighted MRI Tractography. <em>Journal of Neuroimaging</em>, 28(1):64–69, 2018. URL: <a class="reference external" href="https://doi.org/10.1111/jon.12467">https://doi.org/10.1111/jon.12467</a>, <a class="reference external" href="https://doi.org/10.1111/jon.12467">doi:10.1111/jon.12467</a>.</p>
</aside>
<aside class="footnote brackets" id="footcite-garyfallidis2012a" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id17">5</a><span class="fn-bracket">]</span></span>
<p>Eleftherios Garyfallidis, Matthew Brett, Marta M. Correia, Guy B. Williams, and Ian Nimmo-Smith. QuickBundles, a Method for Tractography Simplification. <em>Frontiers in Neuroscience</em>, 6():175, December 2012. URL: <a class="reference external" href="https://doi.org/10.3389/fnins.2012.00175">https://doi.org/10.3389/fnins.2012.00175</a>, <a class="reference external" href="https://doi.org/10.3389/fnins.2012.00175">doi:10.3389/fnins.2012.00175</a>.</p>
</aside>
</aside>
</div>
</dd></dl>

</section>
<section id="orient-by-rois">
<h3>orient_by_rois<a class="headerlink" href="#orient-by-rois" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.orient_by_rois">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">orient_by_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_place</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_generator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/streamline.html#orient_by_rois"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.streamline.orient_by_rois" title="Link to this definition">#</a></dt>
<dd><p>Orient a set of streamlines according to a pair of ROIs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">list or generator</span></dt><dd><p>List or generator of 2d arrays of 3d coordinates. Each array contains
the xyz coordinates of a single streamline.</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt><strong>roi1, roi2</strong><span class="classifier">ndarray</span></dt><dd><p>Binary masks designating the location of the regions of interest, or
coordinate arrays (n-by-3 array with ROI coordinate in each row).</p>
</dd>
<dt><strong>in_place</strong><span class="classifier">bool</span></dt><dd><p>Whether to make the change in-place in the original list
(and return a reference to the list), or to make a copy of the list
and return this copy, with the relevant streamlines reoriented.</p>
</dd>
<dt><strong>as_generator</strong><span class="classifier">bool</span></dt><dd><p>Whether to return a generator as output.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">list or generator</span></dt><dd><p>The same 3D arrays as a list or generator, but reoriented with respect
to the ROIs</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]]),</span>
<span class="gp">... </span>               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">roi1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi1</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi2</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orient_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">roi1</span><span class="p">,</span> <span class="n">roi2</span><span class="p">)</span>
<span class="go">[array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 1.,  0.,  0.],</span>
<span class="go">       [ 2.,  0.,  0.]]), array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 1.,  0.,  0.],</span>
<span class="go">       [ 2.,  0.,  0.]])]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="orient-by-streamline">
<h3>orient_by_streamline<a class="headerlink" href="#orient-by-streamline" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.orient_by_streamline">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">orient_by_streamline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">standard</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_place</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_generator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/streamline.html#orient_by_streamline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.streamline.orient_by_streamline" title="Link to this definition">#</a></dt>
<dd><p>Orient a bundle of streamlines to a standard streamline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">Streamlines, list</span></dt><dd><p>The input streamlines to orient.</p>
</dd>
<dt><strong>standard</strong><span class="classifier">Streamlines, list, or ndarrray</span></dt><dd><p>This provides the standard orientation according to which the
streamlines in the provided bundle should be reoriented.</p>
</dd>
<dt><strong>n_points: int, optional</strong></dt><dd><p>The number of samples to apply to each of the streamlines.</p>
</dd>
<dt><strong>in_place</strong><span class="classifier">bool</span></dt><dd><p>Whether to make the change in-place in the original input
(and return a reference), or to make a copy of the list
and return this copy, with the relevant streamlines reoriented.</p>
</dd>
<dt><strong>as_generator</strong><span class="classifier">bool</span></dt><dd><p>Whether to return a generator as output.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>Streamlines</strong><span class="classifier">with each individual array oriented to be as similar as</span></dt><dd><p>possible to the standard.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="values-from-volume">
<h3>values_from_volume<a class="headerlink" href="#values-from-volume" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.values_from_volume">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">values_from_volume</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/streamline.html#values_from_volume"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.streamline.values_from_volume" title="Link to this definition">#</a></dt>
<dd><p>Extract values of a scalar/vector along each streamline from a volume.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">3D or 4D array</span></dt><dd><p>Scalar (for 3D) and vector (for 4D) values to be extracted. For 4D
data, interpolation will be done on the 3 spatial dimensions in each
volume.</p>
</dd>
<dt><strong>streamlines</strong><span class="classifier">ndarray or list</span></dt><dd><p>If array, of shape (n_streamlines, n_nodes, 3)
If list, len(n_streamlines) with (n_nodes, 3) array in
each element of the list.</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>array or list (depending on the input)</strong><span class="classifier">values interpolate to each</span></dt><dd><p>coordinate along the length of each streamline.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Values are extracted from the image based on the 3D coordinates of the
nodes that comprise the points in the streamline, without any interpolation
into segments between the nodes. Using this function with streamlines that
have been resampled into a very small number of nodes will result in very
few values.</p>
</dd></dl>

</section>
<section id="nbytes">
<h3>nbytes<a class="headerlink" href="#nbytes" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamline.nbytes">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamline.</span></span><span class="sig-name descname"><span class="pre">nbytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/streamline.html#nbytes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.streamline.nbytes" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</section>
<section id="streamlines">
<h3><a class="reference internal" href="#dipy.tracking.streamlinespeed.Streamlines" title="dipy.tracking.streamlinespeed.Streamlines"><code class="xref py py-class docutils literal notranslate"><span class="pre">Streamlines</span></code></a><a class="headerlink" href="#streamlines" title="Link to this heading">#</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="dipy.tracking.streamlinespeed.Streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamlinespeed.</span></span><span class="sig-name descname"><span class="pre">Streamlines</span></span><a class="headerlink" href="#dipy.tracking.streamlinespeed.Streamlines" title="Link to this definition">#</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">ArraySequence</span></code></p>
</dd></dl>

</section>
<section id="as-native-array">
<h3>as_native_array<a class="headerlink" href="#as-native-array" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamlinespeed.as_native_array">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamlinespeed.</span></span><span class="sig-name descname"><span class="pre">as_native_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/utils/arrfuncs.html#as_native_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.streamlinespeed.as_native_array" title="Link to this definition">#</a></dt>
<dd><p>Return <cite>arr</cite> as native byteordered array</p>
<p>If arr is already native byte ordered, return unchanged.  If it is opposite
endian, then make a native byte ordered copy and return that</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>arr</strong><span class="classifier">ndarray</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>native_arr</strong><span class="classifier">ndarray</span></dt><dd><p>If <cite>arr</cite> was native order, this is just <cite>arr</cite>. Otherwise it’s a new
array such that <code class="docutils literal notranslate"><span class="pre">np.all(native_arr</span> <span class="pre">==</span> <span class="pre">arr)</span></code>, with native byte
ordering.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="compress-streamlines">
<h3>compress_streamlines<a class="headerlink" href="#compress-streamlines" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamlinespeed.compress_streamlines">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamlinespeed.</span></span><span class="sig-name descname"><span class="pre">compress_streamlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_segment_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamlinespeed.compress_streamlines" title="Link to this definition">#</a></dt>
<dd><p>Compress streamlines by linearization.</p>
<p>The compression <a class="footnote-reference brackets" href="#footcite-presseau2015" id="id19" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a> consists in merging consecutive
segments that are nearly collinear. The merging is achieved by removing the
point the two segments have in common.</p>
<p>The linearization process <a class="footnote-reference brackets" href="#footcite-presseau2015" id="id20" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a> ensures that every
point being removed are within a certain margin (in mm) of the resulting
streamline. Recommendations for setting this margin can be found in
<a class="footnote-reference brackets" href="#footcite-presseau2015" id="id21" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a> (in which they called it tolerance error).</p>
<p>The compression also ensures that two consecutive points won’t be too far
from each other (precisely less or equal than <cite>max_segment_length`mm).
This is a tradeoff to speed up the linearization process
:footcite:p:`Rheault2015</cite>. A low value will result in a faster linearization
but low compression, whereas a high value will result in a slower
linearization but high compression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">one or a list of array-like of shape (N,3)</span></dt><dd><p>Array representing x,y,z of N points in a streamline.</p>
</dd>
<dt><strong>tol_error</strong><span class="classifier">float, optional</span></dt><dd><p>Tolerance error in mm. A rule of thumb is to set it
to 0.01mm for deterministic streamlines and 0.1mm for probabilitic
streamlines.</p>
</dd>
<dt><strong>max_segment_length</strong><span class="classifier">float, optional</span></dt><dd><p>Maximum length in mm of any given segment produced by the compression.
The default is 10mm. (In <a class="footnote-reference brackets" href="#footcite-presseau2015" id="id22" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a> they used a value of
<cite>np.inf</cite>).</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>compressed_streamlines</strong><span class="classifier">one or a list of array-like</span></dt><dd><p>Results of the linearization process.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Be aware that compressed streamlines have variable step sizes. One needs to
be careful when computing streamlines-based metrics <a class="footnote-reference brackets" href="#footcite-houde2015" id="id23" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a>.</p>
<p class="rubric">References</p>
<div class="docutils container" id="id24">
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footcite-presseau2015" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id19">1</a>,<a role="doc-backlink" href="#id20">2</a>,<a role="doc-backlink" href="#id21">3</a>,<a role="doc-backlink" href="#id22">4</a>)</span>
<p>Caroline Presseau, Pierre-Marc Jodoin, Jean-Christophe Houde, and Maxime Descoteaux. A new compression format for fiber tracking datasets. <em>NeuroImage</em>, 109:73–83, 2015. URL: <a class="reference external" href="10.1016/j.neuroimage.2014.12.058">10.1016/j.neuroimage.2014.12.058</a>, <a class="reference external" href="https://doi.org/https://doi.org/10.1016/j.neuroimage.2014.12.058">doi:https://doi.org/10.1016/j.neuroimage.2014.12.058</a>.</p>
</aside>
<aside class="footnote brackets" id="footcite-houde2015" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id23">1</a>,<a role="doc-backlink" href="#id27">2</a>)</span>
<p>Jean-Christophe Houde, Marc-Alexandre Ct-Harnois, and Maxime Descoteaux. How to Avoid Biased Streamlines-Based Metrics for Streamlines with Variable Step Sizes. In <em>ISMRM 23rd Annual Meeting &amp; Exhibition SMRT 24th Annual Meeting</em>, volume. Toronto, Canada, 2015. International Society for Magnetic Resonance in Medicine (ISMRM).</p>
</aside>
</aside>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.streamlinespeed</span> <span class="kn">import</span> <span class="n">compress_streamlines</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># One streamline: a wiggling line</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamline</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamline</span> <span class="o">+=</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c_streamline</span> <span class="o">=</span> <span class="n">compress_streamlines</span><span class="p">(</span><span class="n">streamline</span><span class="p">,</span> <span class="n">tol_error</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">streamline</span><span class="p">)</span>
<span class="go">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">c_streamline</span><span class="p">)</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Multiple streamlines</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">streamline</span><span class="p">,</span> <span class="n">streamline</span><span class="p">[::</span><span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c_streamlines</span> <span class="o">=</span> <span class="n">compress_streamlines</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">tol_error</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streamlines</span><span class="p">]</span>
<span class="go">[100, 50]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">c_streamlines</span><span class="p">]</span>
<span class="go">[10, 7]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="id25">
<h3>length<a class="headerlink" href="#id25" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamlinespeed.length">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamlinespeed.</span></span><span class="sig-name descname"><span class="pre">length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamlinespeed.length" title="Link to this definition">#</a></dt>
<dd><p>Euclidean length of streamlines</p>
<p>Length is in mm only if streamlines are expressed in world coordinates.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>streamlines</strong><span class="classifier">ndarray or a list or <code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.tracking.Streamlines</span></code></span></dt><dd><p>If ndarray, must have shape (N,3) where N is the number of points
of the streamline.
If list, each item must be ndarray shape (Ni,3) where Ni is the number
of points of streamline i.
If <code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.tracking.Streamlines</span></code>, its <cite>common_shape</cite> must be 3.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>lengths</strong><span class="classifier">scalar or ndarray shape (N,)</span></dt><dd><p>If there is only one streamline, a scalar representing the length of the
streamline.
If there are several streamlines, ndarray containing the length of every
streamline.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.streamline</span> <span class="kn">import</span> <span class="n">length</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamline</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_length</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">([</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">4</span><span class="o">**</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">(</span><span class="n">streamline</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected_length</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">streamline</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">streamline</span><span class="p">,</span> <span class="n">streamline</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">expected_length</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">expected_length</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">length</span><span class="p">(</span><span class="n">streamlines</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">length</span><span class="p">(</span><span class="n">streamlines</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">lengths</span><span class="p">,</span> <span class="n">expected_lengths</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">([])</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]))</span>
<span class="go">0.0</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="set-number-of-points">
<h3>set_number_of_points<a class="headerlink" href="#set-number-of-points" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.streamlinespeed.set_number_of_points">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.streamlinespeed.</span></span><span class="sig-name descname"><span class="pre">set_number_of_points</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nb_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamlinespeed.set_number_of_points" title="Link to this definition">#</a></dt>
<dd><dl class="simple">
<dt>Change the number of points of streamlines</dt><dd><p>(either by downsampling or upsampling)</p>
</dd>
</dl>
<p>Change the number of points of streamlines in order to obtain
<cite>nb_points</cite>-1 segments of equal length. Points of streamlines will be
modified along the curve.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>streamlines</strong><span class="classifier">ndarray or a list or <code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.tracking.Streamlines</span></code></span></dt><dd><p>If ndarray, must have shape (N,3) where N is the number of points
of the streamline.
If list, each item must be ndarray shape (Ni,3) where Ni is the number
of points of streamline i.
If <code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.tracking.Streamlines</span></code>, its <cite>common_shape</cite> must be 3.</p>
</dd>
<dt><strong>nb_points</strong><span class="classifier">int</span></dt><dd><p>integer representing number of points wanted along the curve.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>new_streamlines</strong><span class="classifier">ndarray or a list or <code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.tracking.Streamlines</span></code></span></dt><dd><p>Results of the downsampling or upsampling process.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.streamline</span> <span class="kn">import</span> <span class="n">set_number_of_points</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
<p>One streamline, a semi-circle:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">*</span> <span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamline</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">modified_streamline</span> <span class="o">=</span> <span class="n">set_number_of_points</span><span class="p">(</span><span class="n">streamline</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">modified_streamline</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
<p>Multiple streamlines:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">streamline</span><span class="p">,</span> <span class="n">streamline</span><span class="p">[::</span><span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_streamlines</span> <span class="o">=</span> <span class="n">set_number_of_points</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streamlines</span><span class="p">]</span>
<span class="go">[100, 50]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">new_streamlines</span><span class="p">]</span>
<span class="go">[10, 10]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="density-map">
<h3>density_map<a class="headerlink" href="#density-map" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.density_map">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">density_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vol_dims</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#density_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.density_map" title="Link to this definition">#</a></dt>
<dd><p>Count the number of unique streamlines that pass through each voxel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">iterable</span></dt><dd><p>A sequence of streamlines.</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline points.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt><strong>vol_dims</strong><span class="classifier">3 ints</span></dt><dd><p>The shape of the volume to be returned containing the streamlines
counts</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>image_volume</strong><span class="classifier">ndarray, shape=vol_dims</span></dt><dd><p>The number of streamline points in each voxel of volume.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>IndexError</dt><dd><p>When the points of the streamlines lie outside of the return volume.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>A streamline can pass through a voxel even if one of the points of the
streamline does not lie in the voxel. For example a step from [0,0,0] to
[0,0,2] passes through [0,0,1]. Consider subsegmenting the streamlines when
the edges of the voxels are smaller than the steps of the streamlines.</p>
</dd></dl>

</section>
<section id="connectivity-matrix">
<h3>connectivity_matrix<a class="headerlink" href="#connectivity-matrix" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.connectivity_matrix">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">connectivity_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_volume</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inclusive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symmetric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapping_as_streamlines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#connectivity_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.connectivity_matrix" title="Link to this definition">#</a></dt>
<dd><p>Count the streamlines that start and end at each label pair.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">sequence</span></dt><dd><p>A sequence of streamlines.</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array_like (4, 4)</span></dt><dd><p>The mapping from voxel coordinates to streamline coordinates.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt><strong>label_volume</strong><span class="classifier">ndarray</span></dt><dd><p>An image volume with an integer data type, where the intensities in the
volume map to anatomical structures.</p>
</dd>
<dt><strong>inclusive: bool</strong></dt><dd><p>Whether to analyze the entire streamline, as opposed to just the
endpoints. False by default.</p>
</dd>
<dt><strong>symmetric</strong><span class="classifier">bool, True by default</span></dt><dd><p>Symmetric means we don’t distinguish between start and end points. If
symmetric is True, <code class="docutils literal notranslate"><span class="pre">matrix[i,</span> <span class="pre">j]</span> <span class="pre">==</span> <span class="pre">matrix[j,</span> <span class="pre">i]</span></code>.</p>
</dd>
<dt><strong>return_mapping</strong><span class="classifier">bool, False by default</span></dt><dd><p>If True, a mapping is returned which maps matrix indices to
streamlines.</p>
</dd>
<dt><strong>mapping_as_streamlines</strong><span class="classifier">bool, False by default</span></dt><dd><p>If True voxel indices map to lists of streamline objects. Otherwise
voxel indices map to lists of integers.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>matrix</strong><span class="classifier">ndarray</span></dt><dd><p>The number of connection between each pair of regions in
<cite>label_volume</cite>.</p>
</dd>
<dt><strong>mapping</strong><span class="classifier">defaultdict(list)</span></dt><dd><p><code class="docutils literal notranslate"><span class="pre">mapping[i,</span> <span class="pre">j]</span></code> returns all the streamlines that connect region <cite>i</cite>
to region <cite>j</cite>. If <cite>symmetric</cite> is True mapping will only have one key
for each start end pair such that if <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">&lt;</span> <span class="pre">j</span></code> mapping will have key
<code class="docutils literal notranslate"><span class="pre">(i,</span> <span class="pre">j)</span></code> but not key <code class="docutils literal notranslate"><span class="pre">(j,</span> <span class="pre">i)</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="ndbincount">
<h3>ndbincount<a class="headerlink" href="#ndbincount" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.ndbincount">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">ndbincount</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#ndbincount"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.ndbincount" title="Link to this definition">#</a></dt>
<dd><p>Like bincount, but for nd-indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>x</strong><span class="classifier">array_like (N, M)</span></dt><dd><p>M indices to a an Nd-array</p>
</dd>
<dt><strong>weights</strong><span class="classifier">array_like (M,), optional</span></dt><dd><p>Weights associated with indices</p>
</dd>
<dt><strong>shape</strong><span class="classifier">optional</span></dt><dd><p>the shape of the output</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="reduce-labels">
<h3>reduce_labels<a class="headerlink" href="#reduce-labels" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.reduce_labels">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">reduce_labels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label_volume</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#reduce_labels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.reduce_labels" title="Link to this definition">#</a></dt>
<dd><p>Reduce an array of labels to the integers from 0 to n with smallest
possible n.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_labels</span><span class="p">,</span> <span class="n">lookup</span> <span class="o">=</span> <span class="n">reduce_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lookup</span>
<span class="go">array([1, 3, 7, 8, 9])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_labels</span> 
<span class="go">array([[0, 1, 4],</span>
<span class="go">       [0, 1, 3],</span>
<span class="go">       [0, 1, 2]]...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">lookup</span><span class="p">[</span><span class="n">new_labels</span><span class="p">]</span> <span class="o">==</span> <span class="n">labels</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="subsegment">
<h3>subsegment<a class="headerlink" href="#subsegment" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.subsegment">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">subsegment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_segment_length</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#subsegment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.subsegment" title="Link to this definition">#</a></dt>
<dd><p>Split the segments of the streamlines into small segments.</p>
<p>Replaces each segment of each of the streamlines with the smallest possible
number of equally sized smaller segments such that no segment is longer
than max_segment_length. Among other things, this can useful for getting
streamline counts on a grid that is smaller than the length of the
streamline segments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">sequence of ndarrays</span></dt><dd><p>The streamlines to be subsegmented.</p>
</dd>
<dt><strong>max_segment_length</strong><span class="classifier">float</span></dt><dd><p>The longest allowable segment length.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>output_streamlines</strong><span class="classifier">generator</span></dt><dd><p>A set of streamlines.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Segments of 0 length are removed. If unchanged</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">subsegment</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="mf">3.</span><span class="p">))</span>
<span class="go">[array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 2.,  0.,  0.],</span>
<span class="go">       [ 5.,  0.,  0.]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">subsegment</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">[array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 1.,  0.,  0.],</span>
<span class="go">       [ 2.,  0.,  0.],</span>
<span class="go">       [ 3.,  0.,  0.],</span>
<span class="go">       [ 4.,  0.,  0.],</span>
<span class="go">       [ 5.,  0.,  0.]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">subsegment</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">))</span>
<span class="go">[array([[ 0. ,  0. ,  0. ],</span>
<span class="go">       [ 1. ,  0. ,  0. ],</span>
<span class="go">       [ 2. ,  0. ,  0. ],</span>
<span class="go">       [ 3.5,  0. ,  0. ],</span>
<span class="go">       [ 5. ,  0. ,  0. ]])]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="seeds-from-mask">
<h3>seeds_from_mask<a class="headerlink" href="#seeds-from-mask" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.seeds_from_mask">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">seeds_from_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">1,</span> <span class="pre">1)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#seeds_from_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.seeds_from_mask" title="Link to this definition">#</a></dt>
<dd><p>Create seeds for fiber tracking from a binary mask.</p>
<p>Seeds points are placed evenly distributed in all voxels of <code class="docutils literal notranslate"><span class="pre">mask</span></code> which
are <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>mask</strong><span class="classifier">binary 3d array_like</span></dt><dd><p>A binary array specifying where to place the seeds for fiber tracking.</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array, (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.
A seed point at the center the voxel <code class="docutils literal notranslate"><span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code>
will be represented as <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code> where
<code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">1]</span> <span class="pre">==</span> <span class="pre">np.dot(affine,</span> <span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k</span> <span class="pre">,</span> <span class="pre">1])</span></code>.</p>
</dd>
<dt><strong>density</strong><span class="classifier">int or array_like (3,)</span></dt><dd><p>Specifies the number of seeds to place along each dimension. A
<code class="docutils literal notranslate"><span class="pre">density</span></code> of <cite>2</cite> is the same as <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">2,</span> <span class="pre">2]</span></code> and will result in a
total of 8 seeds per voxel.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>ValueError</dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">mask</span></code> is not a three-dimensional array</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#dipy.tracking.utils.random_seeds_from_mask" title="dipy.tracking.utils.random_seeds_from_mask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">random_seeds_from_mask</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="s1">&#39;bool&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">density</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="go">array([[ 0.,  0.,  0.]])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="random-seeds-from-mask">
<h3>random_seeds_from_mask<a class="headerlink" href="#random-seeds-from-mask" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.random_seeds_from_mask">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">random_seeds_from_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seeds_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed_count_per_voxel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#random_seeds_from_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.random_seeds_from_mask" title="Link to this definition">#</a></dt>
<dd><p>Create randomly placed seeds for fiber tracking from a binary mask.</p>
<p>Seeds points are placed randomly distributed in voxels of <code class="docutils literal notranslate"><span class="pre">mask</span></code>
which are <code class="docutils literal notranslate"><span class="pre">True</span></code>.
If <code class="docutils literal notranslate"><span class="pre">seed_count_per_voxel</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, this function is
similar to <code class="docutils literal notranslate"><span class="pre">seeds_from_mask()</span></code>, with the difference that instead of
evenly distributing the seeds, it randomly places the seeds within the
voxels specified by the <code class="docutils literal notranslate"><span class="pre">mask</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>mask</strong><span class="classifier">binary 3d array_like</span></dt><dd><p>A binary array specifying where to place the seeds for fiber tracking.</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array, (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.
A seed point at the center the voxel <code class="docutils literal notranslate"><span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code>
will be represented as <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code> where
<code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">1]</span> <span class="pre">==</span> <span class="pre">np.dot(affine,</span> <span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k</span> <span class="pre">,</span> <span class="pre">1])</span></code>.</p>
</dd>
<dt><strong>seeds_count</strong><span class="classifier">int</span></dt><dd><p>The number of seeds to generate. If <code class="docutils literal notranslate"><span class="pre">seed_count_per_voxel</span></code> is True,
specifies the number of seeds to place in each voxel. Otherwise,
specifies the total number of seeds to place in the mask.</p>
</dd>
<dt><strong>seed_count_per_voxel: bool</strong></dt><dd><p>If True, seeds_count is per voxel, else seeds_count is the total number
of seeds.</p>
</dd>
<dt><strong>random_seed</strong><span class="classifier">int</span></dt><dd><p>The seed for the random seed generator (numpy.random.Generator).</p>
</dd>
</dl>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>ValueError</dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">mask</span></code> is not a three-dimensional array</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#dipy.tracking.utils.seeds_from_mask" title="dipy.tracking.utils.seeds_from_mask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">seeds_from_mask</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="s1">&#39;bool&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random_seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">seeds_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span><span class="n">seed_count_per_voxel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([[-0.23838787, -0.20150886,  0.31422574]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random_seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">seeds_count</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
<span class="gp">... </span><span class="n">seed_count_per_voxel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([[-0.23838787, -0.20150886,  0.31422574],</span>
<span class="go">       [-0.41435083, -0.26318949,  0.30127447],</span>
<span class="go">       [ 0.44305611,  0.01132755,  0.47624371],</span>
<span class="go">       [ 0.30500292,  0.30794079,  0.01532556],</span>
<span class="go">       [ 0.03816435, -0.15672913, -0.13093276],</span>
<span class="go">       [ 0.12509547,  0.3972138 ,  0.27568569]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random_seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span><span class="n">seeds_count</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seed_count_per_voxel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([[ 0.30500292,  1.30794079,  2.01532556],</span>
<span class="go">       [-0.23838787, -0.20150886,  0.31422574],</span>
<span class="go">       [ 0.3702492 ,  0.78681721,  2.10314815],</span>
<span class="go">       [-0.41435083, -0.26318949,  0.30127447]])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="target">
<h3>target<a class="headerlink" href="#target" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.target">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">target</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_mask</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#target"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.target" title="Link to this definition">#</a></dt>
<dd><p>Filter streamlines based on whether or not they pass through an ROI.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">iterable</span></dt><dd><p>A sequence of streamlines. Each streamline should be a (N, 3) array,
where N is the length of the streamline.</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt><strong>target_mask</strong><span class="classifier">array-like</span></dt><dd><p>A mask used as a target. Non-zero values are considered to be within
the target region.</p>
</dd>
<dt><strong>include</strong><span class="classifier">bool, default True</span></dt><dd><p>If True, streamlines passing through <cite>target_mask</cite> are kept. If False,
the streamlines not passing through <cite>target_mask</cite> are kept.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">generator</span></dt><dd><p>A sequence of streamlines that pass through <cite>target_mask</cite>.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>ValueError</dt><dd><p>When the points of the streamlines lie outside of the <cite>target_mask</cite>.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#dipy.tracking.utils.density_map" title="dipy.tracking.utils.density_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">density_map</span></code></a></dt><dd></dd>
</dl>
</div>
</dd></dl>

</section>
<section id="target-line-based">
<h3>target_line_based<a class="headerlink" href="#target-line-based" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.target_line_based">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">target_line_based</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_mask</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#target_line_based"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.target_line_based" title="Link to this definition">#</a></dt>
<dd><p>Filter streamlines based on whether or not they pass through a ROI,
using a line-based algorithm. Mostly used as a replacement of <cite>target</cite>
for compressed streamlines.</p>
<p>This function never returns single-point streamlines, whatever the
value of <cite>include</cite>.</p>
<p>See <a class="footnote-reference brackets" href="#footcite-bresenham1965" id="id26" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a> and <a class="footnote-reference brackets" href="#footcite-houde2015" id="id27" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a> for further
details about the method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">iterable</span></dt><dd><p>A sequence of streamlines. Each streamline should be a (N, 3) array,
where N is the length of the streamline.</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt><strong>target_mask</strong><span class="classifier">array-like</span></dt><dd><p>A mask used as a target. Non-zero values are considered to be within
the target region.</p>
</dd>
<dt><strong>include</strong><span class="classifier">bool, default True</span></dt><dd><p>If True, streamlines passing through <cite>target_mask</cite> are kept. If False,
the streamlines not passing through <cite>target_mask</cite> are kept.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">generator</span></dt><dd><p>A sequence of streamlines that pass through <cite>target_mask</cite>.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#dipy.tracking.utils.density_map" title="dipy.tracking.utils.density_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dipy.tracking.utils.density_map</span></code></a></dt><dd></dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">dipy.tracking.streamline.compress_streamlines</span></code></dt><dd></dd>
</dl>
</div>
<p class="rubric">References</p>
<div class="docutils container" id="id28">
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footcite-bresenham1965" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id26">8</a><span class="fn-bracket">]</span></span>
<p>Jack E. Bresenham. Algorithm for computer control of a digital plotter. <em>IBM Systems Journal</em>, 4(1):25–30, 1965. <a class="reference external" href="https://doi.org/10.1147/sj.41.0025">doi:10.1147/sj.41.0025</a>.</p>
</aside>
</aside>
</div>
</dd></dl>

</section>
<section id="streamline-near-roi">
<h3>streamline_near_roi<a class="headerlink" href="#streamline-near-roi" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.streamline_near_roi">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">streamline_near_roi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_coords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'any'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#streamline_near_roi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.streamline_near_roi" title="Link to this definition">#</a></dt>
<dd><p>Is a streamline near an ROI.</p>
<p>Implements the inner loops of the <a class="reference internal" href="#dipy.tracking.utils.near_roi" title="dipy.tracking.utils.near_roi"><code class="xref py py-func docutils literal notranslate"><span class="pre">near_roi()</span></code></a> function.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>streamline</strong><span class="classifier">array, shape (N, 3)</span></dt><dd><p>A single streamline</p>
</dd>
<dt><strong>roi_coords</strong><span class="classifier">array, shape (M, 3)</span></dt><dd><p>ROI coordinates transformed to the streamline coordinate frame.</p>
</dd>
<dt><strong>tol</strong><span class="classifier">float</span></dt><dd><p>Distance (in the units of the streamlines, usually mm). If any
coordinate in the streamline is within this distance from the center
of any voxel in the ROI, this function returns True.</p>
</dd>
<dt><strong>mode</strong><span class="classifier">string</span></dt><dd><p>One of {“any”, “all”, “either_end”, “both_end”}, where return True
if:</p>
<p>“any” : any point is within tol from ROI.</p>
<p>“all” : all points are within tol from ROI.</p>
<p>“either_end” : either of the end-points is within tol from ROI</p>
<p>“both_end” : both end points are within tol from ROI.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>out</strong><span class="classifier">boolean</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="near-roi">
<h3>near_roi<a class="headerlink" href="#near-roi" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.near_roi">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">near_roi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">region_of_interest</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'any'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#near_roi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.near_roi" title="Link to this definition">#</a></dt>
<dd><p>Provide filtering criteria for a set of streamlines based on whether
they fall within a tolerance distance from an ROI.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>streamlines</strong><span class="classifier">list or generator</span></dt><dd><p>A sequence of streamlines. Each streamline should be a (N, 3) array,
where N is the length of the streamline.</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt><strong>region_of_interest</strong><span class="classifier">ndarray</span></dt><dd><p>A mask used as a target. Non-zero values are considered to be within
the target region.</p>
</dd>
<dt><strong>tol</strong><span class="classifier">float</span></dt><dd><p>Distance (in the units of the streamlines, usually mm). If any
coordinate in the streamline is within this distance from the center
of any voxel in the ROI, the filtering criterion is set to True for
this streamline, otherwise False. Defaults to the distance between
the center of each voxel and the corner of the voxel.</p>
</dd>
<dt><strong>mode</strong><span class="classifier">string, optional</span></dt><dd><p>One of {“any”, “all”, “either_end”, “both_end”}, where return True
if:</p>
<p>“any” : any point is within tol from ROI. Default.</p>
<p>“all” : all points are within tol from ROI.</p>
<p>“either_end” : either of the end-points is within tol from ROI</p>
<p>“both_end” : both end points are within tol from ROI.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>1D array of boolean dtype, shape (len(streamlines), )</dt><dd></dd>
<dt>This contains <cite>True</cite> for indices corresponding to each streamline</dt><dd></dd>
<dt>that passes within a tolerance distance from the target ROI, <cite>False</cite></dt><dd></dd>
<dt>otherwise.</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="id29">
<h3>length<a class="headerlink" href="#id29" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.length">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#length"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.length" title="Link to this definition">#</a></dt>
<dd><p>Calculate the lengths of many streamlines in a bundle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">list</span></dt><dd><p>Each item in the list is an array with 3D coordinates of a streamline.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>Iterator object which then computes the length of each</dt><dd></dd>
<dt>streamline in the bundle, upon iteration.</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="unique-rows">
<h3>unique_rows<a class="headerlink" href="#unique-rows" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.unique_rows">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">unique_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_array</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'f4'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#unique_rows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.unique_rows" title="Link to this definition">#</a></dt>
<dd><p>Find the unique rows in an array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>in_array: ndarray</strong></dt><dd><p>The array for which the unique rows should be found</p>
</dd>
<dt><strong>dtype: str, optional</strong></dt><dd><p>This determines the intermediate representation used for the
values. Should at least preserve the values of the input array.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>u_return: ndarray</dt><dd><p>Array with the unique rows of the original array.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="transform-tracking-output">
<h3>transform_tracking_output<a class="headerlink" href="#transform-tracking-output" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.transform_tracking_output">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">transform_tracking_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tracking_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_seeds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#transform_tracking_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.transform_tracking_output" title="Link to this definition">#</a></dt>
<dd><p>Apply a linear transformation, given by affine, to streamlines.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tracking_output</strong><span class="classifier">Streamlines generator</span></dt><dd><p>Either streamlines (list, ArraySequence) or a tuple with streamlines
and seeds together</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt><strong>save_seeds</strong><span class="classifier">bool, optional</span></dt><dd><p>If set, seeds associated to streamlines will be also moved and returned</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">generator</span></dt><dd><p>A generator for the sequence of transformed streamlines.
If save_seeds is True, also return a generator for the
transformed seeds.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="reduce-rois">
<h3>reduce_rois<a class="headerlink" href="#reduce-rois" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.reduce_rois">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">reduce_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rois</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#reduce_rois"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.reduce_rois" title="Link to this definition">#</a></dt>
<dd><p>Reduce multiple ROIs to one inclusion and one exclusion ROI.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>rois</strong><span class="classifier">list or ndarray</span></dt><dd><p>A list of 3D arrays, each with shape (x, y, z) corresponding to the
shape of the brain volume, or a 4D array with shape (n_rois, x, y,
z). Non-zeros in each volume are considered to be within the region.</p>
</dd>
<dt><strong>include</strong><span class="classifier">array or list</span></dt><dd><p>A list or 1D array of boolean marking inclusion or exclusion
criteria.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>include_roi</strong><span class="classifier">boolean 3D array</span></dt><dd><p>An array marking the inclusion mask.</p>
</dd>
<dt><strong>exclude_roi</strong><span class="classifier">boolean 3D array</span></dt><dd><p>An array marking the exclusion mask</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The include_roi and exclude_roi can be used to perform the operation: “(A
or B or …) and not (X or Y or …)”, where A, B are inclusion regions
and X, Y are exclusion regions.</p>
</dd></dl>

</section>
<section id="path-length">
<h3>path_length<a class="headerlink" href="#path-length" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.path_length">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">path_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aoi</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#path_length"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.path_length" title="Link to this definition">#</a></dt>
<dd><p>Compute the shortest path, along any streamline, between aoi and
each voxel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">seq of (N, 3) arrays</span></dt><dd><p>A sequence of streamlines, path length is given in mm along the curve
of the streamline.</p>
</dd>
<dt><strong>aoi</strong><span class="classifier">array, 3d</span></dt><dd><p>A mask (binary array) of voxels from which to start computing distance.</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array (4, 4)</span></dt><dd><p>The mapping between voxel indices and the point space for seeds.
The voxel_to_rasmm matrix, typically from a NIFTI file.</p>
</dd>
<dt><strong>fill_value</strong><span class="classifier">float</span></dt><dd><p>The value of voxel in the path length map that are not connected to the
aoi.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>plm</strong><span class="classifier">array</span></dt><dd><p>Same shape as aoi. The minimum distance between every point and aoi
along the path of a streamline.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="max-angle-from-curvature">
<h3>max_angle_from_curvature<a class="headerlink" href="#max-angle-from-curvature" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.max_angle_from_curvature">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">max_angle_from_curvature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_radius_curvature</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#max_angle_from_curvature"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.max_angle_from_curvature" title="Link to this definition">#</a></dt>
<dd><p>Get the maximum deviation angle from the minimum radius curvature.</p>
<p>See <a class="footnote-reference brackets" href="#footcite-tournier2012" id="id30" role="doc-noteref"><span class="fn-bracket">[</span>9<span class="fn-bracket">]</span></a> for further details about the method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>min_radius_curvature: float</strong></dt><dd><p>Minimum radius of curvature in mm.</p>
</dd>
<dt><strong>step_size: float</strong></dt><dd><p>The tracking step size in mm.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>max_angle: float</dt><dd><p>The maximum deviation angle in radian,
given the radius curvature and the step size.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">References</p>
<div class="docutils container" id="id31">
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footcite-tournier2012" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>9<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id30">1</a>,<a role="doc-backlink" href="#id32">2</a>)</span>
<p>Jacques-Donald Tournier, Fernando Calamante, and Alan Connelly. MRtrix: Diffusion tractography in crossing fiber regions. <em>International Journal of Imaging Systems and Technology</em>, 22(1):53–66, 2012. URL: <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/ima.22005">https://onlinelibrary.wiley.com/doi/abs/10.1002/ima.22005</a>, <a class="reference external" href="https://doi.org/https://doi.org/10.1002/ima.22005">doi:https://doi.org/10.1002/ima.22005</a>.</p>
</aside>
</aside>
</div>
</dd></dl>

</section>
<section id="min-radius-curvature-from-angle">
<h3>min_radius_curvature_from_angle<a class="headerlink" href="#min-radius-curvature-from-angle" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.min_radius_curvature_from_angle">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">min_radius_curvature_from_angle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_angle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_size</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#min_radius_curvature_from_angle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.min_radius_curvature_from_angle" title="Link to this definition">#</a></dt>
<dd><p>Get minimum radius of curvature from a deviation angle.</p>
<p>See <a class="footnote-reference brackets" href="#footcite-tournier2012" id="id32" role="doc-noteref"><span class="fn-bracket">[</span>9<span class="fn-bracket">]</span></a> for further details about the method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>max_angle: float</strong></dt><dd><p>The maximum deviation angle in radian.
theta should be between [0 - pi/2] otherwise default will be pi/2.</p>
</dd>
<dt><strong>step_size: float</strong></dt><dd><p>The tracking step size in mm.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>min_radius_curvature: float</dt><dd><p>Minimum radius of curvature in mm,
given the maximum deviation angle theta and the step size.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">References</p>
</dd></dl>

</section>
<section id="seeds-directions-pairs">
<h3>seeds_directions_pairs<a class="headerlink" href="#seeds-directions-pairs" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.utils.seeds_directions_pairs">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.utils.</span></span><span class="sig-name descname"><span class="pre">seeds_directions_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">positions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">peaks</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cross</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dipy/tracking/utils.html#seeds_directions_pairs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dipy.tracking.utils.seeds_directions_pairs" title="Link to this definition">#</a></dt>
<dd><p>Pair each seed to the corresponding peaks. If multiple peaks are available
the seed is repeated for each.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>positions</strong><span class="classifier">array, (N, 3)</span></dt><dd><p>Coordinates of the N positions.</p>
</dd>
<dt><strong>peaks</strong><span class="classifier">array (N, M, 3)</span></dt><dd><p>Peaks at each position</p>
</dd>
<dt><strong>max_cross</strong><span class="classifier">int, optional</span></dt><dd><p>The maximum number of direction to track from each seed in crossing
voxels. By default all voxel peaks are used.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>seeds</strong><span class="classifier">array (K, 3)</span></dt><dd></dd>
<dt><strong>directions</strong><span class="classifier">array (K, 3)</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="streamline-mapping">
<h3>streamline_mapping<a class="headerlink" href="#streamline-mapping" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.vox2track.streamline_mapping">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.vox2track.</span></span><span class="sig-name descname"><span class="pre">streamline_mapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">streamlines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapping_as_streamlines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.vox2track.streamline_mapping" title="Link to this definition">#</a></dt>
<dd><p>Creates a mapping from voxel indices to streamlines.</p>
<p>Returns a dictionary where each key is a 3d voxel index and the associated
value is a list of the streamlines that pass through that voxel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>streamlines</strong><span class="classifier">sequence</span></dt><dd><p>A sequence of streamlines.</p>
</dd>
<dt><strong>affine</strong><span class="classifier">array_like (4, 4), optional</span></dt><dd><p>The mapping from voxel coordinates to streamline coordinates.
The streamline values are assumed to be in voxel coordinates.
IE <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">0,</span> <span class="pre">0]</span></code> is the center of the first voxel and the voxel size
is <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">1,</span> <span class="pre">1]</span></code>.</p>
</dd>
<dt><strong>mapping_as_streamlines</strong><span class="classifier">bool, optional, False by default</span></dt><dd><p>If True voxel indices map to lists of streamline objects. Otherwise
voxel indices map to lists of integers.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>mapping</strong><span class="classifier">defaultdict(list)</span></dt><dd><p>A mapping from voxel indices to the streamlines that pass through that
voxel.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">]]),</span>
<span class="gp">... </span>               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span> <span class="o">=</span> <span class="n">streamline_mapping</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">affine</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="go">[0, 1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="go">[0]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="go">[1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span><span class="o">.</span><span class="n">get</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;no streamlines&#39;</span><span class="p">)</span>
<span class="go">&#39;no streamlines&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span> <span class="o">=</span> <span class="n">streamline_mapping</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">affine</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                             <span class="n">mapping_as_streamlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="n">streamlines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="track-counts">
<h3>track_counts<a class="headerlink" href="#track-counts" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dipy.tracking.vox2track.track_counts">
<span class="sig-prename descclassname"><span class="pre">dipy.tracking.vox2track.</span></span><span class="sig-name descname"><span class="pre">track_counts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tracks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vol_dims</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vox_sizes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">1,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_elements</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.vox2track.track_counts" title="Link to this definition">#</a></dt>
<dd><p>Counts of points in <cite>tracks</cite> that pass through voxels in volume</p>
<p>We find whether a point passed through a track by rounding the mm
point values to voxels.  For a track that passes through a voxel more
than once, we only record counts and elements for the first point in
the line that enters the voxel.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tracks</strong><span class="classifier">sequence</span></dt><dd><p>sequence of T tracks.  One track is an ndarray of shape (N, 3), where N
is the number of points in that track, and <code class="docutils literal notranslate"><span class="pre">tracks[t][n]</span></code> is the n-th
point in the t-th track.  Points are of form x, y, z in <em>voxel mm</em>
coordinates. That is, if <code class="docutils literal notranslate"><span class="pre">i,</span> <span class="pre">j,</span> <span class="pre">k</span></code> is the possibly non-integer voxel
coordinate of the track point, and <cite>vox_sizes</cite> are 3 floats giving voxel
sizes of dimensions 0, 1, 2 respectively, then the voxel mm coordinates
<code class="docutils literal notranslate"><span class="pre">x,</span> <span class="pre">y,</span> <span class="pre">z</span></code> are simply <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">*</span> <span class="pre">vox_sizes[0],</span> <span class="pre">j</span> <span class="pre">*</span> <span class="pre">vox_sizes[1],</span> <span class="pre">k</span> <span class="pre">*</span>
<span class="pre">vox_sizes[2]</span></code>.  This convention derives from trackviz.  To pass in
tracks as voxel coordinates, just pass <code class="docutils literal notranslate"><span class="pre">vox_sizes=(1,</span> <span class="pre">1,</span> <span class="pre">1)</span></code> (see
below).</p>
</dd>
<dt><strong>vol_dims</strong><span class="classifier">sequence length 3</span></dt><dd><p>volume dimensions in voxels, x, y, z.</p>
</dd>
<dt><strong>vox_sizes</strong><span class="classifier">optional, sequence length 3</span></dt><dd><p>voxel sizes in mm.  Default is (1,1,1)</p>
</dd>
<dt><strong>return_elements</strong><span class="classifier">{True, False}, optional</span></dt><dd><p>If True, also return object array with one list per voxel giving
track indices and point indices passing through the voxel (see
below)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt><strong>tcs</strong><span class="classifier">ndarray shape <cite>vol_dim</cite></span></dt><dd><p>An array where entry <code class="docutils literal notranslate"><span class="pre">tcs[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code> is the number of tracks
that passed through voxel at voxel coordinate x, y, z</p>
</dd>
<dt><strong>tes</strong><span class="classifier">ndarray dtype np.object, shape <cite>vol_dim</cite></span></dt><dd><p>If <cite>return_elements</cite> is True, we also return an object array with
one object per voxel. The objects at each voxel are a list of
integers, where the integers are the indices of the track that
passed through the voxel.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Imagine you have a volume (voxel) space of dimension <code class="docutils literal notranslate"><span class="pre">(10,20,30)</span></code>.
Imagine you had voxel coordinate tracks in <code class="docutils literal notranslate"><span class="pre">vs</span></code>.  To just fill an array
with the counts of how many tracks pass through each voxel:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vox_track0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.1</span><span class="p">,</span> <span class="mf">2.2</span><span class="p">,</span> <span class="mf">3.3</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.2</span><span class="p">,</span> <span class="mf">4.4</span><span class="p">,</span> <span class="mf">6.6</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vox_track1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vs</span> <span class="o">=</span> <span class="p">(</span><span class="n">vox_track0</span><span class="p">,</span> <span class="n">vox_track1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vox_dim</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span> <span class="c1"># original voxel array size</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcs</span> <span class="o">=</span> <span class="n">track_counts</span><span class="p">(</span><span class="n">vs</span><span class="p">,</span> <span class="n">vox_dim</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcs</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(10, 20, 30)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="go">array([2, 1, 1, 0])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcs</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">tcs</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="go">(1, 1)</span>
</pre></div>
</div>
<p>You can also use the routine to count into larger-than-voxel boxes.  To do
this, increase the voxel size and decrease the <code class="docutils literal notranslate"><span class="pre">vox_dim</span></code> accordingly:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tcs</span><span class="o">=</span><span class="n">track_counts</span><span class="p">(</span><span class="n">vs</span><span class="p">,</span> <span class="p">(</span><span class="mi">10</span><span class="o">/</span><span class="mf">2.</span><span class="p">,</span> <span class="mi">20</span><span class="o">/</span><span class="mf">2.</span><span class="p">,</span> <span class="mi">30</span><span class="o">/</span><span class="mf">2.</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcs</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(5, 10, 15)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcs</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">tcs</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="go">(1, 1)</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="dipy.stats.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stats</span></code></p>
      </div>
    </a>
    <a class="right-next"
       href="dipy.viz.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><code class="xref py py-mod docutils literal notranslate"><span class="pre">viz</span></code></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking._utils">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking._utils</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.direction_getter">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.direction_getter</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.distances">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.distances</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.fbcmeasures">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.fbcmeasures</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.learning">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.learning</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.life">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.life</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.local_tracking">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.local_tracking</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.localtrack">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.localtrack</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.mesh">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.mesh</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.metrics">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.metrics</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.propspeed">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.propspeed</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.stopping_criterion">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.stopping_criterion</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.streamline">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.streamline</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.streamlinespeed">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.streamlinespeed</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.utils">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.utils</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#important-notes">Important Notes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-dipy.tracking.vox2track">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">tracking.vox2track</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#directiongetter"><code class="xref py py-class docutils literal notranslate"><span class="pre">DirectionGetter</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.direction_getter.DirectionGetter"><code class="docutils literal notranslate"><span class="pre">DirectionGetter</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.direction_getter.DirectionGetter.generate_streamline"><code class="docutils literal notranslate"><span class="pre">DirectionGetter.generate_streamline()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.direction_getter.DirectionGetter.get_direction"><code class="docutils literal notranslate"><span class="pre">DirectionGetter.get_direction()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.direction_getter.DirectionGetter.initial_direction"><code class="docutils literal notranslate"><span class="pre">DirectionGetter.initial_direction()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-3vecs">add_3vecs</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.add_3vecs"><code class="docutils literal notranslate"><span class="pre">add_3vecs()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#approx-polygon-track">approx_polygon_track</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.approx_polygon_track"><code class="docutils literal notranslate"><span class="pre">approx_polygon_track()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#approximate-mdl-trajectory">approximate_mdl_trajectory</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.approximate_mdl_trajectory"><code class="docutils literal notranslate"><span class="pre">approximate_mdl_trajectory()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bundles-distances-mam">bundles_distances_mam</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.bundles_distances_mam"><code class="docutils literal notranslate"><span class="pre">bundles_distances_mam()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bundles-distances-mdf">bundles_distances_mdf</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.bundles_distances_mdf"><code class="docutils literal notranslate"><span class="pre">bundles_distances_mdf()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cut-plane">cut_plane</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.cut_plane"><code class="docutils literal notranslate"><span class="pre">cut_plane()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#inner-3vecs">inner_3vecs</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.inner_3vecs"><code class="docutils literal notranslate"><span class="pre">inner_3vecs()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#intersect-segment-cylinder">intersect_segment_cylinder</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.intersect_segment_cylinder"><code class="docutils literal notranslate"><span class="pre">intersect_segment_cylinder()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#larch-3merge">larch_3merge</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.larch_3merge"><code class="docutils literal notranslate"><span class="pre">larch_3merge()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#larch-3split">larch_3split</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.larch_3split"><code class="docutils literal notranslate"><span class="pre">larch_3split()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lee-angle-distance">lee_angle_distance</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.lee_angle_distance"><code class="docutils literal notranslate"><span class="pre">lee_angle_distance()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lee-perpendicular-distance">lee_perpendicular_distance</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.lee_perpendicular_distance"><code class="docutils literal notranslate"><span class="pre">lee_perpendicular_distance()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#local-skeleton-clustering">local_skeleton_clustering</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.local_skeleton_clustering"><code class="docutils literal notranslate"><span class="pre">local_skeleton_clustering()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#local-skeleton-clustering-3pts">local_skeleton_clustering_3pts</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.local_skeleton_clustering_3pts"><code class="docutils literal notranslate"><span class="pre">local_skeleton_clustering_3pts()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mam-distances">mam_distances</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.mam_distances"><code class="docutils literal notranslate"><span class="pre">mam_distances()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#minimum-closest-distance">minimum_closest_distance</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.minimum_closest_distance"><code class="docutils literal notranslate"><span class="pre">minimum_closest_distance()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#most-similar-track-mam">most_similar_track_mam</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.most_similar_track_mam"><code class="docutils literal notranslate"><span class="pre">most_similar_track_mam()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mul-3vec">mul_3vec</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.mul_3vec"><code class="docutils literal notranslate"><span class="pre">mul_3vec()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mul-3vecs">mul_3vecs</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.mul_3vecs"><code class="docutils literal notranslate"><span class="pre">mul_3vecs()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#norm-3vec">norm_3vec</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.norm_3vec"><code class="docutils literal notranslate"><span class="pre">norm_3vec()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#normalized-3vec">normalized_3vec</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.normalized_3vec"><code class="docutils literal notranslate"><span class="pre">normalized_3vec()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#point-segment-sq-distance">point_segment_sq_distance</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.point_segment_sq_distance"><code class="docutils literal notranslate"><span class="pre">point_segment_sq_distance()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#point-track-sq-distance-check">point_track_sq_distance_check</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.point_track_sq_distance_check"><code class="docutils literal notranslate"><span class="pre">point_track_sq_distance_check()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sub-3vecs">sub_3vecs</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.sub_3vecs"><code class="docutils literal notranslate"><span class="pre">sub_3vecs()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#track-dist-3pts">track_dist_3pts</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.track_dist_3pts"><code class="docutils literal notranslate"><span class="pre">track_dist_3pts()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#track-roi-intersection-check">track_roi_intersection_check</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.distances.track_roi_intersection_check"><code class="docutils literal notranslate"><span class="pre">track_roi_intersection_check()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#warn">warn</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fbcmeasures"><code class="xref py py-class docutils literal notranslate"><span class="pre">FBCMeasures</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.FBCMeasures"><code class="docutils literal notranslate"><span class="pre">FBCMeasures</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.FBCMeasures.get_points_rfbc_thresholded"><code class="docutils literal notranslate"><span class="pre">FBCMeasures.get_points_rfbc_thresholded()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#kdtree"><code class="xref py py-class docutils literal notranslate"><span class="pre">KDTree</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree"><code class="docutils literal notranslate"><span class="pre">KDTree</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.count_neighbors"><code class="docutils literal notranslate"><span class="pre">KDTree.count_neighbors()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.innernode"><code class="docutils literal notranslate"><span class="pre">KDTree.innernode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.innernode.children"><code class="docutils literal notranslate"><span class="pre">KDTree.innernode.children</span></code></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.innernode.split"><code class="docutils literal notranslate"><span class="pre">KDTree.innernode.split</span></code></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.innernode.split_dim"><code class="docutils literal notranslate"><span class="pre">KDTree.innernode.split_dim</span></code></a></li>
</ul>
</li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.leafnode"><code class="docutils literal notranslate"><span class="pre">KDTree.leafnode</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.leafnode.children"><code class="docutils literal notranslate"><span class="pre">KDTree.leafnode.children</span></code></a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.leafnode.idx"><code class="docutils literal notranslate"><span class="pre">KDTree.leafnode.idx</span></code></a></li>
</ul>
</li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.node"><code class="docutils literal notranslate"><span class="pre">KDTree.node</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.query"><code class="docutils literal notranslate"><span class="pre">KDTree.query()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.query_ball_point"><code class="docutils literal notranslate"><span class="pre">KDTree.query_ball_point()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.query_ball_tree"><code class="docutils literal notranslate"><span class="pre">KDTree.query_ball_tree()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.query_pairs"><code class="docutils literal notranslate"><span class="pre">KDTree.query_pairs()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.sparse_distance_matrix"><code class="docutils literal notranslate"><span class="pre">KDTree.sparse_distance_matrix()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.KDTree.tree"><code class="docutils literal notranslate"><span class="pre">KDTree.tree</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#interp1d"><code class="xref py py-class docutils literal notranslate"><span class="pre">interp1d</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.interp1d"><code class="docutils literal notranslate"><span class="pre">interp1d</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.interp1d.dtype"><code class="docutils literal notranslate"><span class="pre">interp1d.dtype</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.interp1d.fill_value"><code class="docutils literal notranslate"><span class="pre">interp1d.fill_value</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#compute-rfbc">compute_rfbc</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.compute_rfbc"><code class="docutils literal notranslate"><span class="pre">compute_rfbc()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#determine-num-threads">determine_num_threads</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.determine_num_threads"><code class="docutils literal notranslate"><span class="pre">determine_num_threads()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#min-moving-average">min_moving_average</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.fbcmeasures.min_moving_average"><code class="docutils literal notranslate"><span class="pre">min_moving_average()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#detect-corresponding-tracks">detect_corresponding_tracks</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.learning.detect_corresponding_tracks"><code class="docutils literal notranslate"><span class="pre">detect_corresponding_tracks()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#detect-corresponding-tracks-plus">detect_corresponding_tracks_plus</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.learning.detect_corresponding_tracks_plus"><code class="docutils literal notranslate"><span class="pre">detect_corresponding_tracks_plus()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lifesignalmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">LifeSignalMaker</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.LifeSignalMaker"><code class="docutils literal notranslate"><span class="pre">LifeSignalMaker</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.LifeSignalMaker.calc_signal"><code class="docutils literal notranslate"><span class="pre">LifeSignalMaker.calc_signal()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.LifeSignalMaker.streamline_signal"><code class="docutils literal notranslate"><span class="pre">LifeSignalMaker.streamline_signal()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fibermodel"><code class="xref py py-class docutils literal notranslate"><span class="pre">FiberModel</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.FiberModel"><code class="docutils literal notranslate"><span class="pre">FiberModel</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.FiberModel.fit"><code class="docutils literal notranslate"><span class="pre">FiberModel.fit()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.FiberModel.setup"><code class="docutils literal notranslate"><span class="pre">FiberModel.setup()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fiberfit"><code class="xref py py-class docutils literal notranslate"><span class="pre">FiberFit</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.FiberFit"><code class="docutils literal notranslate"><span class="pre">FiberFit</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.FiberFit.predict"><code class="docutils literal notranslate"><span class="pre">FiberFit.predict()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gradient">gradient</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.gradient"><code class="docutils literal notranslate"><span class="pre">gradient()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streamline-gradients">streamline_gradients</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.streamline_gradients"><code class="docutils literal notranslate"><span class="pre">streamline_gradients()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grad-tensor">grad_tensor</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.grad_tensor"><code class="docutils literal notranslate"><span class="pre">grad_tensor()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streamline-tensors">streamline_tensors</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.streamline_tensors"><code class="docutils literal notranslate"><span class="pre">streamline_tensors()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streamline-signal">streamline_signal</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.streamline_signal"><code class="docutils literal notranslate"><span class="pre">streamline_signal()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#voxel2streamline">voxel2streamline</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.life.voxel2streamline"><code class="docutils literal notranslate"><span class="pre">voxel2streamline()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#localtracking"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalTracking</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.local_tracking.LocalTracking"><code class="docutils literal notranslate"><span class="pre">LocalTracking</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#particlefilteringtracking"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParticleFilteringTracking</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.local_tracking.ParticleFilteringTracking"><code class="docutils literal notranslate"><span class="pre">ParticleFilteringTracking</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#local-tracker">local_tracker</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.localtrack.local_tracker"><code class="docutils literal notranslate"><span class="pre">local_tracker()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pft-tracker">pft_tracker</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.localtrack.pft_tracker"><code class="docutils literal notranslate"><span class="pre">pft_tracker()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random">random</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.localtrack.random"><code class="docutils literal notranslate"><span class="pre">random()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random-coordinates-from-surface">random_coordinates_from_surface</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.mesh.random_coordinates_from_surface"><code class="docutils literal notranslate"><span class="pre">random_coordinates_from_surface()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seeds-from-surface-coordinates">seeds_from_surface_coordinates</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.mesh.seeds_from_surface_coordinates"><code class="docutils literal notranslate"><span class="pre">seeds_from_surface_coordinates()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#triangles-area">triangles_area</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.mesh.triangles_area"><code class="docutils literal notranslate"><span class="pre">triangles_area()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vertices-to-triangles-values">vertices_to_triangles_values</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.mesh.vertices_to_triangles_values"><code class="docutils literal notranslate"><span class="pre">vertices_to_triangles_values()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#winding">winding</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.winding"><code class="docutils literal notranslate"><span class="pre">winding()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#length">length</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.length"><code class="docutils literal notranslate"><span class="pre">length()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bytes">bytes</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.bytes"><code class="docutils literal notranslate"><span class="pre">bytes()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#midpoint">midpoint</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.midpoint"><code class="docutils literal notranslate"><span class="pre">midpoint()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#center-of-mass">center_of_mass</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.center_of_mass"><code class="docutils literal notranslate"><span class="pre">center_of_mass()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#magn">magn</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.magn"><code class="docutils literal notranslate"><span class="pre">magn()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#frenet-serret">frenet_serret</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.frenet_serret"><code class="docutils literal notranslate"><span class="pre">frenet_serret()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mean-curvature">mean_curvature</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.mean_curvature"><code class="docutils literal notranslate"><span class="pre">mean_curvature()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mean-orientation">mean_orientation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.mean_orientation"><code class="docutils literal notranslate"><span class="pre">mean_orientation()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-combinations">generate_combinations</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.generate_combinations"><code class="docutils literal notranslate"><span class="pre">generate_combinations()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#longest-track-bundle">longest_track_bundle</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.longest_track_bundle"><code class="docutils literal notranslate"><span class="pre">longest_track_bundle()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#intersect-sphere">intersect_sphere</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.intersect_sphere"><code class="docutils literal notranslate"><span class="pre">intersect_sphere()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#inside-sphere">inside_sphere</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.inside_sphere"><code class="docutils literal notranslate"><span class="pre">inside_sphere()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#inside-sphere-points">inside_sphere_points</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.inside_sphere_points"><code class="docutils literal notranslate"><span class="pre">inside_sphere_points()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spline">spline</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.spline"><code class="docutils literal notranslate"><span class="pre">spline()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#startpoint">startpoint</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.startpoint"><code class="docutils literal notranslate"><span class="pre">startpoint()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#endpoint">endpoint</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.endpoint"><code class="docutils literal notranslate"><span class="pre">endpoint()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#arbitrarypoint">arbitrarypoint</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.arbitrarypoint"><code class="docutils literal notranslate"><span class="pre">arbitrarypoint()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#principal-components">principal_components</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.principal_components"><code class="docutils literal notranslate"><span class="pre">principal_components()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#midpoint2point">midpoint2point</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.metrics.midpoint2point"><code class="docutils literal notranslate"><span class="pre">midpoint2point()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eudx-both-directions">eudx_both_directions</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.propspeed.eudx_both_directions"><code class="docutils literal notranslate"><span class="pre">eudx_both_directions()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ndarray-offset">ndarray_offset</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.propspeed.ndarray_offset"><code class="docutils literal notranslate"><span class="pre">ndarray_offset()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#actstoppingcriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">ActStoppingCriterion</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.ActStoppingCriterion"><code class="docutils literal notranslate"><span class="pre">ActStoppingCriterion</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#anatomicalstoppingcriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnatomicalStoppingCriterion</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion"><code class="docutils literal notranslate"><span class="pre">AnatomicalStoppingCriterion</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion.from_pve"><code class="docutils literal notranslate"><span class="pre">AnatomicalStoppingCriterion.from_pve()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion.get_exclude"><code class="docutils literal notranslate"><span class="pre">AnatomicalStoppingCriterion.get_exclude()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.AnatomicalStoppingCriterion.get_include"><code class="docutils literal notranslate"><span class="pre">AnatomicalStoppingCriterion.get_include()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#binarystoppingcriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinaryStoppingCriterion</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.BinaryStoppingCriterion"><code class="docutils literal notranslate"><span class="pre">BinaryStoppingCriterion</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cmcstoppingcriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CmcStoppingCriterion</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.CmcStoppingCriterion"><code class="docutils literal notranslate"><span class="pre">CmcStoppingCriterion</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stoppingcriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoppingCriterion</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.StoppingCriterion"><code class="docutils literal notranslate"><span class="pre">StoppingCriterion</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.StoppingCriterion.check_point"><code class="docutils literal notranslate"><span class="pre">StoppingCriterion.check_point()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streamlinestatus"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamlineStatus</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.StreamlineStatus"><code class="docutils literal notranslate"><span class="pre">StreamlineStatus</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.StreamlineStatus.ENDPOINT"><code class="docutils literal notranslate"><span class="pre">StreamlineStatus.ENDPOINT</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.StreamlineStatus.INVALIDPOINT"><code class="docutils literal notranslate"><span class="pre">StreamlineStatus.INVALIDPOINT</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.StreamlineStatus.OUTSIDEIMAGE"><code class="docutils literal notranslate"><span class="pre">StreamlineStatus.OUTSIDEIMAGE</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.StreamlineStatus.PYERROR"><code class="docutils literal notranslate"><span class="pre">StreamlineStatus.PYERROR</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.StreamlineStatus.TRACKPOINT"><code class="docutils literal notranslate"><span class="pre">StreamlineStatus.TRACKPOINT</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#thresholdstoppingcriterion"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThresholdStoppingCriterion</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.stopping_criterion.ThresholdStoppingCriterion"><code class="docutils literal notranslate"><span class="pre">ThresholdStoppingCriterion</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unlist-streamlines">unlist_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.unlist_streamlines"><code class="docutils literal notranslate"><span class="pre">unlist_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#relist-streamlines">relist_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.relist_streamlines"><code class="docutils literal notranslate"><span class="pre">relist_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#center-streamlines">center_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.center_streamlines"><code class="docutils literal notranslate"><span class="pre">center_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deform-streamlines">deform_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.deform_streamlines"><code class="docutils literal notranslate"><span class="pre">deform_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transform-streamlines">transform_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.transform_streamlines"><code class="docutils literal notranslate"><span class="pre">transform_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#select-random-set-of-streamlines">select_random_set_of_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.select_random_set_of_streamlines"><code class="docutils literal notranslate"><span class="pre">select_random_set_of_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#select-by-rois">select_by_rois</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.select_by_rois"><code class="docutils literal notranslate"><span class="pre">select_by_rois()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cluster-confidence">cluster_confidence</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.cluster_confidence"><code class="docutils literal notranslate"><span class="pre">cluster_confidence()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#orient-by-rois">orient_by_rois</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.orient_by_rois"><code class="docutils literal notranslate"><span class="pre">orient_by_rois()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#orient-by-streamline">orient_by_streamline</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.orient_by_streamline"><code class="docutils literal notranslate"><span class="pre">orient_by_streamline()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#values-from-volume">values_from_volume</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.values_from_volume"><code class="docutils literal notranslate"><span class="pre">values_from_volume()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nbytes">nbytes</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamline.nbytes"><code class="docutils literal notranslate"><span class="pre">nbytes()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streamlines"><code class="xref py py-class docutils literal notranslate"><span class="pre">Streamlines</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamlinespeed.Streamlines"><code class="docutils literal notranslate"><span class="pre">Streamlines</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#as-native-array">as_native_array</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamlinespeed.as_native_array"><code class="docutils literal notranslate"><span class="pre">as_native_array()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#compress-streamlines">compress_streamlines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamlinespeed.compress_streamlines"><code class="docutils literal notranslate"><span class="pre">compress_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">length</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamlinespeed.length"><code class="docutils literal notranslate"><span class="pre">length()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#set-number-of-points">set_number_of_points</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.streamlinespeed.set_number_of_points"><code class="docutils literal notranslate"><span class="pre">set_number_of_points()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#density-map">density_map</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.density_map"><code class="docutils literal notranslate"><span class="pre">density_map()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#connectivity-matrix">connectivity_matrix</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.connectivity_matrix"><code class="docutils literal notranslate"><span class="pre">connectivity_matrix()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ndbincount">ndbincount</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.ndbincount"><code class="docutils literal notranslate"><span class="pre">ndbincount()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reduce-labels">reduce_labels</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.reduce_labels"><code class="docutils literal notranslate"><span class="pre">reduce_labels()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#subsegment">subsegment</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.subsegment"><code class="docutils literal notranslate"><span class="pre">subsegment()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seeds-from-mask">seeds_from_mask</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.seeds_from_mask"><code class="docutils literal notranslate"><span class="pre">seeds_from_mask()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random-seeds-from-mask">random_seeds_from_mask</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.random_seeds_from_mask"><code class="docutils literal notranslate"><span class="pre">random_seeds_from_mask()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#target">target</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.target"><code class="docutils literal notranslate"><span class="pre">target()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#target-line-based">target_line_based</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.target_line_based"><code class="docutils literal notranslate"><span class="pre">target_line_based()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streamline-near-roi">streamline_near_roi</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.streamline_near_roi"><code class="docutils literal notranslate"><span class="pre">streamline_near_roi()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#near-roi">near_roi</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.near_roi"><code class="docutils literal notranslate"><span class="pre">near_roi()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id29">length</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.length"><code class="docutils literal notranslate"><span class="pre">length()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unique-rows">unique_rows</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.unique_rows"><code class="docutils literal notranslate"><span class="pre">unique_rows()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transform-tracking-output">transform_tracking_output</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.transform_tracking_output"><code class="docutils literal notranslate"><span class="pre">transform_tracking_output()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reduce-rois">reduce_rois</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.reduce_rois"><code class="docutils literal notranslate"><span class="pre">reduce_rois()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#path-length">path_length</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.path_length"><code class="docutils literal notranslate"><span class="pre">path_length()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#max-angle-from-curvature">max_angle_from_curvature</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.max_angle_from_curvature"><code class="docutils literal notranslate"><span class="pre">max_angle_from_curvature()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#min-radius-curvature-from-angle">min_radius_curvature_from_angle</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.min_radius_curvature_from_angle"><code class="docutils literal notranslate"><span class="pre">min_radius_curvature_from_angle()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seeds-directions-pairs">seeds_directions_pairs</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.utils.seeds_directions_pairs"><code class="docutils literal notranslate"><span class="pre">seeds_directions_pairs()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streamline-mapping">streamline_mapping</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.vox2track.streamline_mapping"><code class="docutils literal notranslate"><span class="pre">streamline_mapping()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#track-counts">track_counts</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dipy.tracking.vox2track.track_counts"><code class="docutils literal notranslate"><span class="pre">track_counts()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  
<script type="module" src="../_static/scripts/grg-sphinx-theme.js"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><div>
  <h3 class="footer-heading">
    Never miss an update from us!
  </h3>
  <p class="footer-sub-heading">
    Don't worry! we are not going to spam you.
  </p>
  <div class="input-group mb-3 mar-t-10">
    <input type="text" class="form-control" placeholder="You email" aria-label="You email" id="grg-subscribe-email">
    <div class="input-group-append pointer" onclick="(document.getElementById('grg-subscribe-email').value)">
      <span class="input-group-text subscribe">Subscribe</span>
    </div>
  </div>  
  <ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/dipy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/dipymri" title="Twitter/X" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter/X</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/c/diffusionimaginginpython" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.linkedin.com/company/dipy/" title="LinkedIn" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-linkedin fa-lg" aria-hidden="true"></i>
            <span class="sr-only">LinkedIn</span></a>
        </li>
</ul>
</div></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="grid-3">
  
  <div>
    <h5 class="footer-heading">
      About
    </h5>
    <ul class="footer-section">
      
        
        <li class="pad-v-5">
          <a href="https://dipy.org/team">
            Developers
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="https://github.com/dipy/dipy/discussions" target="_blank" rel="noopener noreferrer">
            Support
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../user_guide/installation.html">
            Download
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../user_guide/getting_started.html">
            Get Started
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../examples_built/index.html">
            Tutorials
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="https://www.youtube.com/c/diffusionimaginginpython" target="_blank" rel="noopener noreferrer">
            Videos
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
    </ul>
  </div>
  
  <div>
    <h5 class="footer-heading">
      Friends
    </h5>
    <ul class="footer-section">
      
        
        <li class="pad-v-5">
          <a href="http://nipy.org/" target="_blank" rel="noopener noreferrer">
            Nipy Projects
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="http://fury.gl/" target="_blank" rel="noopener noreferrer">
            FURY
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="http://nipy.org/nibabel" target="_blank" rel="noopener noreferrer">
            Nibabel
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="https://tortoise.nibib.nih.gov/" target="_blank" rel="noopener noreferrer">
            Tortoise
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
    </ul>
  </div>
  
  <div>
    <h5 class="footer-heading">
      Support
    </h5>
    <ul class="footer-section">
      
        
        <li class="pad-v-5">
          <a href="https://engineering.indiana.edu/" target="_blank" rel="noopener noreferrer">
            The department of Intelligent Systems Engineering of Indiana University
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="https://www.nibib.nih.gov/" target="_blank" rel="noopener noreferrer">
            The National Institute of Biomedical Imaging and Bioengineering, NIH
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="https://escience.washington.edu" target="_blank" rel="noopener noreferrer">
            The Gordon and Betty Moore Foundation and the Alfred P. Sloan Foundation, through the University of Washington eScience Institute Data Science Environment
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="https://summerofcode.withgoogle.com/" target="_blank" rel="noopener noreferrer">
            Google supported DIPY through the Google Summer of Code Program (2015-2024)
            <i class="fa-solid fa-arrow-up-long mar-l-5"></i>
          </a>
        </li>
        
      
    </ul>
  </div>
  
</div></div>
      
    </div>
  
</div>

    <div class="copyright-text">
      <i class="fa-regular fa-copyright"></i> Copyright 2008-2024,DIPY developers. Created using Grg Sphinx Theme and PyData Sphinx Theme.
    </div>
  </footer>
  </body>
</html>