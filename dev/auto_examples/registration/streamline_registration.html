
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>DIPY &#8212; dipy 1.8.0dev0 documentation</title>
  
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/dipy.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

  
<link rel="stylesheet" href="../../_static/styles/grg-sphinx-theme.css"/>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'auto_examples/registration/streamline_registration';</script>
    <link rel="icon" href="../../_static/dipy-favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="keywords" content="DIPY, dMRI, DTI, DSI, diffusion MRI, Tensor,
  neuroimaging, python, neuroscience, Eleftherios, Garyfallidis, tractography,
  streamlines, fiber tracking">

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
<nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/dipy-logo.png" class="logo__image only-light" alt="DIPY"/>
    <script>document.write(`<img src="../../_static/dipy-logo.png" class="logo__image only-dark" alt="DIPY"/>`);</script>
  
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  
  <ul class="bd-navbar-elements navbar-nav">
    
          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Docs
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
        <li class="nav-item">
          <a class="nav-link" href="https://docs.dipy.org">
            Quick Start
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://docs.dipy.org/tutorials">
            Tutorials
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://docs.dipy.org/recipes">
            Recipes
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://docs.dipy.org/cli">
            CLI / Workflows
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://docs.dipy.org/reference">
            API
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://docs.dipy.org/cli/reference">
            CLI API
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Workshops
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Latest
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2024" target="_blank">
            DIPY Workshop 2024 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Past
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2023" target="_blank">
            DIPY Workshop 2023 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2022" target="_blank">
            DIPY Workshop 2022 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2021" target="_blank">
            DIPY Workshop 2021 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2020" target="_blank">
            DIPY Workshop 2020 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2019" target="_blank">
            DIPY Workshop 2019 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Community
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
    <li class="nav-item">
      <p class="nav-section-title nav-link">
        News
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://mail.python.org/mailman3/lists/dipy.python.org/" target="_blank">
            Newsletters <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

      <li class="nav-item">
        <a class="nav-link" href="../../blog.html">
          Blog
        </a>
      </li>

        <li class="nav-item">
          <a class="nav-link" href="https://www.youtube.com/c/diffusionimaginginpython" target="_blank">
            Youtube <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Help
      </p>
    </li>

      <li class="nav-item">
        <a class="nav-link" href="../../https%3A//app.gitter.im/%23/room/%2523dipy_dipy%3Agitter.im.html">
          Live Chat (Gitter)
        </a>
      </li>

        <li class="nav-item">
          <a class="nav-link" href="https://github.com/dipy/dipy/discussions" target="_blank">
            Github Discussions <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    About
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
      <li class="nav-item">
        <a class="nav-link" href="../../team.html">
          Team
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../faq.html">
          FAQ
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../mission.html">
          Mission Statement
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../releases.html">
          Releases
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../cite.html">
          Cite
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../glossary.html">
          Glossary
        </a>
      </li>
                </ul>
            </li>
          
  </ul>
  
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/dipy" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/dipymri" title="Twitter/X" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-twitter"></i></span>
            <label class="sr-only">Twitter/X</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/c/diffusionimaginginpython" title="YouTube" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-youtube"></i></span>
            <label class="sr-only">YouTube</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.linkedin.com/company/dipy/" title="LinkedIn" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-linkedin"></i></span>
            <label class="sr-only">LinkedIn</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

</nav>
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  
  <ul class="bd-navbar-elements navbar-nav">
    
          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Docs
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
        <li class="nav-item">
          <a class="nav-link" href="https://docs.dipy.org">
            Quick Start
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://docs.dipy.org/tutorials">
            Tutorials
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://docs.dipy.org/recipes">
            Recipes
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://docs.dipy.org/cli">
            CLI / Workflows
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://docs.dipy.org/reference">
            API
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://docs.dipy.org/cli/reference">
            CLI API
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Workshops
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Latest
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2024" target="_blank">
            DIPY Workshop 2024 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Past
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2023" target="_blank">
            DIPY Workshop 2023 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2022" target="_blank">
            DIPY Workshop 2022 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2021" target="_blank">
            DIPY Workshop 2021 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2020" target="_blank">
            DIPY Workshop 2020 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://dipy.org/workshops/dipy-workshop-2019" target="_blank">
            DIPY Workshop 2019 <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    Community
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
    <li class="nav-item">
      <p class="nav-section-title nav-link">
        News
      </p>
    </li>

        <li class="nav-item">
          <a class="nav-link" href="https://mail.python.org/mailman3/lists/dipy.python.org/" target="_blank">
            Newsletters <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

      <li class="nav-item">
        <a class="nav-link" href="../../blog.html">
          Blog
        </a>
      </li>

        <li class="nav-item">
          <a class="nav-link" href="https://www.youtube.com/c/diffusionimaginginpython" target="_blank">
            Youtube <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>

    <li class="nav-item">
      <p class="nav-section-title nav-link">
        Help
      </p>
    </li>

      <li class="nav-item">
        <a class="nav-link" href="../../https%3A//app.gitter.im/%23/room/%2523dipy_dipy%3Agitter.im.html">
          Live Chat (Gitter)
        </a>
      </li>

        <li class="nav-item">
          <a class="nav-link" href="https://github.com/dipy/dipy/discussions" target="_blank">
            Github Discussions <i class="fa-solid fa-arrow-up-long external-icon mar-l-5"></i>
          </a>
        </li>
                </ul>
            </li>
          

          <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-header-nav-more-links">
                    About
                </button>
                <ul id="pst-header-nav-more-links" class="dropdown-menu">
                    
      <li class="nav-item">
        <a class="nav-link" href="../../team.html">
          Team
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../faq.html">
          FAQ
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../mission.html">
          Mission Statement
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../releases.html">
          Releases
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../cite.html">
          Cite
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../glossary.html">
          Glossary
        </a>
      </li>
                </ul>
            </li>
          
  </ul>
  
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/dipy" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/dipymri" title="Twitter/X" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-twitter"></i></span>
            <label class="sr-only">Twitter/X</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/c/diffusionimaginginpython" title="YouTube" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-youtube"></i></span>
            <label class="sr-only">YouTube</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.linkedin.com/company/dipy/" title="LinkedIn" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-linkedin"></i></span>
            <label class="sr-only">LinkedIn</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="bundle_group_registration.html">Groupwise Bundle Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="bundle_registration.html">Direct Bundle Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="syn_registration_3d.html">Symmetric Diffeomorphic Registration in 3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="register_binary_fuzzy.html">Diffeomorphic Registration with binary and fuzzy images</a></li>
<li class="toctree-l1"><a class="reference internal" href="syn_registration_2d.html">Symmetric Diffeomorphic Registration in 2D</a></li>
<li class="toctree-l1"><a class="reference internal" href="bundlewarp_registration.html">Nonrigid Bundle Registration with BundleWarp</a></li>
<li class="toctree-l1"><a class="reference internal" href="affine_registration_masks.html">Affine Registration with Masks</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Applying image-based deformations to streamlines</a></li>
<li class="toctree-l1"><a class="reference internal" href="affine_registration_3d.html">Affine Registration in 3D</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">DIPY</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-auto-examples-registration-streamline-registration-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="applying-image-based-deformations-to-streamlines">
<span id="sphx-glr-auto-examples-registration-streamline-registration-py"></span><h1>Applying image-based deformations to streamlines<a class="headerlink" href="#applying-image-based-deformations-to-streamlines" title="Permalink to this heading">#</a></h1>
<p>This example shows how to register streamlines into a template space by
applying non-rigid deformations.</p>
<p>At times we will be interested in bringing a set of streamlines into some
common, reference space to compute statistics out of the registered
streamlines. For a discussion on the effects of spatial normalization
approaches on tractography the work by Green et al. <a class="reference internal" href="#greene17" id="id1"><span>[Greene17]</span></a> can be read.</p>
<p>For brevity, we will include in this example only streamlines going through
the corpus callosum connecting left to right superior frontal cortex. The
process of tracking and finding these streamlines is fully demonstrated in
the <a class="reference internal" href="../streamline_analysis/streamline_tools.html#streamline-tools"><span class="std std-ref">Connectivity Matrices, ROI Intersections and Density Maps</span></a> example. If this example has been run, we can read
the streamlines from file. Otherwise, we’ll run that example first, by
importing it. This provides us with all of the variables that were created in
that example.</p>
<p>In order to get the deformation field, we will first use two b0 volumes. Both
moving and static images are assumed to be in RAS. The first one will be the
b0 from the Stanford HARDI dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span> <span class="k">as</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">pjoin</span></a>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">nibabel</span> <span class="k">as</span> <span class="nn">nib</span>

<span class="kn">from</span> <span class="nn">dipy.core.gradients</span> <span class="kn">import</span> <a href="../../reference/dipy.core.html#dipy.core.gradients.gradient_table" title="dipy.core.gradients.gradient_table" class="sphx-glr-backref-module-dipy-core-gradients sphx-glr-backref-type-py-function"><span class="n">gradient_table</span></a>
<span class="kn">from</span> <span class="nn">dipy.data</span> <span class="kn">import</span> <span class="n">get_fnames</span>
<span class="kn">from</span> <span class="nn">dipy.io.gradients</span> <span class="kn">import</span> <span class="n">read_bvals_bvecs</span>
<span class="kn">from</span> <span class="nn">dipy.io.image</span> <span class="kn">import</span> <span class="n">load_nifti_data</span><span class="p">,</span> <a href="../../reference/dipy.io.html#dipy.io.image.load_nifti" title="dipy.io.image.load_nifti" class="sphx-glr-backref-module-dipy-io-image sphx-glr-backref-type-py-function"><span class="n">load_nifti</span></a><span class="p">,</span> <span class="n">save_nifti</span>

<span class="n">hardi_fname</span><span class="p">,</span> <span class="n">hardi_bval_fname</span><span class="p">,</span> <span class="n">hardi_bvec_fname</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="s1">&#39;stanford_hardi&#39;</span><span class="p">)</span>

<span class="n">data</span><span class="p">,</span> <span class="n">affine</span><span class="p">,</span> <span class="n">hardi_img</span> <span class="o">=</span> <a href="../../reference/dipy.io.html#dipy.io.image.load_nifti" title="dipy.io.image.load_nifti" class="sphx-glr-backref-module-dipy-io-image sphx-glr-backref-type-py-function"><span class="n">load_nifti</span></a><span class="p">(</span><span class="n">hardi_fname</span><span class="p">,</span> <span class="n">return_img</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">vox_size</span> <span class="o">=</span> <span class="n">hardi_img</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">get_zooms</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span> <span class="o">=</span> <span class="n">read_bvals_bvecs</span><span class="p">(</span><span class="n">hardi_bval_fname</span><span class="p">,</span> <span class="n">hardi_bvec_fname</span><span class="p">)</span>
<span class="n">gtab</span> <span class="o">=</span> <a href="../../reference/dipy.core.html#dipy.core.gradients.gradient_table" title="dipy.core.gradients.gradient_table" class="sphx-glr-backref-module-dipy-core-gradients sphx-glr-backref-type-py-function"><span class="n">gradient_table</span></a><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="p">)</span>
</pre></div>
</div>
<p>The second one will be the T2-contrast MNI template image, which we’ll need to
reslice to 2x2x2 mm isotropic voxel resolution to match the HARDI data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dipy.data.fetcher</span> <span class="kn">import</span> <span class="p">(</span><span class="n">fetch_mni_template</span><span class="p">,</span> <span class="n">read_mni_template</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">dipy.align.reslice</span> <span class="kn">import</span> <a href="../../reference/dipy.align.html#dipy.align.reslice.reslice" title="dipy.align.reslice.reslice" class="sphx-glr-backref-module-dipy-align-reslice sphx-glr-backref-type-py-function"><span class="n">reslice</span></a>

<span class="n">fetch_mni_template</span><span class="p">()</span>
<span class="n">img_t2_mni</span> <span class="o">=</span> <span class="n">read_mni_template</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">contrast</span><span class="o">=</span><span class="s2">&quot;T2&quot;</span><span class="p">)</span>

<span class="n">new_zooms</span> <span class="o">=</span> <span class="p">(</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">)</span>
<span class="n">data2</span><span class="p">,</span> <span class="n">affine2</span> <span class="o">=</span> <a href="../../reference/dipy.align.html#dipy.align.reslice.reslice" title="dipy.align.reslice.reslice" class="sphx-glr-backref-module-dipy-align-reslice sphx-glr-backref-type-py-function"><span class="n">reslice</span></a><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">img_t2_mni</span><span class="o">.</span><span class="n">dataobj</span><span class="p">),</span> <span class="n">img_t2_mni</span><span class="o">.</span><span class="n">affine</span><span class="p">,</span>
                         <span class="n">img_t2_mni</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">get_zooms</span><span class="p">(),</span> <span class="n">new_zooms</span><span class="p">)</span>
<span class="n">img_t2_mni</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">Nifti1Image</span><span class="p">(</span><span class="n">data2</span><span class="p">,</span> <span class="n">affine</span><span class="o">=</span><span class="n">affine2</span><span class="p">)</span>
</pre></div>
</div>
<p>We filter the diffusion data from the Stanford HARDI dataset to find all the b0
images.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">b0_idx_stanford</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">gtab</span><span class="o">.</span><span class="n">b0s_mask</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">b0_data_stanford</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">b0_idx_stanford</span><span class="p">]</span>
</pre></div>
</div>
<p>We then remove the skull from them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dipy.segment.mask</span> <span class="kn">import</span> <a href="../../reference/dipy.segment.html#dipy.segment.mask.median_otsu" title="dipy.segment.mask.median_otsu" class="sphx-glr-backref-module-dipy-segment-mask sphx-glr-backref-type-py-function"><span class="n">median_otsu</span></a>

<span class="n">b0_masked_stanford</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <a href="../../reference/dipy.segment.html#dipy.segment.mask.median_otsu" title="dipy.segment.mask.median_otsu" class="sphx-glr-backref-module-dipy-segment-mask sphx-glr-backref-type-py-function"><span class="n">median_otsu</span></a><span class="p">(</span><span class="n">b0_data_stanford</span><span class="p">,</span>
                <span class="n">vol_idx</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">b0_data_stanford</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])),</span>
                <span class="n">median_radius</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">numpass</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>And go on to compute the Stanford HARDI dataset mean b0 image.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mean_b0_masked_stanford</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">b0_masked_stanford</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                                  <span class="n">dtype</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
</pre></div>
</div>
<p>We will register the mean b0 to the MNI T2 image template non-rigidly to
obtain the deformation field that will be applied to the streamlines. This is
just one of the strategies that can be used to obtain an appropriate
deformation field. Other strategies include computing an FA template map as
the static image, and registering the FA map of the moving image to it. This
may may eventually lead to results with improved accuracy, since a T2-contrast
template image as the target for normalization does not provide optimal tissue
contrast for maximal SyN performance.</p>
<p>We will first perform an affine registration to roughly align the two volumes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dipy.align.imaffine</span> <span class="kn">import</span> <span class="p">(</span><a href="../../reference/dipy.align.html#dipy.align.imaffine.MutualInformationMetric" title="dipy.align.imaffine.MutualInformationMetric" class="sphx-glr-backref-module-dipy-align-imaffine sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">MutualInformationMetric</span></a><span class="p">,</span> <a href="../../reference/dipy.align.html#dipy.align.imaffine.AffineRegistration" title="dipy.align.imaffine.AffineRegistration" class="sphx-glr-backref-module-dipy-align-imaffine sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">AffineRegistration</span></a><span class="p">,</span>
                                 <a href="../../reference/dipy.align.html#dipy.align.imaffine.transform_origins" title="dipy.align.imaffine.transform_origins" class="sphx-glr-backref-module-dipy-align-imaffine sphx-glr-backref-type-py-function"><span class="n">transform_origins</span></a><span class="p">)</span>
<span class="kn">from</span> <span class="nn">dipy.align.transforms</span> <span class="kn">import</span> <span class="p">(</span><span class="n">TranslationTransform3D</span><span class="p">,</span> <span class="n">RigidTransform3D</span><span class="p">,</span>
                                   <span class="n">AffineTransform3D</span><span class="p">)</span>

<span class="n">static</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">img_t2_mni</span><span class="o">.</span><span class="n">dataobj</span><span class="p">)</span>
<span class="n">static_affine</span> <span class="o">=</span> <span class="n">img_t2_mni</span><span class="o">.</span><span class="n">affine</span>
<span class="n">moving</span> <span class="o">=</span> <span class="n">mean_b0_masked_stanford</span>
<span class="n">moving_affine</span> <span class="o">=</span> <span class="n">hardi_img</span><span class="o">.</span><span class="n">affine</span>
</pre></div>
</div>
<p>We estimate an affine that maps the origin of the moving image to that of the
static image. We can then use this later to account for the offsets of each
image.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">affine_map</span> <span class="o">=</span> <a href="../../reference/dipy.align.html#dipy.align.imaffine.transform_origins" title="dipy.align.imaffine.transform_origins" class="sphx-glr-backref-module-dipy-align-imaffine sphx-glr-backref-type-py-function"><span class="n">transform_origins</span></a><span class="p">(</span><span class="n">static</span><span class="p">,</span> <span class="n">static_affine</span><span class="p">,</span> <span class="n">moving</span><span class="p">,</span> <span class="n">moving_affine</span><span class="p">)</span>
</pre></div>
</div>
<p>We specify the mismatch metric:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nbins</span> <span class="o">=</span> <span class="mi">32</span>
<span class="n">sampling_prop</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">metric</span> <span class="o">=</span> <a href="../../reference/dipy.align.html#dipy.align.imaffine.MutualInformationMetric" title="dipy.align.imaffine.MutualInformationMetric" class="sphx-glr-backref-module-dipy-align-imaffine sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">MutualInformationMetric</span></a><span class="p">(</span><span class="n">nbins</span><span class="p">,</span> <span class="n">sampling_prop</span><span class="p">)</span>
</pre></div>
</div>
<p>As well as the optimization strategy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">level_iters</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">sigmas</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
<span class="n">factors</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">affine_reg</span> <span class="o">=</span> <a href="../../reference/dipy.align.html#dipy.align.imaffine.AffineRegistration" title="dipy.align.imaffine.AffineRegistration" class="sphx-glr-backref-module-dipy-align-imaffine sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">AffineRegistration</span></a><span class="p">(</span><span class="n">metric</span><span class="o">=</span><span class="n">metric</span><span class="p">,</span> <span class="n">level_iters</span><span class="o">=</span><span class="n">level_iters</span><span class="p">,</span>
                                <span class="n">sigmas</span><span class="o">=</span><span class="n">sigmas</span><span class="p">,</span> <span class="n">factors</span><span class="o">=</span><span class="n">factors</span><span class="p">)</span>
<span class="n">transform</span> <span class="o">=</span> <span class="n">TranslationTransform3D</span><span class="p">()</span>

<span class="n">params0</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">translation</span> <span class="o">=</span> <span class="n">affine_reg</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">static</span><span class="p">,</span> <span class="n">moving</span><span class="p">,</span> <span class="n">transform</span><span class="p">,</span> <span class="n">params0</span><span class="p">,</span>
                                  <span class="n">static_affine</span><span class="p">,</span> <span class="n">moving_affine</span><span class="p">)</span>
<span class="n">transformed</span> <span class="o">=</span> <span class="n">translation</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">moving</span><span class="p">)</span>
<span class="n">transform</span> <span class="o">=</span> <span class="n">RigidTransform3D</span><span class="p">()</span>

<span class="n">rigid_map</span> <span class="o">=</span> <span class="n">affine_reg</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">static</span><span class="p">,</span> <span class="n">moving</span><span class="p">,</span> <span class="n">transform</span><span class="p">,</span> <span class="n">params0</span><span class="p">,</span>
                                <span class="n">static_affine</span><span class="p">,</span> <span class="n">moving_affine</span><span class="p">,</span>
                                <span class="n">starting_affine</span><span class="o">=</span><span class="n">translation</span><span class="o">.</span><span class="n">affine</span><span class="p">)</span>
<span class="n">transformed</span> <span class="o">=</span> <span class="n">rigid_map</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">moving</span><span class="p">)</span>
<span class="n">transform</span> <span class="o">=</span> <span class="n">AffineTransform3D</span><span class="p">()</span>
</pre></div>
</div>
<p>We bump up the iterations to get a more exact fit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">affine_reg</span><span class="o">.</span><span class="n">level_iters</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="n">highres_map</span> <span class="o">=</span> <span class="n">affine_reg</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">static</span><span class="p">,</span> <span class="n">moving</span><span class="p">,</span> <span class="n">transform</span><span class="p">,</span> <span class="n">params0</span><span class="p">,</span>
                                  <span class="n">static_affine</span><span class="p">,</span> <span class="n">moving_affine</span><span class="p">,</span>
                                  <span class="n">starting_affine</span><span class="o">=</span><span class="n">rigid_map</span><span class="o">.</span><span class="n">affine</span><span class="p">)</span>
<span class="n">transformed</span> <span class="o">=</span> <span class="n">highres_map</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">moving</span><span class="p">)</span>
</pre></div>
</div>
<p>We now perform the non-rigid deformation using the Symmetric Diffeomorphic
Registration (SyN) Algorithm proposed by Avants et al. <a class="reference internal" href="../../interfaces/registration_flow.html#avants09" id="id2"><span>[Avants09]</span></a> (also
implemented in the ANTs software <a class="reference internal" href="../../interfaces/registration_flow.html#avants11" id="id3"><span>[Avants11]</span></a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dipy.align.imwarp</span> <span class="kn">import</span> <a href="../../reference/dipy.align.html#dipy.align.imwarp.SymmetricDiffeomorphicRegistration" title="dipy.align.imwarp.SymmetricDiffeomorphicRegistration" class="sphx-glr-backref-module-dipy-align-imwarp sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">SymmetricDiffeomorphicRegistration</span></a>
<span class="kn">from</span> <span class="nn">dipy.align.metrics</span> <span class="kn">import</span> <a href="../../reference/dipy.align.html#dipy.align.metrics.CCMetric" title="dipy.align.metrics.CCMetric" class="sphx-glr-backref-module-dipy-align-metrics sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">CCMetric</span></a>

<span class="n">metric</span> <span class="o">=</span> <a href="../../reference/dipy.align.html#dipy.align.metrics.CCMetric" title="dipy.align.metrics.CCMetric" class="sphx-glr-backref-module-dipy-align-metrics sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">CCMetric</span></a><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">level_iters</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">sdr</span> <span class="o">=</span> <a href="../../reference/dipy.align.html#dipy.align.imwarp.SymmetricDiffeomorphicRegistration" title="dipy.align.imwarp.SymmetricDiffeomorphicRegistration" class="sphx-glr-backref-module-dipy-align-imwarp sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">SymmetricDiffeomorphicRegistration</span></a><span class="p">(</span><span class="n">metric</span><span class="p">,</span> <span class="n">level_iters</span><span class="p">)</span>

<span class="n">mapping</span> <span class="o">=</span> <span class="n">sdr</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">static</span><span class="p">,</span> <span class="n">moving</span><span class="p">,</span> <span class="n">static_affine</span><span class="p">,</span> <span class="n">moving_affine</span><span class="p">,</span>
                       <span class="n">highres_map</span><span class="o">.</span><span class="n">affine</span><span class="p">)</span>
<span class="n">warped_moving</span> <span class="o">=</span> <span class="n">mapping</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">moving</span><span class="p">)</span>
</pre></div>
</div>
<p>We show the registration result with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dipy.viz</span> <span class="kn">import</span> <span class="n">regtools</span>

<a href="../../reference/dipy.viz.html#dipy.viz.regtools.overlay_slices" title="dipy.viz.regtools.overlay_slices" class="sphx-glr-backref-module-dipy-viz-regtools sphx-glr-backref-type-py-function"><span class="n">regtools</span><span class="o">.</span><span class="n">overlay_slices</span></a><span class="p">(</span><span class="n">static</span><span class="p">,</span> <span class="n">warped_moving</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Static&#39;</span><span class="p">,</span> <span class="s1">&#39;Moving&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;transformed_sagittal.png&#39;</span><span class="p">)</span>
<a href="../../reference/dipy.viz.html#dipy.viz.regtools.overlay_slices" title="dipy.viz.regtools.overlay_slices" class="sphx-glr-backref-module-dipy-viz-regtools sphx-glr-backref-type-py-function"><span class="n">regtools</span><span class="o">.</span><span class="n">overlay_slices</span></a><span class="p">(</span><span class="n">static</span><span class="p">,</span> <span class="n">warped_moving</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Static&#39;</span><span class="p">,</span> <span class="s1">&#39;Moving&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;transformed_coronal.png&#39;</span><span class="p">)</span>
<a href="../../reference/dipy.viz.html#dipy.viz.regtools.overlay_slices" title="dipy.viz.regtools.overlay_slices" class="sphx-glr-backref-module-dipy-viz-regtools sphx-glr-backref-type-py-function"><span class="n">regtools</span><span class="o">.</span><span class="n">overlay_slices</span></a><span class="p">(</span><span class="n">static</span><span class="p">,</span> <span class="n">warped_moving</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Static&#39;</span><span class="p">,</span> <span class="s1">&#39;Moving&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;transformed_axial.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center">
<img alt="auto_examples/registration/transformed_sagittal.png" src="auto_examples/registration/transformed_sagittal.png" />
</figure>
<figure class="align-center">
<img alt="auto_examples/registration/transformed_coronal.png" src="auto_examples/registration/transformed_coronal.png" />
</figure>
<figure class="align-center" id="id5">
<img alt="auto_examples/registration/transformed_axial.png" src="auto_examples/registration/transformed_axial.png" />
<figcaption>
<p><span class="caption-text">Deformable registration result.</span><a class="headerlink" href="#id5" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Let’s now fetch a set of streamlines from the Stanford HARDI dataset.
Those streamlines were generated during the <a class="reference internal" href="../streamline_analysis/streamline_tools.html#streamline-tools"><span class="std std-ref">Connectivity Matrices, ROI Intersections and Density Maps</span></a> example.</p>
<p>We read the streamlines from file in voxel space:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dipy.data</span> <span class="kn">import</span> <span class="n">fetch_stanford_tracks</span>
<span class="kn">from</span> <span class="nn">dipy.io.streamline</span> <span class="kn">import</span> <a href="../../reference/dipy.io.html#dipy.io.streamline.load_tractogram" title="dipy.io.streamline.load_tractogram" class="sphx-glr-backref-module-dipy-io-streamline sphx-glr-backref-type-py-function"><span class="n">load_tractogram</span></a>


<span class="n">streamlines_files</span> <span class="o">=</span> <span class="n">fetch_stanford_tracks</span><span class="p">()</span>
<span class="n">lr_superiorfrontal_path</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">pjoin</span></a><span class="p">(</span><span class="n">streamlines_files</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                <span class="s1">&#39;hardi-lr-superiorfrontal.trk&#39;</span><span class="p">)</span>

<span class="n">sft</span> <span class="o">=</span> <a href="../../reference/dipy.io.html#dipy.io.streamline.load_tractogram" title="dipy.io.streamline.load_tractogram" class="sphx-glr-backref-module-dipy-io-streamline sphx-glr-backref-type-py-function"><span class="n">load_tractogram</span></a><span class="p">(</span><span class="n">lr_superiorfrontal_path</span><span class="p">,</span> <span class="s1">&#39;same&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We then apply the obtained deformation field to the streamlines. Note that the
process can be sensitive to image orientation and voxel resolution. Thus, we
first apply the non-rigid warping and simultaneously apply a computed rigid
affine transformation whose extents must be corrected to account for the
different voxel grids of the moving and static images.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dipy.tracking.streamline</span> <span class="kn">import</span> <a href="../../reference/dipy.tracking.html#dipy.tracking.streamline.deform_streamlines" title="dipy.tracking.streamline.deform_streamlines" class="sphx-glr-backref-module-dipy-tracking-streamline sphx-glr-backref-type-py-function"><span class="n">deform_streamlines</span></a>

<span class="c1"># Create an isocentered affine</span>
<span class="n">target_isocenter</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="n">vox_size</span><span class="p">,</span> <span class="n">vox_size</span><span class="p">,</span> <span class="n">vox_size</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>

<span class="c1"># Take the off-origin affine capturing the extent contrast between the mean b0</span>
<span class="c1"># image and the template</span>
<span class="n">origin_affine</span> <span class="o">=</span> <span class="n">affine_map</span><span class="o">.</span><span class="n">affine</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
<p>In order to align the FOV of the template and the mirror image of the
streamlines, we first need to flip the sign on the x-offset and y-offset so
that we get the mirror image of the forward deformation field.</p>
<p>We need to use the information about the origin offsets (i.e. between the
static and moving images) that we obtained using <code class="xref py py-meth docutils literal notranslate"><span class="pre">transform_origins()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">origin_affine</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">origin_affine</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>
<span class="n">origin_affine</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">origin_affine</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">transform_origins()</span></code> returns this affine transformation with (1, 1, 1)
zooms and not (2, 2, 2), which means that the offsets need to be scaled by 2.
Thus, we scale z by the voxel size:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">origin_affine</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">origin_affine</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span><span class="o">/</span><span class="n">vox_size</span>
</pre></div>
</div>
<p>But when scaling the z-offset, we are also implicitly scaling the y-offset as
well (by 1/2).Thus we need to correct for this by only scaling the y by the
square of the voxel size (1/4, and not 1/2):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">origin_affine</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">origin_affine</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span><span class="o">/</span><span class="n">vox_size</span><span class="o">**</span><span class="mi">2</span>

<span class="c1"># Apply the deformation and correct for the extents</span>
<span class="n">mni_streamlines</span> <span class="o">=</span> <a href="../../reference/dipy.tracking.html#dipy.tracking.streamline.deform_streamlines" title="dipy.tracking.streamline.deform_streamlines" class="sphx-glr-backref-module-dipy-tracking-streamline sphx-glr-backref-type-py-function"><span class="n">deform_streamlines</span></a><span class="p">(</span>
    <span class="n">sft</span><span class="o">.</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">deform_field</span><span class="o">=</span><span class="n">mapping</span><span class="o">.</span><span class="n">get_forward_field</span><span class="p">(),</span>
    <span class="n">stream_to_current_grid</span><span class="o">=</span><span class="n">target_isocenter</span><span class="p">,</span>
    <span class="n">current_grid_to_world</span><span class="o">=</span><span class="n">origin_affine</span><span class="p">,</span> <span class="n">stream_to_ref_grid</span><span class="o">=</span><span class="n">target_isocenter</span><span class="p">,</span>
    <span class="n">ref_grid_to_world</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
<p>We display the original streamlines and the registered streamlines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dipy.viz</span> <span class="kn">import</span> <span class="n">has_fury</span>


<span class="k">def</span> <span class="nf">show_template_bundles</span><span class="p">(</span><span class="n">bundles</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fname</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

    <span class="n">scene</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">Scene</span><span class="p">()</span>
    <span class="n">template_actor</span> <span class="o">=</span> <span class="n">actor</span><span class="o">.</span><span class="n">slicer</span><span class="p">(</span><span class="n">static</span><span class="p">)</span>
    <span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">template_actor</span><span class="p">)</span>

    <span class="n">lines_actor</span> <span class="o">=</span> <span class="n">actor</span><span class="o">.</span><span class="n">streamtube</span><span class="p">(</span><span class="n">bundles</span><span class="p">,</span> <span class="n">window</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">orange</span><span class="p">,</span>
                                   <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">lines_actor</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">window</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">n_frames</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">out_path</span><span class="o">=</span><span class="n">fname</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">900</span><span class="p">,</span> <span class="mi">900</span><span class="p">))</span>


<span class="k">if</span> <span class="n">has_fury</span><span class="p">:</span>

    <span class="kn">from</span> <span class="nn">fury</span> <span class="kn">import</span> <span class="n">actor</span><span class="p">,</span> <span class="n">window</span>

    <span class="n">show_template_bundles</span><span class="p">(</span><span class="n">mni_streamlines</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">fname</span><span class="o">=</span><span class="s1">&#39;streamlines_DSN_MNI.png&#39;</span><span class="p">)</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    .. figure:: streamlines_DSN_MNI.png</span>
<span class="sd">       :align: center</span>

<span class="sd">       Streamlines before and after registration.</span>

<span class="sd">    The corpus callosum bundles have been deformed to adapt to the MNI</span>
<span class="sd">    template space.</span>

<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Finally, we save the registered streamlines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dipy.io.stateful_tractogram</span> <span class="kn">import</span> <span class="n">Space</span><span class="p">,</span> <a href="../../reference/dipy.io.html#dipy.io.stateful_tractogram.StatefulTractogram" title="dipy.io.stateful_tractogram.StatefulTractogram" class="sphx-glr-backref-module-dipy-io-stateful_tractogram sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">StatefulTractogram</span></a>
<span class="kn">from</span> <span class="nn">dipy.io.streamline</span> <span class="kn">import</span> <a href="../../reference/dipy.io.html#dipy.io.streamline.save_tractogram" title="dipy.io.streamline.save_tractogram" class="sphx-glr-backref-module-dipy-io-streamline sphx-glr-backref-type-py-function"><span class="n">save_tractogram</span></a>

<span class="n">sft</span> <span class="o">=</span> <a href="../../reference/dipy.io.html#dipy.io.stateful_tractogram.StatefulTractogram" title="dipy.io.stateful_tractogram.StatefulTractogram" class="sphx-glr-backref-module-dipy-io-stateful_tractogram sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">StatefulTractogram</span></a><span class="p">(</span><span class="n">mni_streamlines</span><span class="p">,</span> <span class="n">img_t2_mni</span><span class="p">,</span> <a href="../../reference/dipy.io.html#dipy.io.stateful_tractogram.Space.RASMM" title="dipy.io.stateful_tractogram.Space.RASMM" class="sphx-glr-backref-module-dipy-io-stateful_tractogram-Space sphx-glr-backref-type-py-attribute"><span class="n">Space</span><span class="o">.</span><span class="n">RASMM</span></a><span class="p">)</span>

<a href="../../reference/dipy.io.html#dipy.io.streamline.save_tractogram" title="dipy.io.streamline.save_tractogram" class="sphx-glr-backref-module-dipy-io-streamline sphx-glr-backref-type-py-function"><span class="n">save_tractogram</span></a><span class="p">(</span><span class="n">sft</span><span class="p">,</span> <span class="s1">&#39;mni-lr-superiorfrontal.trk&#39;</span><span class="p">,</span> <span class="n">bbox_valid_check</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading">#</a></h2>
<div role="list" class="citation-list">
<div class="citation" id="avants09" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">Avants09</a><span class="fn-bracket">]</span></span>
<p>Avants, B. B., Epstein, C. L., Grossman, M., &amp; Gee, J. C. (2009).
Symmetric Diffeomorphic Image Registration with Cross-Correlation:
Evaluating Automated Labeling of Elderly and Neurodegenerative Brain, 12(1),
26-41.</p>
</div>
<div class="citation" id="avants11" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">Avants11</a><span class="fn-bracket">]</span></span>
<p>Avants, B. B., Tustison, N., &amp; Song, G. (2011). Advanced
Normalization Tools (ANTS), 1-35.</p>
</div>
<div class="citation" id="greene17" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">Greene17</a><span class="fn-bracket">]</span></span>
<p>Greene, C., Cieslak, M., &amp; Grafton, S. T. (2017). Effect of
different spatial normalization approaches on tractography and structural
brain networks. Network Neuroscience, 1-19.</p>
</div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> (0 minutes 0.000 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-registration-streamline-registration-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/e571fe009a3e44ac1d0b0202739f89cb/streamline_registration.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">streamline_registration.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/f6cb3af1a8918d0174ae96468caa4955/streamline_registration.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">streamline_registration.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  
<script type="module" src="../../_static/scripts/grg-sphinx-theme.js"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><div>
  <h3 class="footer-heading">
    Never miss an update from us!
  </h3>
  <p class="footer-sub-heading">
    Don't worry! we are not going to spam you.
  </p>
  <div class="input-group mb-3 mar-t-10">
    <input type="text" class="form-control" placeholder="You email" aria-label="You email">
    <div class="input-group-append">
      <span class="input-group-text subscribe">Subscribe</span>
    </div>
  </div>  
  <ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/dipy" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/dipymri" title="Twitter/X" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-twitter"></i></span>
            <label class="sr-only">Twitter/X</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/c/diffusionimaginginpython" title="YouTube" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-youtube"></i></span>
            <label class="sr-only">YouTube</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.linkedin.com/company/dipy/" title="LinkedIn" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-linkedin"></i></span>
            <label class="sr-only">LinkedIn</label></a>
        </li>
</ul>
</div></div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="grid-3">
  
  <div>
    <h5 class="footer-heading">
      About
    </h5>
    <ul class="footer-section">
      
        
        <li class="pad-v-5">
          <a href="../../team.html">
            Developers
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../https%3A//github.com/dipy/dipy/discussions.html">
            Support
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../installation.html">
            Download
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../https%3A//dipy.org/contributors/.html">
            Get Started
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../https%3A//docs.dipy.org/tutorials/.html">
            Tutorials
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../https%3A//www.youtube.com/c/diffusionimaginginpython.html">
            Videos
          </a>
        </li>
        
      
    </ul>
  </div>
  
  <div>
    <h5 class="footer-heading">
      Friends
    </h5>
    <ul class="footer-section">
      
        
        <li class="pad-v-5">
          <a href="../../http%3A//nipy.org/.html">
            Nipy Projects
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../http%3A//fury.gl/.html">
            FURY
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../http%3A//nipy.org/nibabel.html">
            Nibabel
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../https%3A//tortoise.nibib.nih.gov/.html">
            Tortoise
          </a>
        </li>
        
      
    </ul>
  </div>
  
  <div>
    <h5 class="footer-heading">
      Support
    </h5>
    <ul class="footer-section">
      
        
        <li class="pad-v-5">
          <a href="../../https%3A//engineering.indiana.edu/.html">
            The department of Intelligent Systems Engineering of Indiana University
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../https%3A//www.nibib.nih.gov/.html">
            The National Institute of Biomedical Imaging and Bioengineering, NIH
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../https%3A//escience.washington.edu/tag/alfred-p-sloan-foundation/.html">
            The Gordon and Betty Moore Foundation and the Alfred P. Sloan Foundation, through the University of Washington eScience Institute Data Science Environment
          </a>
        </li>
        
      
        
        <li class="pad-v-5">
          <a href="../../https%3A//summerofcode.withgoogle.com/.html">
            Google supported DIPY through the Google Summer of Code Program during Summer 2015, 2016, 2018
          </a>
        </li>
        
      
    </ul>
  </div>
  
</div></div>
      
    </div>
  
</div>

    <div class="copyright-text">
      <i class="fa-regular fa-copyright"></i> Copyright 2008-2023, DIPY developers. Created using Grg Sphinx Theme and PyData Sphinx Theme.
    </div>
  </footer>
  </body>
</html>