
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>DIPY &#8212; dipy 1.8.0dev0 documentation</title>
  
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/dipy.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

  
<link rel="stylesheet" href="../../_static/styles/grg-sphinx-theme.css"/>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'auto_examples/segmentation/segment_clustering_features';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />

  <meta name="keywords" content="DIPY, dMRI, DTI, DSI, diffusion MRI, Tensor,
  neuroimaging, python, neuroscience, Eleftherios, Garyfallidis, tractography,
  streamlines, fiber tracking">




  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
<nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    <p class="title logo__title">dipy 1.8.0dev0 documentation</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../documentation.html">
                        Documentation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../stateoftheart.html">
                        A quick overview of features
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

</nav>
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../documentation.html">
                        Documentation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../stateoftheart.html">
                        A quick overview of features
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="brain_extraction_dwi_1.html">Brain segmentation with median_otsu</a></li>
<li class="toctree-l1"><a class="reference internal" href="segment_quickbundles.html">Tractography Clustering with QuickBundles</a></li>
<li class="toctree-l1"><a class="reference internal" href="tissue_classification.html">Tissue Classification of a T1-weighted Structural Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="segment_clustering_metrics.html">Tractography Clustering - Available Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="fast_streamline_search.html">Fast Streamline Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="segment_extending_clustering_framework.html">Enhancing QuickBundles with different metrics and features</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Tractography Clustering - Available Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="bundle_extraction.html">Automatic Fiber Bundle Extraction with RecoBundles</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">DIPY</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
<div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-segmentation-segment-clustering-features-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="tractography-clustering-available-features">
<span id="sphx-glr-auto-examples-segmentation-segment-clustering-features-py"></span><h1>Tractography Clustering - Available Features<a class="headerlink" href="#tractography-clustering-available-features" title="Permalink to this heading">#</a></h1>
<p>This page lists available features that can be used by the tractography
clustering framework. For every feature a brief description is provided
explaining: what it does, when it’s useful and how to use it. If you are not
familiar with the tractography clustering framework, read the
<a class="reference internal" href="../../examples_built/segmentation/segment_extending_clustering_framework.html#clustering-framework"><span class="std std-ref">Clustering framework</span></a> first.</p>
<nav class="contents local" id="available-features">
<p class="topic-title">Available Features</p>
<ul class="simple">
<li><p><a class="reference internal" href="#clustering-examples-identityfeature" id="id8">Identity Feature</a></p></li>
<li><p><a class="reference internal" href="#resample-feature" id="id9">Resample Feature</a></p></li>
<li><p><a class="reference internal" href="#center-of-mass-feature" id="id10">Center of Mass Feature</a></p></li>
<li><p><a class="reference internal" href="#midpoint-feature" id="id11">Midpoint Feature</a></p></li>
<li><p><a class="reference internal" href="#arclength-feature" id="id12">ArcLength Feature</a></p></li>
<li><p><a class="reference internal" href="#vector-between-endpoints-feature" id="id13">Vector Between Endpoints Feature</a></p></li>
</ul>
</nav>
<p><strong>Note</strong>:
All examples assume a function <cite>get_streamlines</cite> exists. We defined here a
simple function to do so. It imports the necessary modules and loads a small
streamline bundle.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_streamlines</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">dipy.data</span> <span class="kn">import</span> <span class="n">get_fnames</span>
    <span class="kn">from</span> <span class="nn">dipy.io.streamline</span> <span class="kn">import</span> <a href="../../reference/dipy.io.html#dipy.io.streamline.load_tractogram" title="dipy.io.streamline.load_tractogram" class="sphx-glr-backref-module-dipy-io-streamline sphx-glr-backref-type-py-function"><span class="n">load_tractogram</span></a>
    <span class="kn">from</span> <span class="nn">dipy.tracking.streamline</span> <span class="kn">import</span> <span class="n">Streamlines</span>

    <span class="n">fname</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="s1">&#39;fornix&#39;</span><span class="p">)</span>
    <span class="n">fornix</span> <span class="o">=</span> <a href="../../reference/dipy.io.html#dipy.io.streamline.load_tractogram" title="dipy.io.streamline.load_tractogram" class="sphx-glr-backref-module-dipy-io-streamline sphx-glr-backref-type-py-function"><span class="n">load_tractogram</span></a><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;same&#39;</span><span class="p">,</span>
                             <span class="n">bbox_valid_check</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">streamlines</span>

    <span class="n">streamlines</span> <span class="o">=</span> <span class="n">Streamlines</span><span class="p">(</span><span class="n">fornix</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">streamlines</span>
</pre></div>
</div>
<section id="clustering-examples-identityfeature">
<span id="identity-feature"></span><h2><a class="toc-backref" href="#id8" role="doc-backlink">Identity Feature</a><a class="headerlink" href="#clustering-examples-identityfeature" title="Permalink to this heading">#</a></h2>
<p><strong>What:</strong> Instances of <cite>IdentityFeature</cite> simply return the streamlines
unaltered.  In other words the features are the original data.</p>
<p><strong>When:</strong> The QuickBundles algorithm requires streamlines to have the same
number of points. If this is the case for your streamlines, you can tell
QuickBundles to not perform resampling (see following example). The clustering
should be faster than using the default behaviour of QuickBundles since it will
require less computation (i.e. no resampling). However, it highly depends
on the number of points streamlines have. By default, QuickBundles resamples
streamlines so that they have 12 points each <a class="reference internal" href="../../reference/dipy.segment.html#id110" id="id1"><span>[Garyfallidis12]</span></a>.</p>
<p><em>Unless stated otherwise, it is the default feature used by `Metric` objects
in the clustering framework.</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dipy.segment.clustering</span> <span class="kn">import</span> <a href="../../reference/dipy.segment.html#dipy.segment.clustering.QuickBundles" title="dipy.segment.clustering.QuickBundles" class="sphx-glr-backref-module-dipy-segment-clustering sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">QuickBundles</span></a>
<span class="kn">from</span> <span class="nn">dipy.segment.metric</span> <span class="kn">import</span> <span class="n">AveragePointwiseEuclideanMetric</span>
<span class="kn">from</span> <span class="nn">dipy.segment.featurespeed</span> <span class="kn">import</span> <span class="n">IdentityFeature</span>

<span class="c1"># Get some streamlines.</span>
<span class="n">streamlines</span> <span class="o">=</span> <span class="n">get_streamlines</span><span class="p">()</span>  <span class="c1"># Previously defined.</span>

<span class="c1"># Make sure our streamlines have the same number of points.</span>
<span class="kn">from</span> <span class="nn">dipy.tracking.streamline</span> <span class="kn">import</span> <span class="n">set_number_of_points</span>
<span class="n">streamlines</span> <span class="o">=</span> <span class="n">set_number_of_points</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">nb_points</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

<span class="c1"># Create an instance of `IdentityFeature` and tell metric to use it.</span>
<span class="n">feature</span> <span class="o">=</span> <span class="n">IdentityFeature</span><span class="p">()</span>
<span class="n">metric</span> <span class="o">=</span> <span class="n">AveragePointwiseEuclideanMetric</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="n">feature</span><span class="p">)</span>
<span class="n">qb</span> <span class="o">=</span> <a href="../../reference/dipy.segment.html#dipy.segment.clustering.QuickBundles" title="dipy.segment.clustering.QuickBundles" class="sphx-glr-backref-module-dipy-segment-clustering sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">QuickBundles</span></a><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="n">metric</span><span class="p">)</span>
<span class="n">clusters</span> <span class="o">=</span> <span class="n">qb</span><span class="o">.</span><span class="n">cluster</span><span class="p">(</span><span class="n">streamlines</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Nb. clusters:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">clusters</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Cluster sizes:&quot;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">clusters</span><span class="p">)))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Nb</span><span class="o">.</span> <span class="n">clusters</span><span class="p">:</span> <span class="mi">4</span>

<span class="n">Cluster</span> <span class="n">sizes</span><span class="p">:</span> <span class="p">[</span><span class="mi">64</span><span class="p">,</span> <span class="mi">191</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="resample-feature">
<span id="clustering-examples-resamplefeature"></span><h2><a class="toc-backref" href="#id9" role="doc-backlink">Resample Feature</a><a class="headerlink" href="#resample-feature" title="Permalink to this heading">#</a></h2>
<p><strong>What:</strong> Instances of <cite>ResampleFeature</cite> resample streamlines to a
predetermined number of points. The resampling is done on the fly such that
there are no permanent modifications made to your streamlines.</p>
<p><strong>When:</strong> The QuickBundles algorithm requires streamlines to have the same
number of points. By default, QuickBundles uses <cite>ResampleFeature</cite> to resample
streamlines so that they have 12 points each <a class="reference internal" href="../../reference/dipy.segment.html#id110" id="id2"><span>[Garyfallidis12]</span></a>. If you want to
use a different number of points for the resampling, you should provide your
own instance of <cite>ResampleFeature</cite> (see following example).</p>
<p><strong>Note:</strong> Resampling streamlines has an impact on clustering results both in
term of speed and quality. Setting the number of points too low will result in
a loss of information about the shape of the streamlines. On the contrary,
setting the number of points too high will slow down the clustering process.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dipy.segment.clustering</span> <span class="kn">import</span> <a href="../../reference/dipy.segment.html#dipy.segment.clustering.QuickBundles" title="dipy.segment.clustering.QuickBundles" class="sphx-glr-backref-module-dipy-segment-clustering sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">QuickBundles</span></a>
<span class="kn">from</span> <span class="nn">dipy.segment.featurespeed</span> <span class="kn">import</span> <span class="n">ResampleFeature</span>
<span class="kn">from</span> <span class="nn">dipy.segment.metric</span> <span class="kn">import</span> <span class="n">AveragePointwiseEuclideanMetric</span>

<span class="c1"># Get some streamlines.</span>
<span class="n">streamlines</span> <span class="o">=</span> <span class="n">get_streamlines</span><span class="p">()</span>  <span class="c1"># Previously defined.</span>

<span class="c1"># Streamlines will be resampled to 24 points on the fly.</span>
<span class="n">feature</span> <span class="o">=</span> <span class="n">ResampleFeature</span><span class="p">(</span><span class="n">nb_points</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>
<span class="n">metric</span> <span class="o">=</span> <span class="n">AveragePointwiseEuclideanMetric</span><span class="p">(</span><span class="n">feature</span><span class="o">=</span><span class="n">feature</span><span class="p">)</span>  <span class="c1"># a.k.a. MDF</span>
<span class="n">qb</span> <span class="o">=</span> <a href="../../reference/dipy.segment.html#dipy.segment.clustering.QuickBundles" title="dipy.segment.clustering.QuickBundles" class="sphx-glr-backref-module-dipy-segment-clustering sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">QuickBundles</span></a><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="n">metric</span><span class="p">)</span>
<span class="n">clusters</span> <span class="o">=</span> <span class="n">qb</span><span class="o">.</span><span class="n">cluster</span><span class="p">(</span><span class="n">streamlines</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Nb. clusters:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">clusters</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Cluster sizes:&quot;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">clusters</span><span class="p">)))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Nb</span><span class="o">.</span> <span class="n">clusters</span><span class="p">:</span> <span class="mi">4</span>

<span class="n">Cluster</span> <span class="n">sizes</span><span class="p">:</span> <span class="p">[</span><span class="mi">64</span><span class="p">,</span> <span class="mi">191</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="center-of-mass-feature">
<span id="clustering-examples-centerofmassfeature"></span><h2><a class="toc-backref" href="#id10" role="doc-backlink">Center of Mass Feature</a><a class="headerlink" href="#center-of-mass-feature" title="Permalink to this heading">#</a></h2>
<p><strong>What:</strong> Instances of <cite>CenterOfMassFeature</cite> compute the center of mass (also
known as center of gravity) of a set of points. This is achieved by taking the
mean of every coordinate independently (for more information see the
<a class="reference external" href="https://en.wikipedia.org/wiki/Center_of_mass">wiki page</a>).</p>
<p><strong>When:</strong> This feature can be useful when you <em>only</em> need information about the
spatial position of a streamline.</p>
<p><strong>Note:</strong> The computed center is not guaranteed to be an existing point in the
streamline.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">dipy.viz</span> <span class="kn">import</span> <span class="n">window</span><span class="p">,</span> <span class="n">actor</span><span class="p">,</span> <span class="n">colormap</span>
<span class="kn">from</span> <span class="nn">dipy.segment.clustering</span> <span class="kn">import</span> <a href="../../reference/dipy.segment.html#dipy.segment.clustering.QuickBundles" title="dipy.segment.clustering.QuickBundles" class="sphx-glr-backref-module-dipy-segment-clustering sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">QuickBundles</span></a>
<span class="kn">from</span> <span class="nn">dipy.segment.featurespeed</span> <span class="kn">import</span> <span class="n">CenterOfMassFeature</span>
<span class="kn">from</span> <span class="nn">dipy.segment.metric</span> <span class="kn">import</span> <span class="n">EuclideanMetric</span>

<span class="c1"># Enables/disables interactive visualization</span>
<span class="n">interactive</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># Get some streamlines.</span>
<span class="n">streamlines</span> <span class="o">=</span> <span class="n">get_streamlines</span><span class="p">()</span>  <span class="c1"># Previously defined.</span>


<span class="n">feature</span> <span class="o">=</span> <span class="n">CenterOfMassFeature</span><span class="p">()</span>
<span class="n">metric</span> <span class="o">=</span> <span class="n">EuclideanMetric</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>

<span class="n">qb</span> <span class="o">=</span> <a href="../../reference/dipy.segment.html#dipy.segment.clustering.QuickBundles" title="dipy.segment.clustering.QuickBundles" class="sphx-glr-backref-module-dipy-segment-clustering sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">QuickBundles</span></a><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="mf">5.</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="n">metric</span><span class="p">)</span>
<span class="n">clusters</span> <span class="o">=</span> <span class="n">qb</span><span class="o">.</span><span class="n">cluster</span><span class="p">(</span><span class="n">streamlines</span><span class="p">)</span>

<span class="c1"># Extract feature of every streamline.</span>
<span class="n">centers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">feature</span><span class="o">.</span><span class="n">extract</span><span class="p">,</span> <span class="n">streamlines</span><span class="p">)))</span>

<span class="c1"># Color each center of mass according to the cluster they belong to.</span>
<span class="n">colormap</span> <span class="o">=</span> <span class="n">colormap</span><span class="o">.</span><span class="n">create_colormap</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clusters</span><span class="p">)))</span>
<span class="n">colormap_full</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">streamlines</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
<span class="k">for</span> <span class="n">cluster</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">clusters</span><span class="p">,</span> <span class="n">colormap</span><span class="p">):</span>
    <span class="n">colormap_full</span><span class="p">[</span><span class="n">cluster</span><span class="o">.</span><span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>

<span class="c1"># Visualization</span>
<span class="n">scene</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">Scene</span><span class="p">()</span>
<span class="n">scene</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="n">scene</span><span class="o">.</span><span class="n">SetBackground</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">actor</span><span class="o">.</span><span class="n">streamtube</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">window</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">white</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.05</span><span class="p">))</span>
<span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">actor</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">centers</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">:],</span> <span class="n">colormap_full</span><span class="p">,</span> <span class="n">point_radius</span><span class="o">=</span><span class="mf">0.2</span><span class="p">))</span>
<span class="n">window</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">n_frames</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">out_path</span><span class="o">=</span><span class="s1">&#39;center_of_mass_feature.png&#39;</span><span class="p">,</span>
              <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">600</span><span class="p">))</span>
<span class="k">if</span> <span class="n">interactive</span><span class="p">:</span>
    <span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="id4">
<img alt="auto_examples/segmentation/center_of_mass_feature.png" src="auto_examples/segmentation/center_of_mass_feature.png" />
<figcaption>
<p><span class="caption-text">Showing the center of mass of each streamline colored according to
the QuickBundles results.</span><a class="headerlink" href="#id4" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="midpoint-feature">
<span id="clustering-examples-midpointfeature"></span><h2><a class="toc-backref" href="#id11" role="doc-backlink">Midpoint Feature</a><a class="headerlink" href="#midpoint-feature" title="Permalink to this heading">#</a></h2>
<p><strong>What:</strong> Instances of <cite>MidpointFeature</cite> extract the middle point of a
streamline. If there is an even number of points, the feature will then
correspond to the point halfway between the two middle points.</p>
<p><strong>When:</strong> This feature can be useful when you <em>only</em> need information about the
spatial position of a streamline. This can also be an alternative to the
<cite>CenterOfMassFeature</cite> if the point extracted must be on the streamline.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">dipy.viz</span> <span class="kn">import</span> <span class="n">window</span><span class="p">,</span> <span class="n">actor</span><span class="p">,</span> <span class="n">colormap</span>
<span class="kn">from</span> <span class="nn">dipy.segment.clustering</span> <span class="kn">import</span> <a href="../../reference/dipy.segment.html#dipy.segment.clustering.QuickBundles" title="dipy.segment.clustering.QuickBundles" class="sphx-glr-backref-module-dipy-segment-clustering sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">QuickBundles</span></a>
<span class="kn">from</span> <span class="nn">dipy.segment.featurespeed</span> <span class="kn">import</span> <span class="n">MidpointFeature</span>
<span class="kn">from</span> <span class="nn">dipy.segment.metric</span> <span class="kn">import</span> <span class="n">EuclideanMetric</span>

<span class="c1"># Get some streamlines.</span>
<span class="n">streamlines</span> <span class="o">=</span> <span class="n">get_streamlines</span><span class="p">()</span>  <span class="c1"># Previously defined.</span>

<span class="n">feature</span> <span class="o">=</span> <span class="n">MidpointFeature</span><span class="p">()</span>
<span class="n">metric</span> <span class="o">=</span> <span class="n">EuclideanMetric</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>

<span class="n">qb</span> <span class="o">=</span> <a href="../../reference/dipy.segment.html#dipy.segment.clustering.QuickBundles" title="dipy.segment.clustering.QuickBundles" class="sphx-glr-backref-module-dipy-segment-clustering sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">QuickBundles</span></a><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="mf">5.</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="n">metric</span><span class="p">)</span>
<span class="n">clusters</span> <span class="o">=</span> <span class="n">qb</span><span class="o">.</span><span class="n">cluster</span><span class="p">(</span><span class="n">streamlines</span><span class="p">)</span>

<span class="c1"># Extract feature of every streamline.</span>
<span class="n">midpoints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">feature</span><span class="o">.</span><span class="n">extract</span><span class="p">,</span> <span class="n">streamlines</span><span class="p">)))</span>

<span class="c1"># Color each midpoint according to the cluster they belong to.</span>
<span class="n">colormap</span> <span class="o">=</span> <span class="n">colormap</span><span class="o">.</span><span class="n">create_colormap</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clusters</span><span class="p">)))</span>
<span class="n">colormap_full</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">streamlines</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
<span class="k">for</span> <span class="n">cluster</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">clusters</span><span class="p">,</span> <span class="n">colormap</span><span class="p">):</span>
    <span class="n">colormap_full</span><span class="p">[</span><span class="n">cluster</span><span class="o">.</span><span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>

<span class="c1"># Visualization</span>
<span class="n">scene</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">Scene</span><span class="p">()</span>
<span class="n">scene</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="n">scene</span><span class="o">.</span><span class="n">SetBackground</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">actor</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="n">midpoints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">:],</span> <span class="n">colormap_full</span><span class="p">,</span> <span class="n">point_radius</span><span class="o">=</span><span class="mf">0.2</span><span class="p">))</span>
<span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">actor</span><span class="o">.</span><span class="n">streamtube</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">window</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">white</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.05</span><span class="p">))</span>
<span class="n">window</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">n_frames</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">out_path</span><span class="o">=</span><span class="s1">&#39;midpoint_feature.png&#39;</span><span class="p">,</span>
              <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">600</span><span class="p">))</span>
<span class="k">if</span> <span class="n">interactive</span><span class="p">:</span>
    <span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="id5">
<img alt="auto_examples/segmentation/midpoint_feature.png" src="auto_examples/segmentation/midpoint_feature.png" />
<figcaption>
<p><span class="caption-text">Showing the middle point of each streamline colored according to the
QuickBundles results.</span><a class="headerlink" href="#id5" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="arclength-feature">
<span id="clustering-examples-arclengthfeature"></span><h2><a class="toc-backref" href="#id12" role="doc-backlink">ArcLength Feature</a><a class="headerlink" href="#arclength-feature" title="Permalink to this heading">#</a></h2>
<p><strong>What:</strong> Instances of <cite>ArcLengthFeature</cite> compute the length of a streamline.
More specifically, this feature corresponds to the sum of the lengths of every
streamline’s segments.</p>
<p><strong>When:</strong> This feature can be useful when you <em>only</em> need information about the
length of a streamline.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">dipy.viz</span> <span class="kn">import</span> <span class="n">window</span><span class="p">,</span> <span class="n">actor</span><span class="p">,</span> <span class="n">colormap</span>
<span class="kn">from</span> <span class="nn">dipy.segment.clustering</span> <span class="kn">import</span> <a href="../../reference/dipy.segment.html#dipy.segment.clustering.QuickBundles" title="dipy.segment.clustering.QuickBundles" class="sphx-glr-backref-module-dipy-segment-clustering sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">QuickBundles</span></a>
<span class="kn">from</span> <span class="nn">dipy.segment.featurespeed</span> <span class="kn">import</span> <span class="n">ArcLengthFeature</span>
<span class="kn">from</span> <span class="nn">dipy.segment.metric</span> <span class="kn">import</span> <span class="n">EuclideanMetric</span>

<span class="c1"># Get some streamlines.</span>
<span class="n">streamlines</span> <span class="o">=</span> <span class="n">get_streamlines</span><span class="p">()</span>  <span class="c1"># Previously defined.</span>

<span class="n">feature</span> <span class="o">=</span> <span class="n">ArcLengthFeature</span><span class="p">()</span>
<span class="n">metric</span> <span class="o">=</span> <span class="n">EuclideanMetric</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
<span class="n">qb</span> <span class="o">=</span> <a href="../../reference/dipy.segment.html#dipy.segment.clustering.QuickBundles" title="dipy.segment.clustering.QuickBundles" class="sphx-glr-backref-module-dipy-segment-clustering sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">QuickBundles</span></a><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="mf">2.</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="n">metric</span><span class="p">)</span>
<span class="n">clusters</span> <span class="o">=</span> <span class="n">qb</span><span class="o">.</span><span class="n">cluster</span><span class="p">(</span><span class="n">streamlines</span><span class="p">)</span>

<span class="c1"># Color each streamline according to the cluster they belong to.</span>
<span class="n">colormap</span> <span class="o">=</span> <span class="n">colormap</span><span class="o">.</span><span class="n">create_colormap</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">(</span><span class="n">clusters</span><span class="o">.</span><span class="n">centroids</span><span class="p">))</span>
<span class="n">colormap_full</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">streamlines</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
<span class="k">for</span> <span class="n">cluster</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">clusters</span><span class="p">,</span> <span class="n">colormap</span><span class="p">):</span>
    <span class="n">colormap_full</span><span class="p">[</span><span class="n">cluster</span><span class="o">.</span><span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>

<span class="c1"># Visualization</span>
<span class="n">scene</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">Scene</span><span class="p">()</span>
<span class="n">scene</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="n">scene</span><span class="o">.</span><span class="n">SetBackground</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">actor</span><span class="o">.</span><span class="n">streamtube</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">colormap_full</span><span class="p">))</span>
<span class="n">window</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">out_path</span><span class="o">=</span><span class="s1">&#39;arclength_feature.png&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">600</span><span class="p">))</span>
<span class="k">if</span> <span class="n">interactive</span><span class="p">:</span>
    <span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="id6">
<img alt="auto_examples/segmentation/arclength_feature.png" src="auto_examples/segmentation/arclength_feature.png" />
<figcaption>
<p><span class="caption-text">Showing the streamlines colored according to their length.</span><a class="headerlink" href="#id6" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="vector-between-endpoints-feature">
<span id="clustering-examples-vectorofendpointsfeature"></span><h2><a class="toc-backref" href="#id13" role="doc-backlink">Vector Between Endpoints Feature</a><a class="headerlink" href="#vector-between-endpoints-feature" title="Permalink to this heading">#</a></h2>
<p><strong>What:</strong> Instances of <cite>VectorOfEndpointsFeature</cite> extract the vector going
from one extremity of the streamline to the other. In other words, this feature
represents the vector beginning at the first point and ending at the last point
of the streamlines.</p>
<p><strong>When:</strong> This feature can be useful when you <em>only</em> need information about the
orientation of a streamline.</p>
<p><strong>Note:</strong> Since streamlines endpoints are ambiguous (e.g. the first point could
be either the beginning or the end of the streamline), one must be careful when
using this feature.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">dipy.viz</span> <span class="kn">import</span> <span class="n">window</span><span class="p">,</span> <span class="n">colormap</span>
<span class="kn">from</span> <span class="nn">dipy.segment.clustering</span> <span class="kn">import</span> <a href="../../reference/dipy.segment.html#dipy.segment.clustering.QuickBundles" title="dipy.segment.clustering.QuickBundles" class="sphx-glr-backref-module-dipy-segment-clustering sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">QuickBundles</span></a>
<span class="kn">from</span> <span class="nn">dipy.segment.featurespeed</span> <span class="kn">import</span> <span class="n">VectorOfEndpointsFeature</span>
<span class="kn">from</span> <span class="nn">dipy.segment.metric</span> <span class="kn">import</span> <span class="n">CosineMetric</span>

<span class="c1"># Get some streamlines.</span>
<span class="n">streamlines</span> <span class="o">=</span> <span class="n">get_streamlines</span><span class="p">()</span>  <span class="c1"># Previously defined.</span>

<span class="n">feature</span> <span class="o">=</span> <span class="n">VectorOfEndpointsFeature</span><span class="p">()</span>
<span class="n">metric</span> <span class="o">=</span> <span class="n">CosineMetric</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
<span class="n">qb</span> <span class="o">=</span> <a href="../../reference/dipy.segment.html#dipy.segment.clustering.QuickBundles" title="dipy.segment.clustering.QuickBundles" class="sphx-glr-backref-module-dipy-segment-clustering sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">QuickBundles</span></a><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="n">metric</span><span class="p">)</span>
<span class="n">clusters</span> <span class="o">=</span> <span class="n">qb</span><span class="o">.</span><span class="n">cluster</span><span class="p">(</span><span class="n">streamlines</span><span class="p">)</span>

<span class="c1"># Color each streamline according to the cluster they belong to.</span>
<span class="n">colormap</span> <span class="o">=</span> <span class="n">colormap</span><span class="o">.</span><span class="n">create_colormap</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">clusters</span><span class="p">)))</span>
<span class="n">colormap_full</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">streamlines</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
<span class="k">for</span> <span class="n">cluster</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">clusters</span><span class="p">,</span> <span class="n">colormap</span><span class="p">):</span>
    <span class="n">colormap_full</span><span class="p">[</span><span class="n">cluster</span><span class="o">.</span><span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>

<span class="c1"># Visualization</span>
<span class="n">scene</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">Scene</span><span class="p">()</span>
<span class="n">scene</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="n">scene</span><span class="o">.</span><span class="n">SetBackground</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">actor</span><span class="o">.</span><span class="n">streamtube</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">colormap_full</span><span class="p">))</span>
<span class="n">window</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">out_path</span><span class="o">=</span><span class="s1">&#39;vector_of_endpoints_feature.png&#39;</span><span class="p">,</span>
              <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">600</span><span class="p">))</span>
<span class="k">if</span> <span class="n">interactive</span><span class="p">:</span>
    <span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="id7">
<img alt="auto_examples/segmentation/vector_of_endpoints_feature.png" src="auto_examples/segmentation/vector_of_endpoints_feature.png" />
<figcaption>
<p><span class="caption-text">Showing the streamlines colored according to their orientation.</span><a class="headerlink" href="#id7" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div role="list" class="citation-list">
<div class="citation" id="garyfallidis12" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>Garyfallidis12<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id2">2</a>)</span>
<p>Garyfallidis E. et al., QuickBundles a method for
tractography simplification, Frontiers in Neuroscience, vol 6, no 175, 2012.</p>
</div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  0.000 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-segmentation-segment-clustering-features-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/a35ba7731cec6b61eb98a09ce03138f7/segment_clustering_features.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">segment_clustering_features.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/4a47616b8c9184bef2e9607289f473b4/segment_clustering_features.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">segment_clustering_features.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>

<div class="section ablog__blog_comments">
  
  
</div>

                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clustering-examples-identityfeature">Identity Feature</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resample-feature">Resample Feature</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#center-of-mass-feature">Center of Mass Feature</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#midpoint-feature">Midpoint Feature</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arclength-feature">ArcLength Feature</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vector-between-endpoints-feature">Vector Between Endpoints Feature</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  
<script type="module" src="../../_static/scripts/grg-sphinx-theme.js"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2008-2023, dipy developers &lt;neuroimaging@python.org&gt;.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

    <div class="copyright-text">
      <i class="fa-regular fa-copyright"></i> 
    </div>
  </footer>
  </body>
</html>